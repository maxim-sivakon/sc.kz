this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(t,e,s,a,i,n,r,l,o){"use strict";var c=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(c,"eventNameSpace","BX.Intranet.Userprofile:");var d,m;var u=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"getOpenSliderFunction",value:function t(e){if(n.Type.isStringFilled(e)){return function(){l.EventEmitter.emit(l.EventEmitter.GLOBAL_TARGET,c.eventNameSpace+"onNeedToHide");BX.SidePanel.Instance.open(e,{cacheable:false,data:{},width:500})}}return function(){}}},{key:"showData",value:function t(e){e.value=parseInt(e.value||0);var s=n.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --vertical" id="user-indicator-pulse">\n\t\t\t\t<div class="system-auth-form__item-block --margin-bottom">\n\t\t\t\t\t<div class="system-auth-form__stress-widget">\n\t\t\t\t\t\t<div data-role="value-degree" class="system-auth-form__stress-widget--arrow" style="transform: rotate(90deg);"></div>\n\t\t\t\t\t\t<div class="system-auth-form__stress-widget--content">\n\t\t\t\t\t\t\t<div class="system-auth-form__stress-widget--content-title">','</div>\n\t\t\t\t\t\t\t<div data-role="value" class="system-auth-form__stress-widget--content-progress ','">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --stress-widget-sp">\n\t\t\t\t\t\t<div class="system-auth-form__item-block --center --width-100">\n\t\t\t\t\t\t\t<span class="system-auth-form__stress-widget--status  --flex --','">','</span>\n\t\t\t\t\t\t\t<span class="system-auth-form__icon-help" onclick="','"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-title --link-dotted" onclick="','">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-block --flex --center">\n\t\t\t\t\t<div class="system-auth-form__stress-widget--message">',"</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),n.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_INDICATOR_TEXT"),e.value>0?"":"--empty",n.Text.encode(e.type),n.Text.encode(e.typeDescription),this.getOpenSliderFunction(e.url.result),this.getOpenSliderFunction(e.url.check),n.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_BUTTON"),n.Text.encode(e.comment));setTimeout((function(){var t=setInterval((function(e){e.current++;e.node.innerHTML=e.current;if(e.current>=e.end){clearInterval(t)}}),600/e.value,{current:0,end:e.value,node:s.querySelector('[data-role="value"]')});s.querySelector('[data-role="value-degree"]').style.transform="rotate("+1.8*e.value+"deg)"}),1e3);return s}},{key:"showEmpty",value:function t(e){var s=e.url.check;return n.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --vertical --empty-stress --clickable" onclick="','">\n\t\t\t\t<div class="system-auth-form__item-block --margin-bottom">\n\t\t\t\t\t<div class="system-auth-form__stress-widget">\n\t\t\t\t\t\t<div data-role="value-degree" class="system-auth-form__stress-widget--arrow" style="transform: rotate(90deg);"></div>\n\t\t\t\t\t\t<div class="system-auth-form__stress-widget--content">\n\t\t\t\t\t\t\t<div class="system-auth-form__stress-widget--content-title">','</div>\n\t\t\t\t\t\t\t<div data-role="value" class="system-auth-form__stress-widget--content-progress --empty">?</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --stress-widget-sp">\n\t\t\t\t\t\t<div class="system-auth-form__stress-widget--message">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-block --flex --center">\n\t\t\t\t\t<div class="system-auth-form__item-title --link-dotted">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-new">\n\t\t\t\t\t<div class="system-auth-form__item-new--title">',"</div>\n\t\t\t\t</div>\n\t\t\t</div>"])),this.getOpenSliderFunction(s),n.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_INDICATOR_TEXT"),n.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_TITLE"),n.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_BUTTON"),n.Loc.getMessage("INTRANET_USER_PROFILE_STRESSLEVEL_RESULT_COME_ON"))}},{key:"getPromise",value:function t(e){var s=this;var a=e.signedParameters,i=e.componentName,r=e.userId,l=e.data;return new Promise((function(t,e){var o=l?Promise.resolve({data:l}):n.ajax.runAction("socialnetwork.api.user.stresslevel.get",{signedParameters:a,data:{c:i,fields:{userId:r}}});o.then((function(e){var a=e.data;if(a&&a.id!==undefined&&a.value!==undefined){return t(s.showData(a))}var i=n.Loc.getMessage("USER_ID")===r?s.showEmpty(a):document.createElement("DIV");return t(i)}))["catch"]((function(e){t(s.showData({id:undefined,value:undefined,urls:{check:undefined}}))}))}))}}]);return t}();var _;function v(t,e,s){p(t,e);e.set(t,s)}function p(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var h=new WeakMap;var g=new WeakMap;var b=function(t){babelHelpers.inherits(e,t);function e(t){var s;babelHelpers.classCallCheck(this,e);s=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this));v(babelHelpers.assertThisInitialized(s),h,{writable:true,value:void 0});v(babelHelpers.assertThisInitialized(s),g,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(s),h,Object.assign({},t));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(s),h).lightning=String(t.id).indexOf("light:")===0?"light":String(t.id).indexOf("dark:")===0?"dark":null;s.applyTheme=s.applyTheme.bind(babelHelpers.assertThisInitialized(s));s.setEventNamespace(c.eventNameSpace);l.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",(function(t){var e=t.data,a=e.id,i=e.theme;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(s),h).id=a;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(s),h).lightning=String(a).indexOf("light:")===0?"light":String(a).indexOf("dark:")===0?"dark":null;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(s),h).title=i.title;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(s),h).previewImage=i.previewImage;babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(s),h).previewColor=i.previewColor;s.applyTheme()}));return s}babelHelpers.createClass(e,[{key:"applyTheme",value:function t(){var e=this.getContainer();if(n.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,h).previewImage)&&babelHelpers.classPrivateFieldGet(this,h).lightning){e.style.removeProperty("backgroundImage");e.style.removeProperty("backgroundSize");e.style.backgroundImage='url("'+babelHelpers.classPrivateFieldGet(this,h).previewImage+'")';e.style.backgroundSize="cover"}else{e.style.background="none"}if(n.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,h).previewColor)){this.getContainer().style.backgroundColor=babelHelpers.classPrivateFieldGet(this,h).previewColor}if(!babelHelpers.classPrivateFieldGet(this,h).lightning){e.style.backgroundColor="rgba(255,255,255,1)"}n.Dom.removeClass(e,"--light --dark");n.Dom.addClass(e,"--"+babelHelpers.classPrivateFieldGet(this,h).lightning)}},{key:"getContainer",value:function t(){if(babelHelpers.classPrivateFieldGet(this,g)){return babelHelpers.classPrivateFieldGet(this,g)}var e=function t(){BX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);l.EventEmitter.emit(l.EventEmitter.GLOBAL_TARGET,c.eventNameSpace+":onOpen")};babelHelpers.classPrivateFieldSet(this,g,n.Tag.render(_||(_=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --border ',' --padding-sm">\n\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t<div data-role="preview-color" class="system-auth-form__item-logo--image --theme"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-container --flex --column">\n\t\t\t\t\t<div class="system-auth-form__item-title --white-space --block">\n\t\t\t\t\t\t<span data-role="title">','</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-content --margin-top-auto --center --center-force">\n\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn" onclick="','">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>"])),babelHelpers.classPrivateFieldGet(this,h).lightning?"--"+babelHelpers.classPrivateFieldGet(this,h).lightning:"",n.Loc.getMessage("AUTH_THEME_DIALOG"),e,n.Loc.getMessage("INTRANET_USER_PROFILE_CHANGE")));setTimeout(this.applyTheme,0);return babelHelpers.classPrivateFieldGet(this,g)}}],[{key:"getPromise",value:function t(){var e=this;return new Promise((function(t,s){n.ajax.runComponentAction("bitrix:intranet.user.profile.button","getThemePickerData",{mode:"class"}).then((function(s){var a=new e(s.data);t(a.getContainer())}))["catch"](s)}))}}]);return e}(l.EventEmitter);var f,T,E,I,L,y,P;function R(t,e){S(t,e);e.add(t)}function S(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function H(t,e,s){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return s}var N=new WeakSet;var O=function(){function t(e){babelHelpers.classCallCheck(this,t);R(this,N);this.data=e;this.onclickHandle=this.onclickHandle.bind(this)}babelHelpers.createClass(t,[{key:"showData",value:function t(){var e=H(this,N,k).call(this),s=e.myPosition,a=e.userList,i=e.range;var r;if(!this.data["ENABLED"]){r=n.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --without-stat">\n\t\t\t\t<div class="system-auth-form__item-container --flex --column">\n\t\t\t\t\t<div class="system-auth-form__item-title">','</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --lighter" data-role="empty-info">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_TITLE"),n.Loc.getMessage("INTRANET_USER_PROFILE_DISABLED"))}else if(i>0&&s>0){r=n.Tag.render(T||(T=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --clickable" onclick="','">\n\t\t\t\t<div class="system-auth-form__item-container">\n\t\t\t\t\t<div class="system-auth-form__item-title --without-margin">','</div>\n\t\t\t\t\t<div class="system-auth-form__item-title --link-light --margin-s">\n\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t<span class="system-auth-form__icon-help" data-hint="','" data-hint-no-icon></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-title --link-light" data-role="empty-info">','</div>\n\n\t\t\t\t\t<div class="system-auth-form__item-title --white-space --margin-xl">\n\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t<span class="system-auth-form__ustat-icon --up"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__userlist">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),this.onclickHandle,n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_TITLE"),n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_RATING"),n.Loc.getMessage("INTRANET_USTAT_COMPANY_HELP_RATING"),n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY"),n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_POSITION",{"#POSITION#":s,"#AMONG#":i}),a)}else{var l=i>0?this.onclickHandle:function(){};r=n.Tag.render(E||(E=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --without-stat ','" onclick="','">\n\t\t\t\t<div class="system-auth-form__item-container --flex --column">\n\t\t\t\t\t<div class="system-auth-form__item-title">','</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --lighter" data-role="empty-info">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i>0?"--clickable":"",l,n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_TITLE"),n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY_BRIEF"))}BX.UI.Hint.init(r);return r}},{key:"onclickHandle",value:function t(e){l.EventEmitter.emit(c.eventNameSpace+"onNeedToHide");if(window["openIntranetUStat"]){openIntranetUStat(e)}}},{key:"showWideData",value:function t(){var e=H(this,N,k).call(this),s=e.myPosition,a=e.userList,i=e.range;var r=n.Tag.render(I||(I=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="system-auth-form__item system-auth-form__scope --center --padding-ustat ','">\n\t\t\t\t<div class="system-auth-form__item-image">\n\t\t\t\t\t<div class="system-auth-form__item-image--src --ustat"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-container --overflow">\n\t\t\t\t\t<div class="system-auth-form__item-title --xl --without-margin">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__item-container --block">\n\t\t\t\t\t<div class="system-auth-form__item-title --link-light" data-role="empty-info">','</div>\n\t\t\t\t\t<div class="system-auth-form__item-container--inline" data-role="my-position">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --link-light --without-margin --margin-right">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-title --white-space --margin-xl">\n\t\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t\t<span class="system-auth-form__ustat-icon --up"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__userlist" data-role="user-list">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="system-auth-form__icon-help --absolute-right-bottom" data-hint="','" data-hint-no-icon></div>\n\t\t\t</div>\n\t\t'])),i>0?"--clickable":"--without-stat",n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_TITLE"),n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY"),n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_RATING"),n.Loc.getMessage("INTRANET_USER_PROFILE_PULSE_MY_POSITION",{"#POSITION#":s,"#AMONG#":i}),a,n.Loc.getMessage("INTRANET_USTAT_COMPANY_HELP_RATING"));if(i>0){r.addEventListener("click",this.onclickHandle)}return r}}],[{key:"getPromise",value:function t(e){var s=this;var a=e.userId,i=e.isNarrow,r=e.data;return new Promise((function(t,e){(r?Promise.resolve({data:r}):n.ajax.runComponentAction("bitrix:intranet.ustat.department","getJson",{mode:"class",data:{}})).then((function(e){var a=e.data;var n=new s(a);t(i?n.showData():n.showWideData())}))["catch"]((function(e){e=n.Type.isArray(e)?e:[e];var s=document.createElement("ul");e.forEach((function(t){var e=t.message;var a=document.createElement("li");a.innerHTML=e;a.className="ui-alert-message";s.appendChild(a)}));t(n.Tag.render(L||(L=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div class="ui-alert ui-alert-danger">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>"])),s))}))}))}}]);return t}();function k(){var t=this;var e=document.createDocumentFragment();var s=parseInt(this.data["USERS_RATING"]["position"]);var a=0;var i=n.Type.isPlainObject(this.data["USERS_RATING"]["top"])?Object.values(this.data["USERS_RATING"]["top"]):n.Type.isArray(this.data["USERS_RATING"]["top"])&&this.data["USERS_RATING"]["top"].length>0?babelHelpers.toConsumableArray(this.data["USERS_RATING"]["top"]):[{USER_ID:n.Loc.getMessage("USER_ID"),ACTIVITY:0}];var r=s>5?[].concat(babelHelpers.toConsumableArray(i.slice(0,3)),babelHelpers.toConsumableArray(i.slice(-1)),[null]):i;r.forEach((function(s,i){if(s===null){e.appendChild(n.Tag.render(y||(y=babelHelpers.taggedTemplateLiteral(['<div class="system-auth-form__userlist-item --list"></div>']))));return}var r=s["ACTIVITY"];var l="";if(t.data["USERS_INFO"][s["USER_ID"]]){r=[t.data["USERS_INFO"][s["USER_ID"]]["FULL_NAME"],": ",s["ACTIVITY"]].join("");l=String(t.data["USERS_INFO"][s["USER_ID"]]["AVATAR_SRC"]).length>0?t.data["USERS_INFO"][s["USER_ID"]]["AVATAR_SRC"]:null}var o=String(s["USER_ID"])===String(n.Loc.getMessage("USER_ID"));if(o){a=s["ACTIVITY"]}e.appendChild(n.Tag.render(P||(P=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div title="','" class="system-auth-form__userlist-item ui-icon ui-icon ui-icon-common-user">\n\t\t\t\t\t\t\t<i ',"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"])),n.Text.encode(r),l?"style=\"background-image: url('".concat(encodeURI(l),"');background-size: cover;\""):""))}));return{userList:e,myPosition:s,range:parseInt(this.data["USERS_RATING"]["range"]),myActivity:a}}var w,A,F,U,M,G;function C(t,e){D(t,e);e.add(t)}function B(t,e,s){D(t,e);e.set(t,s)}function D(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function x(t,e,s){W(t,e);return s}function W(t,e){if(t!==e){throw new TypeError("Private static access of wrong provenance")}}function z(t,e,s){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return s}var X=new WeakMap;var Y=new WeakMap;var q=new WeakSet;var V=new WeakSet;var j=new WeakSet;var K=new WeakSet;var Q=new WeakSet;var J=new WeakSet;var Z=new WeakSet;var $=function(){function t(e,s){babelHelpers.classCallCheck(this,t);C(this,Z);C(this,J);C(this,Q);C(this,K);C(this,j);C(this,V);C(this,q);B(this,X,{writable:true,value:void 0});B(this,Y,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,X,e);babelHelpers.classPrivateFieldSet(this,Y,s)}babelHelpers.createClass(t,[{key:"handlerLogoutButton",value:function t(){if(z(this,q,tt).call(this)){z(this,Z,rt).call(this)}}},{key:"getContainer",value:function e(){var s=this;var a=function t(){if(z(s,q,tt).call(s)){babelHelpers.classPrivateFieldGet(s,Y).getPopup().close();BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(s,X).url,{allowChangeHistory:false})}else if(!z(s,V,et).call(s)){babelHelpers.classPrivateFieldGet(s,Y).getPopup().close();BX.UI.InfoHelper.show("limit_office_login_history")}};var i=n.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --vertical">\n\t\t\t\t\t<div class="system-auth-form__item-container --center ','">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-logo--image ','" onclick="','">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --sm ','" onclick="','">',"</div>\n\t\t\t\t\t\t\t",'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-content">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__visited">\n\t\t\t\t\t</div>\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),z(this,q,tt).call(this)?"--border":"",z(this,q,tt).call(this)?"--history":"--history-gray",a,z(this,q,tt).call(this)?"--link":"",a,n.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_TITLE"),z(this,J,nt).call(this),z(this,K,at).call(this),z(this,Q,it).call(this,a));var r=i.querySelector(".system-auth-form__visited");if(z(this,q,tt).call(this)){var l=x(t,t,ot).call(t);l.show(r);n.ajax.runComponentAction("bitrix:intranet.user.login.history","getListLastLogin",{mode:"class",data:{limit:1}}).then((function(e){l.hide();var s=e.data;var i=Object.keys(s);i.forEach((function(e){var i=x(t,t,lt).call(t,s[e]["DEVICE_PLATFORM"],s[e]["GEOLOCATION"],s[e]["BROWSER"]);var l=x(t,t,ct).call(t,s[e]["LOGIN_DATE"]);var o=n.Tag.render(A||(A=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div class="system-auth-form__visited-item">\n\t\t\t\t\t\t\t<div data-hint=\'',"' class=\"system-auth-form__visited-icon --",'" onclick="','" data-hint-no-icon></div>\n\t\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\t\tBX.ready(() => {\n\t\t\t\t\t\t\t\t\tBX.UI.Hint.init(document.querySelector(".system-auth-form__visited-icon --','"));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t<\/script>\n\t\t\t\t\t\t\t<div class="system-auth-form__visited-text" onclick="','">','</div>\n\t\t\t\t\t\t\t<div class="system-auth-form__visited-time" onclick="','">',"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"])),n.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_THIS_DEVICE_DESCRIPTION"),s[e]["DEVICE_TYPE"],a,s[e]["DEVICE_TYPE"],a,i,a,l);n.Dom.append(o,r)}))}))["catch"]((function(){l.hide()}))}return i}}]);return t}();function tt(){return babelHelpers.classPrivateFieldGet(this,X).isAvailableUserLoginHistory&&babelHelpers.classPrivateFieldGet(this,X).isConfiguredUserLoginHistory}function et(){return babelHelpers.classPrivateFieldGet(this,X).isAvailableUserLoginHistory}function st(){return babelHelpers.classPrivateFieldGet(this,X).isConfiguredUserLoginHistory}function at(){var t=this;var e=function e(){z(t,Z,rt).call(t)};var s=function e(){babelHelpers.classPrivateFieldGet(t,Y).getPopup().close();BX.Helper.show("redirect=detail&code=16615982")};if(z(this,q,tt).call(this)){return n.Tag.render(F||(F=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn" onclick="','">',"</div>\n\t\t\t"],['\n\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn" onclick=\\"','\\">',"</div>\n\t\t\t"])),e,n.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE"))}else if(!z(this,j,st).call(this)){return n.Tag.render(U||(U=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t<div class='system-auth-form__settings' onclick=\"",'">',"</div>\n\t\t\t"])),s,n.Loc.getMessage("INTRANET_USER_PROFILE_CONFIGURE"))}return null}function it(t){if(z(this,q,tt).call(this)){return n.Tag.render(M||(M=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item-container">\n\t\t\t\t\t<div class="system-auth-form__show-history" onclick="','">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),t,n.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_SHOW_FULL_LIST"))}return null}function nt(){var t=this;var e=function e(){babelHelpers.classPrivateFieldGet(t,Y).getPopup().close();BX.UI.InfoHelper.show("limit_office_login_history")};if(!z(this,V,et).call(this)){return n.Tag.render(G||(G=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item-title-logo --lock" onclick="','">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t'])),e)}return null}function rt(){var t=this;BX.UI.Dialogs.MessageBox.show({message:n.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_WITHOUT_THIS_MESSAGE"),title:n.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_TITLE"),buttons:BX.UI.Dialogs.MessageBoxButtons.YES_CANCEL,minWidth:400,popupOptions:{contentBackground:"transparent",autoHide:true,closeByEsc:true,padding:0,background:"",events:{onShow:function e(){babelHelpers.classPrivateFieldGet(t,Y).getPopup().getPopup().setAutoHide(false)},onPopupClose:function e(){babelHelpers.classPrivateFieldGet(t,Y).getPopup().getPopup().setAutoHide(true)}}},onYes:function t(e){n.ajax.runComponentAction("bitrix:intranet.user.profile.password","logout",{mode:"ajax"}).then((function(){e.close();BX.UI.Notification.Center.notify({content:n.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_WITHOUT_THIS_RESULT"),autoHideDelay:1800})}))["catch"]((function(){e.close();BX.UI.Notification.Center.notify({content:n.Loc.getMessage("INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_ERROR"),autoHideDelay:3600})}))}})}function lt(t,e,s){var a=[];if(s){a.push(s)}if(e){a.push(e)}if(t){a.push(t)}return a.join(", ")}function ot(){return new a.Loader({size:20,mode:"inline"})}function ct(t){var e=[["-","d.m.Y H:i:s"],["s","sago"],["i","iago"],["H","Hago"],["d","dago"],["m","mago"]];return" - "+BX.date.format(e,new Date(t),new Date)}var dt,mt,ut,_t,vt,pt;var ht=function(){function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var s=arguments.length>1?arguments[1]:undefined;babelHelpers.classCallCheck(this,t);this.isSingle=e;this.config=s}babelHelpers.createClass(t,[{key:"getContainer",value:function t(){var e=this;var s=this.config.IS_ACTIVE==="Y";var a=function t(){l.EventEmitter.emit(l.EventEmitter.GLOBAL_TARGET,c.eventNameSpace+":onOpen");if(String(e.config.URL).length>0){n.Uri.addParam(e.config.URL,{page:"otpConnected"});BX.SidePanel.Instance.open(n.Uri.addParam(e.config.URL,{page:"otpConnected"}),{width:1100})}else{console.error("Otp page is not defined. Check the component params")}};var i=s?n.Tag.render(dt||(dt=babelHelpers.taggedTemplateLiteral(['<div class="ui-qr-popupcomponentmaker__btn" style="margin-top: auto" onclick="','">',"</div>"])),a,n.Loc.getMessage("INTRANET_USER_PROFILE_TURNED_ON")):n.Tag.render(mt||(mt=babelHelpers.taggedTemplateLiteral(['<div class="ui-qr-popupcomponentmaker__btn" style="margin-top: auto" onclick="','">',"</div>"])),a,n.Loc.getMessage("INTRANET_USER_PROFILE_TURN_ON"));var o=function t(){top.BX.Helper.show("redirect=detail&code=17728602");l.EventEmitter.emit(l.EventEmitter.GLOBAL_TARGET,c.eventNameSpace+":onOpen")};if(this.isSingle!==true){return n.Tag.render(ut||(ut=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-bottom-10 ','">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --authentication"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --flex --column --flex-start">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --without-margin --block">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t<span class="system-auth-form__icon-help --inline" onclick="','"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t','\n\t\t\t\t\t\t<div class="system-auth-form__item-content --margin-top-auto --center --center-force">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),s?" --active":"",n.Loc.getMessage("INTRANET_USER_PROFILE_OTP_MESSAGE"),o,s?n.Tag.render(_t||(_t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t\t\t<div class="system-auth-form__item-title --link-dotted" onclick="','">',"</div>\n\t\t\t\t\t\t\t"])),a,n.Loc.getMessage("INTRANET_USER_PROFILE_CONFIGURE")):"",i,s?"":'\n\t\t\t\t\t\t<div class="system-auth-form__item-new">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-new--title">'.concat(n.Loc.getMessage("INTRANET_USER_PROFILE_OTP_TITLE"),"</div>\n\t\t\t\t\t\t</div>"))}var d=null;var m=function t(e){e.stopPropagation();var s=[{text:n.Loc.getMessage("INTRANET_USER_PROFILE_CONFIGURE"),onclick:function t(){d.close();a()}}];d=d||new r.Menu("menu-otp-".concat(n.Text.getRandom()),e.target,s,{className:"system-auth-form__popup",angle:true,offsetLeft:10,autoHide:true,events:{onShow:function t(e){l.EventEmitter.emit(l.EventEmitter.GLOBAL_TARGET,c.eventNameSpace+":showOtpMenu",new l.BaseEvent({data:{popup:e.target}}))}}});d.toggle()};return n.Tag.render(vt||(vt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-sm-all ',' --vertical --center">\n\t\t\t\t\t<div class="system-auth-form__item-logo --margin-bottom --center system-auth-form__item-container --flex">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --authentication"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --flex">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light --center --s">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t <span class="system-auth-form__icon-help" onclick="','"></span> \n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t','\n\t\t\t\t\t<div class="system-auth-form__item-container --flex --column --space-around">\n\t\t\t\t\t\t<div class="system-auth-form__item-content --flex --display-flex">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t"])),s?" --active":"",n.Loc.getMessage("INTRANET_USER_PROFILE_OTP_MESSAGE"),o,s?n.Tag.render(pt||(pt=babelHelpers.taggedTemplateLiteral(['<div class="system-auth-form__config --absolute" onclick="','"></div>'])),m):"",i,s?"":'\n\t\t\t\t\t\t<div class="system-auth-form__item-new system-auth-form__item-new-icon --ssl">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-new--title">'.concat(n.Loc.getMessage("INTRANET_USER_PROFILE_OTP_TITLE"),"</div>\n\t\t\t\t\t\t</div>"))}}]);return t}();var gt,bt,ft,Tt,Et,It,Lt,yt,Pt,Rt,St,Ht,Nt,Ot,kt,wt;function At(t,e){Ut(t,e);e.add(t)}function Ft(t,e,s){Ut(t,e);e.set(t,s)}function Ut(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Mt(t,e,s){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return s}var Gt=Symbol("user.widget");var Ct=new WeakMap;var Bt=new WeakMap;var Dt=new WeakMap;var xt=new WeakMap;var Wt=new WeakMap;var zt=new WeakMap;var Xt=new WeakSet;var Yt=new WeakSet;var qt=new WeakSet;var Vt=new WeakSet;var jt=new WeakSet;var Kt=new WeakSet;var Qt=new WeakSet;var Jt=new WeakSet;var Zt=new WeakSet;var $t=new WeakSet;var te=new WeakSet;var ee=new WeakSet;var se=new WeakSet;var ae=new WeakSet;var ie=new WeakSet;var ne=new WeakSet;var re=new WeakSet;var le=function(t){babelHelpers.inherits(s,t);function s(t,e){var a;var i=e.profile,r=i.ID,l=i.FULL_NAME,o=i.PHOTO,d=i.MASK,m=i.STATUS,u=i.URL,_=i.WORK_POSITION,v=e.component,p=v.componentName,h=v.signedParameters,g=e.features,b=e.desktopDownloadLinks;babelHelpers.classCallCheck(this,s);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).call(this));At(babelHelpers.assertThisInitialized(a),re);At(babelHelpers.assertThisInitialized(a),ne);At(babelHelpers.assertThisInitialized(a),ie);At(babelHelpers.assertThisInitialized(a),ae);At(babelHelpers.assertThisInitialized(a),se);At(babelHelpers.assertThisInitialized(a),ee);At(babelHelpers.assertThisInitialized(a),te);At(babelHelpers.assertThisInitialized(a),$t);At(babelHelpers.assertThisInitialized(a),Zt);At(babelHelpers.assertThisInitialized(a),Jt);At(babelHelpers.assertThisInitialized(a),Qt);At(babelHelpers.assertThisInitialized(a),Kt);At(babelHelpers.assertThisInitialized(a),jt);At(babelHelpers.assertThisInitialized(a),Vt);At(babelHelpers.assertThisInitialized(a),qt);At(babelHelpers.assertThisInitialized(a),Yt);At(babelHelpers.assertThisInitialized(a),Xt);Ft(babelHelpers.assertThisInitialized(a),Ct,{writable:true,value:void 0});Ft(babelHelpers.assertThisInitialized(a),Bt,{writable:true,value:void 0});Ft(babelHelpers.assertThisInitialized(a),Dt,{writable:true,value:null});Ft(babelHelpers.assertThisInitialized(a),xt,{writable:true,value:{}});Ft(babelHelpers.assertThisInitialized(a),Wt,{writable:true,value:new n.Cache.MemoryCache});Ft(babelHelpers.assertThisInitialized(a),zt,{writable:true,value:void 0});a.setEventNamespace(c.eventNameSpace);Mt(babelHelpers.assertThisInitialized(a),qt,de).call(babelHelpers.assertThisInitialized(a));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Ct,t);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Dt,{ID:r,FULL_NAME:l,PHOTO:o,MASK:d,STATUS:m,URL:u,WORK_POSITION:_});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),xt,g);if(!n.Type.isStringFilled(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),xt).browser)){babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),xt).browser=n.Browser.isLinux()?"Linux":n.Browser.isWin()?"Windows":"MacOs"}babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),zt,b);babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(a),Wt).set("componentParams",{componentName:p,signedParameters:h});a.hide=a.hide.bind(babelHelpers.assertThisInitialized(a));return a}babelHelpers.createClass(s,[{key:"toggle",value:function t(){if(this.getPopup().isShown()){this.hide()}else{this.show()}}},{key:"hide",value:function t(){this.getPopup().close()}},{key:"show",value:function t(){this.getPopup().show()}},{key:"getPopup",value:function t(){var s,a;if(babelHelpers.classPrivateFieldGet(this,Bt)){return babelHelpers.classPrivateFieldGet(this,Bt)}this.emit("init");var i=[Mt(this,Xt,oe).call(this),Mt(this,jt,ue).call(this)?{html:Mt(this,jt,ue).call(this),backgroundColor:"#fafafa"}:null,[{html:Mt(this,Kt,_e).call(this),marginBottom:24,overflow:true,minHeight:"63px"},{html:Mt(this,Qt,ve).call(this),backgroundColor:"#fafafa"}],Mt(this,Jt,pe).call(this,!!Mt(this,$t,he).call(this))?[{html:Mt(this,Jt,pe).call(this,!!Mt(this,$t,he).call(this)),overflow:true,marginBottom:24,flex:Mt(this,$t,he).call(this)?.5:1,minHeight:Mt(this,$t,he).call(this)?"115px":"56px"},Mt(this,$t,he).call(this)]:null,Mt(this,se,fe).call(this,Mt(this,ee,be).call(this)===null)&&Mt(this,ee,be).call(this)?[{flex:.5,html:Mt(this,te,ge).call(this,.7),minHeight:"190px"},[{html:Mt(this,ee,be).call(this),displayBlock:true},Mt(this,se,fe).call(this,false)]]:Mt(this,ee,be).call(this)||Mt(this,se,fe).call(this,true)?[{html:Mt(this,te,ge).call(this,2),flex:2},(s=Mt(this,ee,be).call(this))!==null&&s!==void 0?s:Mt(this,se,fe).call(this,true)]:Mt(this,te,ge).call(this,0),Mt(this,ae,Te).call(this),{html:Mt(this,ie,Ee).call(this),backgroundColor:"#fafafa"},Mt(this,Vt,me).call(this)?{html:Mt(this,Vt,me).call(this),marginBottom:24,backgroundColor:"#fafafa"}:null,[{html:(a=Mt(this,ne,Ie).call(this))!==null&&a!==void 0?a:null,backgroundColor:"#fafafa"},{html:Mt(this,re,Le).call(this),backgroundColor:"#fafafa"}]];var r=function t(e){var s=[];if(n.Type.isArray(e)){for(var a=0;a<e.length;a++){if(n.Type.isArray(e[a])){var i=t(e[a]);if(i!==null){if(n.Type.isArray(i)&&i.length===1){s.push(i[0])}else{s.push(i)}}}else if(e[a]!==null){s.push(e[a])}}}return s.length<=0?null:s.length===1?s[0]:s};i=r(i);var o=function t(e,s,a){if(n.Type.isArray(e)){return{html:e.map(t)}}return{flex:e["flex"]||0,html:e["html"]||e,backgroundColor:e["backgroundColor"]||null,disabled:e["disabled"]||null,overflow:e["overflow"]||null,marginBottom:e["marginBottom"]||null,displayBlock:e["displayBlock"]||null,minHeight:e["minHeight"]||null,secondary:e["secondary"]||false}};babelHelpers.classPrivateFieldSet(this,Bt,new e.PopupComponentsMaker({target:babelHelpers.classPrivateFieldGet(this,Ct),content:i.map(o),width:400,offsetTop:-14}));l.EventEmitter.subscribe("BX.Main.InterfaceButtons:onMenuShow",this.hide);l.EventEmitter.subscribe(c.eventNameSpace+"onNeedToHide",this.hide);return babelHelpers.classPrivateFieldGet(this,Bt)}}],[{key:"init",value:function t(e,s){var a=this;if(e[Gt]){return}var i=function t(){if(!e["popupSymbol"]){e["popupSymbol"]=new a(e,s)}e["popupSymbol"].toggle();a.instance=e["popupSymbol"]};e[Gt]=true;e.addEventListener("click",i)}},{key:"getInstance",value:function t(){return this.instance}}]);return s}(l.EventEmitter);function oe(){var t=this;return babelHelpers.classPrivateFieldGet(this,Wt).remember("profile",(function(){var e=function e(s){t.hide();return BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(t,Dt).URL)};var s=n.Tag.render(gt||(gt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<span class="system-auth-form__profile-avatar--image"\n\t\t\t\t\t',">\n\t\t\t\t</span>\n\t\t\t\t"])),babelHelpers.classPrivateFieldGet(t,Dt).PHOTO?"\n\t\t\t\t\t\tstyle=\"background-size: cover; background-image: url('".concat(encodeURI(babelHelpers.classPrivateFieldGet(t,Dt).PHOTO),"')\""):"");var a=n.Tag.render(bt||(bt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__profile-name">',"</div>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(t,Dt).FULL_NAME);l.EventEmitter.subscribe(l.EventEmitter.GLOBAL_TARGET,"BX.Intranet.UserProfile:Avatar:changed",(function(e){var a=babelHelpers.slicedToArray(e.data,1),i=a[0],r=i.url,l=i.userId;if(babelHelpers.classPrivateFieldGet(t,Dt).ID>0&&l&&babelHelpers.classPrivateFieldGet(t,Dt).ID.toString()===l.toString()){babelHelpers.classPrivateFieldGet(t,Dt).PHOTO=r;s.style=n.Type.isStringFilled(r)?"background-size: cover; background-image: url('".concat(encodeURI(babelHelpers.classPrivateFieldGet(t,Dt).PHOTO),"')"):""}}));l.EventEmitter.subscribe(l.EventEmitter.GLOBAL_TARGET,"BX.Intranet.UserProfile:Name:changed",(function(e){var s=babelHelpers.slicedToArray(e.data,1),i=s[0].fullName;babelHelpers.classPrivateFieldGet(t,Dt).FULL_NAME=i;a.innerHTML=i;babelHelpers.classPrivateFieldGet(t,Ct).querySelector("#user-name").innerHTML=i}));var i=n.Type.isStringFilled(babelHelpers.classPrivateFieldGet(t,Dt).WORK_POSITION)?n.Text.encode(babelHelpers.classPrivateFieldGet(t,Dt).WORK_POSITION):"";if(babelHelpers.classPrivateFieldGet(t,Dt).STATUS&&n.Loc.hasMessage("INTRANET_USER_PROFILE_"+babelHelpers.classPrivateFieldGet(t,Dt).STATUS)){i=n.Loc.getMessage("INTRANET_USER_PROFILE_"+babelHelpers.classPrivateFieldGet(t,Dt).STATUS)}return n.Tag.render(ft||(ft=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --clickable" onclick="','">\n\t\t\t\t\t<div class="system-auth-form__profile">\n\t\t\t\t\t\t<div class="system-auth-form__profile-avatar">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__profile-content --margin--right">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t<div class="system-auth-form__profile-position">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__profile-controls">\n\t\t\t\t\t\t\t<span class="ui-qr-popupcomponentmaker__btn --large --border" >\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t \t\t\x3c!-- <span class="ui-qr-popupcomponentmaker__btn --large --success">any text</span> --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'])),e,s,a,i,n.Loc.getMessage("INTRANET_USER_PROFILE_PROFILE"))}))}function ce(){var t=this;return babelHelpers.classPrivateFieldGet(this,Wt).remember("popup-container",(function(){return t.getPopup().getPopup().getPopupContainer()}))}function de(){var t=this;var e=function e(s){console.log(s);if(s.data.popup){setTimeout((function(){n.Event.bind(Mt(t,Yt,ce).call(t),"click",(function(){s.data.popup.close()}))}),100)}};this.subscribe("init",(function(){l.EventEmitter.subscribe(l.EventEmitter.GLOBAL_TARGET,c.eventNameSpace+":onOpen",t.hide);t.subscribe("bindings:open",e);l.EventEmitter.subscribe(l.EventEmitter.GLOBAL_TARGET,c.eventNameSpace+":showOtpMenu",e)}))}function me(){var t=this;return babelHelpers.classPrivateFieldGet(this,Wt).remember("b24netPanel",(function(){if(babelHelpers.classPrivateFieldGet(t,xt)["b24netPanel"]!=="Y"){return null}return n.Tag.render(Tt||(Tt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<a class="system-auth-form__item system-auth-form__scope --center --padding-sm --clickable" href="https://www.bitrix24.net/">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --network"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --block">\n\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t"])),n.Loc.getMessage("AUTH_PROFILE_B24NET_MSGVER_1"),n.Loc.getMessage("INTRANET_USER_PROFILE_GOTO"))}))}function ue(){var t=this;return babelHelpers.classPrivateFieldGet(this,Wt).remember("adminPanel",(function(){if(babelHelpers.classPrivateFieldGet(t,xt)["adminPanel"]!=="Y"){return null}return n.Tag.render(Et||(Et=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<a class="system-auth-form__item system-auth-form__scope --center --padding-sm --clickable" href="/bitrix/admin/">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --admin-panel"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --block">\n\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t"])),n.Loc.getMessage("INTRANET_USER_PROFILE_ADMIN_PANEL"),n.Loc.getMessage("INTRANET_USER_PROFILE_GOTO"))}))}function _e(){return babelHelpers.classPrivateFieldGet(this,Wt).remember("themePicker",(function(){return b.getPromise()}))}function ve(){return babelHelpers.classPrivateFieldGet(this,Wt).remember("Mask",(function(){return n.Tag.render(It||(It=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-sm">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --mask"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container">\n\t\t\t\t\t\t<div class="system-auth-form__item-title">\n\t\t\t\t\t\t\t<span>','</span>\n\t\t\t\t\t\t\t<span style="cursor: default" class="system-auth-form__icon-help"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-content --center --center-force">\n\t\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn --disabled">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-new --soon">\n\t\t\t\t\t\t<div class="system-auth-form__item-new--title">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),n.Loc.getMessage("INTRANET_USER_PROFILE_MASKS"),n.Loc.getMessage("INTRANET_USER_PROFILE_INSTALL"),n.Loc.getMessage("INTRANET_USER_PROFILE_SOON"))}))}function pe(t){var e=this;return babelHelpers.classPrivateFieldGet(this,Wt).remember("getCompanyPulse",(function(){if(babelHelpers.classPrivateFieldGet(e,xt).pulse==="Y"&&babelHelpers.classPrivateFieldGet(e,Dt).ID>0&&babelHelpers.classPrivateFieldGet(e,Dt).ID===n.Loc.getMessage("USER_ID")){return new Promise((function(s){n.ajax.runComponentAction("bitrix:intranet.user.profile.button","getUserStatComponent",{mode:"class"}).then((function(a){BX.Runtime.html(null,a.data.html).then((function(){var a;s(O.getPromise({userId:babelHelpers.classPrivateFieldGet(e,Dt).ID,isNarrow:t,data:(a=babelHelpers.classPrivateFieldGet(e,xt)["pulseData"])!==null&&a!==void 0?a:null}))}))}))}))}return null}))}function he(){var t=this;if(babelHelpers.classPrivateFieldGet(this,xt)["stressLevel"]!=="Y"){return null}return babelHelpers.classPrivateFieldGet(this,Wt).remember("getStressLevel",(function(){var e;return u.getPromise({signedParameters:babelHelpers.classPrivateFieldGet(t,Wt).get("componentParams").signedParameters,componentName:babelHelpers.classPrivateFieldGet(t,Wt).get("componentParams").componentName,userId:babelHelpers.classPrivateFieldGet(t,Dt).ID,data:(e=babelHelpers.classPrivateFieldGet(t,xt)["stressLevelData"])!==null&&e!==void 0?e:null})}))}function ge(t){var e=this;return babelHelpers.classPrivateFieldGet(this,Wt).remember("getQrContainer",(function(){return new Promise((function(s,a){BX.loadExt(["ui.qrauthorization","qrcode"]).then((function(){var a=function t(){e.hide();new i.QrAuthorization({title:n.Loc.getMessage("INTRANET_USER_PROFILE_QRCODE_TITLE2"),content:n.Loc.getMessage("INTRANET_USER_PROFILE_QRCODE_BODY2")}).show()};var r=function t(s){top.BX.Helper.show("redirect=detail&code=14999860");e.hide();s.preventDefault();s.stopPropagation();return false};var l;if(t!==2&&t!==0){l=n.Tag.render(Lt||(Lt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="system-auth-form__item system-auth-form__scope" style="padding: 10px 14px">\n\t\t\t\t\t\t<div class="system-auth-form__item-container --center --column --center">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --center --margin-xl">','</div>\n\t\t\t\t\t\t\t<div class="system-auth-form__qr" style="margin-bottom: 12px">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn --border" style="margin-top: auto" onclick="','">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__icon-help --absolute" onclick="','" title="','"></div>\n\t\t\t\t\t</div>\n\t\t\t\t'])),n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_TITLE2_SMALL"),a,n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_SHOW_QR_SMALL"),r,n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK"))}else if(t===0){l=n.Tag.render(yt||(yt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-qr-xl">\n\t\t\t\t\t\t<div class="system-auth-form__item-container --column --flex --flex-start">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --l">','</div>\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --link-dotted" onclick="','">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn --large --border" style="margin-top: auto" onclick="','">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-container --qr">\n\t\t\t\t\t\t\t<div class="system-auth-form__qr --full-size"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'])),n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_TITLE2"),r,n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK"),a,n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_SHOW_QR"))}else{l=n.Tag.render(Pt||(Pt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-mid-qr">\n\t\t\t\t\t\t<div class="system-auth-form__item-container --column --flex --flex-start">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --block">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t<span class="system-auth-form__icon-help --inline" onclick="','" title="','"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-qr-popupcomponentmaker__btn --border" style="margin-top: auto" onclick="','">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-container --qr">\n\t\t\t\t\t\t\t<div class="system-auth-form__qr --size-2"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'])),n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_TITLE2_SMALL"),r,n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK"),a,n.Loc.getMessage("INTRANET_USER_PROFILE_MOBILE_SHOW_QR"))}return s(l)}))["catch"](a)}))}))}function be(){var t=this;return babelHelpers.classPrivateFieldGet(this,Wt).remember("getDeskTopContainer",(function(){var e=babelHelpers.classPrivateFieldGet(t,xt)["appInstalled"]["APP_MAC_INSTALLED"]==="Y";var s="--apple";var a=n.Loc.getMessage("INTRANET_USER_PROFILE_DESKTOP_APPLE");var i=babelHelpers.classPrivateFieldGet(t,zt).macos;var l={DEB:{text:n.Loc.getMessage("INTRANET_USER_PROFILE_DOWNLOAD_LINUX_DEB"),href:babelHelpers.classPrivateFieldGet(t,zt).linuxDeb},RPM:{text:n.Loc.getMessage("INTRANET_USER_PROFILE_DOWNLOAD_LINUX_RPM"),href:babelHelpers.classPrivateFieldGet(t,zt).linuxRpm}};if(babelHelpers.classPrivateFieldGet(t,xt).browser==="Windows"){e=babelHelpers.classPrivateFieldGet(t,xt)["appInstalled"]["APP_WINDOWS_INSTALLED"]==="Y";s="--windows";a=n.Loc.getMessage("INTRANET_USER_PROFILE_DESKTOP_WINDOWS");i=babelHelpers.classPrivateFieldGet(t,zt).windows}var o=e?function(t){t.preventDefault();t.stopPropagation();return false}:function(){t.hide();return true};var c=null;var d=function e(s){s.preventDefault();c=c||new r.Menu({className:"system-auth-form__popup",bindElement:s.target,items:[{text:l.DEB.text,href:l.DEB.href,onclick:function t(){c.close()}},{text:l.RPM.text,href:l.RPM.href,onclick:function t(){c.close()}}],angle:true,offsetLeft:10,events:{onShow:function e(){t.getPopup().getPopup().setAutoHide(false)},onClose:function e(){t.getPopup().getPopup().setAutoHide(true)}}});c.toggle()};if(babelHelpers.classPrivateFieldGet(t,xt).browser==="Linux"){e=babelHelpers.classPrivateFieldGet(t,xt)["appInstalled"]["APP_LINUX_INSTALLED"]==="Y";s="--linux";a=n.Loc.getMessage("INTRANET_USER_PROFILE_DESKTOP_LINUX");i="";o=e?function(t){t.preventDefault();t.stopPropagation();return false}:d}if(babelHelpers.classPrivateFieldGet(t,xt)["otp"].IS_ENABLED!=="Y"){var m=null;var u=[{text:n.Loc.getMessage("INTRANET_USER_PROFILE_DOWNLOAD"),href:i,onclick:function e(){m.close();t.hide()}}];if(babelHelpers.classPrivateFieldGet(t,xt).browser==="Linux"){u=[{text:l.DEB.text,href:l.DEB.href,onclick:function t(){m.close()}},{text:l.RPM.text,href:l.RPM.href,onclick:function t(){m.close()}}]}var _=function e(s){m=m||new r.Menu({className:"system-auth-form__popup",bindElement:s.target,items:u,angle:true,offsetLeft:10,events:{onShow:function e(){t.getPopup().getPopup().setAutoHide(false)},onClose:function e(){t.getPopup().getPopup().setAutoHide(true)}}});m.toggle()};return n.Tag.render(Rt||(Rt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div data-role="desktop-item" class="system-auth-form__item system-auth-form__scope --padding-sm-all ',' --vertical --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo --margin-bottom --center system-auth-form__item-container --flex">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-logo--image ','"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t','\n\t\t\t\t\t\t<div class="system-auth-form__item-container --flex --center --display-flex">\n\t\t\t\t\t\t\t<div class="system-auth-form__item-title --light --center --s">','</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="system-auth-form__item-content --flex --center --display-flex">\n\t\t\t\t\t\t\t<a class="ui-qr-popupcomponentmaker__btn" style="margin-top: auto" href="','" target="_blank" onclick="','">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"])),e?" --active":"",s,e?n.Tag.render(St||(St=babelHelpers.taggedTemplateLiteral(['<div class="system-auth-form__config --absolute" onclick="','"></div>'])),_):"",a,i,o,e?n.Loc.getMessage("INTRANET_USER_PROFILE_INSTALLED"):n.Loc.getMessage("INTRANET_USER_PROFILE_INSTALL"))}var v=function e(){var s=n.Tag.render(Ht||(Ht=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<a href="','" class="system-auth-form__item-title --link-dotted">',"</a>\n\t\t\t\t"])),i,n.Loc.getMessage("INTRANET_USER_PROFILE_DOWNLOAD"));if(babelHelpers.classPrivateFieldGet(t,xt).browser==="Linux"){s.addEventListener("click",d)}return s};return n.Tag.render(Nt||(Nt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-bottom-10 ','">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image ','"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container">\n\t\t\t\t\t\t<div class="system-auth-form__item-title ','">',"</div>\n\t\t\t\t\t\t",'\n\t\t\t\t\t\t<div class="system-auth-form__item-content --center --center-force">\n\t\t\t\t\t\t\t<a class="ui-qr-popupcomponentmaker__btn" href="','" target="_blank" onclick="','">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),e?" --active":"",s,e?" --without-margin":"--min-height",a,e?v():"",i,o,e?n.Loc.getMessage("INTRANET_USER_PROFILE_INSTALLED"):n.Loc.getMessage("INTRANET_USER_PROFILE_INSTALL"))}))}function fe(t){var e=this;if(babelHelpers.classPrivateFieldGet(this,xt).otp.IS_ENABLED!=="Y"){return null}return babelHelpers.classPrivateFieldGet(this,Wt).remember("getOTPContainer",(function(){return new ht(t,babelHelpers.classPrivateFieldGet(e,xt).otp).getContainer()}))}function Te(){var t=this;if(babelHelpers.classPrivateFieldGet(this,xt).loginHistory.isHide){return null}return babelHelpers.classPrivateFieldGet(this,Wt).remember("getLoginHistoryContainer",(function(){var e=new $(babelHelpers.classPrivateFieldGet(t,xt).loginHistory,t);return{html:e.getContainer(),backgroundColor:"#fafafa"}}))}function Ee(){var t=this;if(!(n.Type.isPlainObject(babelHelpers.classPrivateFieldGet(this,xt)["bindings"])&&n.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,xt)["bindings"]["text"])&&n.Type.isArray(babelHelpers.classPrivateFieldGet(this,xt)["bindings"]["items"])&&babelHelpers.classPrivateFieldGet(this,xt)["bindings"]["items"].length>0)){return null}return babelHelpers.classPrivateFieldGet(this,Wt).remember("getBindingsContainer",(function(){var e=n.Tag.render(Ot||(Ot=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item --hover system-auth-form__scope --center --padding-sm">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --binding"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-role="arrow" class="system-auth-form__item-icon --arrow-right"></div>\n\t\t\t\t</div>\n\t\t\t'])),n.Text.encode(babelHelpers.classPrivateFieldGet(t,xt)["bindings"]["text"]));e.addEventListener("click",(function(){t.__bindingsMenu=t.__bindingsMenu||new r.Menu({className:"system-auth-form__popup",bindElement:e.querySelector('[data-role="arrow"]'),items:babelHelpers.classPrivateFieldGet(t,xt)["bindings"]["items"],angle:true,cachable:false,offsetLeft:10,events:{onShow:function e(){t.emit("bindings:open")}}});t.__bindingsMenu.toggle()}));return e}))}function Ie(){var t=this;if(babelHelpers.classPrivateFieldGet(this,xt)["im"]!=="Y"){return null}return babelHelpers.classPrivateFieldGet(this,Wt).remember("getNotificationContainer",(function(){var e=n.Tag.render(kt||(kt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item --hover system-auth-form__scope --padding-sm">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --notification"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),n.Loc.getMessage("AUTH_NOTIFICATION"));e.addEventListener("click",(function(){t.hide();BXIM.openSettings({onlyPanel:"notify"})}));return e}))}function Le(){return babelHelpers.classPrivateFieldGet(this,Wt).remember("getLogoutContainer",(function(){var t=function t(){if(o.DesktopApi.isDesktop()){o.DesktopApi.logout()}else{var e=new n.Uri(window.location.pathname);e.removeQueryParam(["logout","login","back_url_pub","user_lang"]);var s=new n.Uri("/auth/?logout=yes");s.setQueryParam("sessid",BX.bitrix_sessid());s.setQueryParam("backurl",encodeURIComponent(e.toString()));document.location.href=s}};return n.Tag.render(wt||(wt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="system-auth-form__item system-auth-form__scope --padding-sm">\n\t\t\t\t\t<div class="system-auth-form__item-logo">\n\t\t\t\t\t\t<div class="system-auth-form__item-logo--image --logout"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="system-auth-form__item-container --center">\n\t\t\t\t\t\t<div class="system-auth-form__item-title --light">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a onclick="','" class="system-auth-form__item-link-all"></a>\n\t\t\t\t</div>\n\t\t\t'])),n.Loc.getMessage("AUTH_LOGOUT"),t)}))}babelHelpers.defineProperty(le,"instance",null);t.Widget=le})(this.BX.Intranet.UserProfile=this.BX.Intranet.UserProfile||{},BX.UI,BX,BX,BX.UI,BX,BX.Main,BX.Event,BX.Messenger.v2.Lib);
//# sourceMappingURL=script.map.js