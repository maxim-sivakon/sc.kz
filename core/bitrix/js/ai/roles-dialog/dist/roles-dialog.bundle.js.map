{"version":3, "file":"roles-dialog.bundle.js","sources":["../src/roles-dialog-loader-popup.js","../src/roles-dialog-error-popup.js","../src/roles-dialog-analytics.js","../src/components/roles-dialog-group-list-footer.js","../src/components/roles-dialog-header-with-hint.js","../src/components/roles-dialog-group-list-header.js","../src/components/roles-dialog-content-header.js","../src/components/roles-dialog-role-item-avatar.js","../src/components/roles-dialog-label-new.js","../src/components/roles-dialog-role-item.js","../src/components/roles-dialog-group-item.js","../src/components/roles-dialog-search-stub.js","../src/roles-dialog.js"],"sourcesContent":["import { Tag } from 'main.core';\nimport { Popup } from 'main.popup';\nimport './css/roles-dialog-loader-popup.css';\nimport './css/roles-dialog-skeleton.css';\n\nexport class RolesDialogLoaderPopup\n{\n\t#popup: Popup;\n\n\tshow(): void\n\t{\n\t\tif (!this.#popup)\n\t\t{\n\t\t\tthis.#initPopup();\n\t\t}\n\n\t\tthis.#popup.show();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#popup?.close();\n\t}\n\n\t#initPopup(): void\n\t{\n\t\tthis.#popup = new Popup({\n\t\t\tcontent: this.#renderContent(),\n\t\t\tresizable: true,\n\t\t\twidth: 881,\n\t\t\theight: 621,\n\t\t\tpadding: 0,\n\t\t\tcontentPadding: 0,\n\t\t\tborderRadius: '10px 10px 4px 4px',\n\t\t\tclassName: 'ai_roles-dialog_popup',\n\t\t\tanimation: true,\n\t\t\tcacheable: false,\n\t\t});\n\t}\n\n\t#renderContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__roles-dialog_loader-popup-inner\">\n\t\t\t\t${this.#renderPopupTitleBar()}\n\t\t\t\t<div class=\"ai__roles-dialog_loader-popup-content\">\n\t\t\t\t\t<div class=\"ai__roles-dialog_loader-popup-content-left\">\n\t\t\t\t\t\t<div style=\"width: 145px; height: 10px; margin-bottom: 22px; margin-left: 12px;\">\n\t\t\t\t\t\t\t<div class=\"rec --color-ai\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%; height: 119px; margin-bottom: 14px;\">\n\t\t\t\t\t\t\t<div class=\"rec --color-ai\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%; height: 54px;\">\n\t\t\t\t\t\t\t<div class=\"rec --color-ai\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ai__roles-dialog_loader-popup-content-right\">\n\t\t\t\t\t<div style=\"width: 101px; height: 10px; margin-bottom: 22px;\">\n\t\t\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%; height: 75px; margin-bottom: 8px;\">\n\t\t\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%; height: 75px;\">\n\t\t\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderPopupTitleBar(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__roles-dialog_loader-popup-title-bar\">\n\t\t\t\t<div\n\t\t\t\t\tstyle=\"width: 152px; height: 16px;\"\n\t\t\t\t\tclass=\"ai__roles-dialog_loader-popup-title-bar-left\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tstyle=\"width: 98px; height: 16px;\"\n\t\t\t\t\tclass=\"ai__roles-dialog_loader-popup-title-bar-left\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Tag, Loc } from 'main.core';\nimport { Popup, CloseIconSize } from 'main.popup';\nimport { Icon, Main } from 'ui.icon-set.api.core';\n\nimport './css/roles-dialog-error-popup.css';\n\nexport function showRolesDialogErrorPopup()\n{\n\tconst popup = new Popup({\n\t\tcontent: renderPopupContent(),\n\t\tresizable: false,\n\t\twidth: 881,\n\t\theight: 621,\n\t\tpadding: 0,\n\t\tcontentPadding: 0,\n\t\tborderRadius: '10px 10px 4px 4px',\n\t\tclassName: 'ai_roles-dialog_popup',\n\t\tanimation: true,\n\t\tcacheable: false,\n\t\tautoHide: true,\n\t\tcloseByEsc: true,\n\t\tcloseIcon: true,\n\t\tcloseIconSize: CloseIconSize.LARGE,\n\t});\n\n\tpopup.show();\n}\n\nfunction renderPopupContent(): HTMLElement\n{\n\treturn Tag.render`\n\t\t<div class=\"ai__roles-dialog_error-popup-inner\">\n\t\t\t<div class=\"ai__roles-dialog_error-popup-content\">\n\t\t\t\t<div class=\"ai__roles-dialog_error-popup-content-warning-icon\">\n\t\t\t\t\t${renderWarningIcon()}\n\t\t\t\t</div>\n\t\t\t\t<p class=\"ai__roles-dialog_error-popup-content-error-text\">\n\t\t\t\t\t${Loc.getMessage('AI_COPILOT_ROLES_ERROR_TEXT')}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t`;\n}\n\nfunction renderWarningIcon(): HTMLElement\n{\n\tconst warningIconColor = 'rgba(176, 149, 220, 0.4)';\n\n\tconst warningIcon = new Icon({\n\t\ticon: Main.WARNING,\n\t\tsize: 56,\n\t\tcolor: warningIconColor,\n\t});\n\n\treturn warningIcon.render();\n}\n","import { Runtime, Text } from 'main.core';\nimport type { AnalyticsOptions } from 'ui.analytics';\n\ntype RolesDialogAnalyticsOptions = {\n\tcSection: string;\n}\n\nconst RolesDialogAnalyticsEvent = Object.freeze({\n\tOPEN: 'open',\n\tCLOSE: 'close',\n\tSAVE: 'save',\n\tSEARCH: 'search',\n\tFEEDBACK: 'feedback',\n\tSELECT: 'save',\n});\n\nconst RolesDialogAnalyticsEventStatus = Object.freeze({\n\tSUCCESS: 'success',\n\tERROR: 'error',\n});\n\nexport class RolesDialogAnalytics\n{\n\t#cSection: string;\n\n\tconstructor(options: RolesDialogAnalyticsOptions)\n\t{\n\t\tthis.#cSection = this.#formatCSectionParam(options.cSection);\n\t}\n\n\tsendOpenLabel(isSuccess: boolean, role?: string): void\n\t{\n\t\tconst status = isSuccess ? RolesDialogAnalyticsEventStatus.SUCCESS : RolesDialogAnalyticsEventStatus.ERROR;\n\t\tconst extraParams = role ? { p1: { name: 'role', value: role } } : {};\n\n\t\tthis.#sendLabel({\n\t\t\tstatus,\n\t\t\textraParams,\n\t\t\tevent: RolesDialogAnalyticsEvent.OPEN,\n\t\t});\n\t}\n\n\tsendCloseLabel(role?: string): void\n\t{\n\t\tconst extraParams = role ? { p1: { name: 'role', value: role } } : {};\n\n\t\tthis.#sendLabel({\n\t\t\textraParams,\n\t\t\tevent: RolesDialogAnalyticsEvent.CLOSE,\n\t\t});\n\t}\n\n\tsendSelectLabel(role: string): void\n\t{\n\t\tconst extraParams = role ? { p1: { name: 'role', value: role } } : {};\n\n\t\tthis.#sendLabel({\n\t\t\textraParams,\n\t\t\tevent: RolesDialogAnalyticsEvent.SELECT,\n\t\t});\n\t}\n\n\tsendSearchLabel(search: string): void\n\t{\n\t\tconst extraParams: SendLabelExtraParams = search\n\t\t\t? {\n\t\t\t\tp1: {\n\t\t\t\t\tname: 'search',\n\t\t\t\t\tvalue: search,\n\t\t\t\t},\n\t\t\t} : {};\n\n\t\tthis.#sendLabel({\n\t\t\textraParams,\n\t\t\tevent: RolesDialogAnalyticsEvent.SEARCH,\n\t\t});\n\t}\n\n\tsendFeedBackLabel(): void\n\t{\n\t\tthis.#sendLabel({\n\t\t\tevent: RolesDialogAnalyticsEvent.FEEDBACK,\n\t\t});\n\t}\n\n\tasync #sendLabel(params: SendLabelParams): void\n\t{\n\t\tconst status = params.status || RolesDialogAnalyticsEventStatus.SUCCESS;\n\t\tconst event = params.event;\n\t\tconst extraParams: SendLabelExtraParams = params.extraParams || {};\n\n\t\ttry\n\t\t{\n\t\t\tconst { sendData } = await Runtime.loadExtension('ui.analytics');\n\n\t\t\tconst sendDataOptions: AnalyticsOptions = {\n\t\t\t\tevent,\n\t\t\t\tstatus,\n\t\t\t\t...this.#getCommonParameters(),\n\t\t\t\t...this.#getFormattedExtraParams(extraParams),\n\t\t\t};\n\n\t\t\tsendData(sendDataOptions);\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tconsole.error('AI: RolesDialog: Can\\'t send analytics', e);\n\t\t}\n\t}\n\n\t#getCommonParameters(): CommonParameters\n\t{\n\t\treturn {\n\t\t\ttool: 'ai',\n\t\t\tcategory: 'roles_picker',\n\t\t\tc_section: this.#cSection,\n\t\t};\n\t}\n\n\t#getFormattedExtraParams(extraParams: SendLabelExtraParams): SendLabelExtraParams\n\t{\n\t\tconst formattedExtraParams = {};\n\n\t\tObject.entries(extraParams).forEach(([paramKey, param]) => {\n\t\t\tformattedExtraParams[paramKey] = `${Text.toCamelCase(param.name)}_${Text.toCamelCase(param.value)}`;\n\t\t});\n\n\t\treturn formattedExtraParams;\n\t}\n\n\t#formatCSectionParam(cSection: string): string\n\t{\n\t\treturn cSection\n\t\t\t.split('_')\n\t\t\t.map((stringPart: string) => {\n\t\t\t\tif (Number.isNaN(parseInt(stringPart, 10)))\n\t\t\t\t{\n\t\t\t\t\treturn stringPart;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t})\n\t\t\t.filter((stringPart: string) => stringPart)\n\t\t\t.join('_');\n\t}\n}\n\ntype CommonParameters = {\n\ttool: string;\n\tcategory: string;\n\tc_section: string;\n}\n\ntype SendLabelParams = {\n\tstatus?: string;\n\tevent: string;\n\textraParams?: SendLabelExtraParams;\n}\n\ntype SendLabelExtraParams = {\n\tp1?: ExtraParam;\n\tp2?: ExtraParam;\n\tp3?: ExtraParam;\n\tp4?: ExtraParam;\n\tp5?: ExtraParam;\n}\n\ntype ExtraParam = {\n\tname: string;\n\tvalue: string;\n}\n","import { EventEmitter } from 'main.core.events';\nimport '../css/roles-dialog-group-list-footer.css';\n\nexport const RolesDialogGroupListFooterEvents = {\n\tCHOOSE_STANDARD_ROLE: 'AI.RolesDialog.GroupListFooter:ChooseStandardRole',\n};\n\nexport const RolesDialogGroupListFooter = {\n\tmethods: {\n\t\thandleClick(): void {\n\t\t\tEventEmitter.emit(document, RolesDialogGroupListFooterEvents.CHOOSE_STANDARD_ROLE);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<button @click=\"handleClick\" class=\"ai__roles-dialog_standard-group-btn\">\n\t\t\t<span class=\"ai__roles-dialog_standard-group-btn-text\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('AI_COPILOT_ROLES_USE_STANDARD_ROLE') }}\n\t\t\t</span>\n\t\t</button>\n\t`,\n};\n","import { Hint } from 'ui.vue3.components.hint';\n\nimport '../css/roles-dialog-header-with-hint.css';\n\nexport const RolesDialogHeaderWithHint = {\n\tcomponents: {\n\t\tHint,\n\t},\n\tprops: {\n\t\theader: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ai__roles-dialog_header-with-hint\">\n\t\t\t<span class=\"ai__roles-dialog_header-with-hint-text\">\n\t\t\t\t{{ header }}\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tv-if=\"hint\"\n\t\t\t\tclass=\"ai__roles-dialog_header-with-hint-text-hint\"\n\t\t\t>\n\t\t\t\t<Hint :text=\"hint\" />\n\t\t\t</span>\n\t\t</div>\n\t`,\n};\n","import { RolesDialogHeaderWithHint } from './roles-dialog-header-with-hint';\n\nimport '../css/roles-dialog-group-list-header.css';\n\nexport const RolesDialogGroupListHeader = {\n\tcomponents: {\n\t\tRolesDialogHeaderWithHint,\n\t},\n\tcomputed: {\n\t\ttext(): string {\n\t\t\treturn this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_GROUP_LIST_HEADER_2');\n\t\t},\n\t\thint(): string {\n\t\t\treturn this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_GROUP_LIST_HEADER_HINT_2');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ai__roles-dialog_group-list-header\">\n\t\t\t<RolesDialogHeaderWithHint\n\t\t\t\t:header=\"text\"\n\t\t\t\t:hint=\"hint\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Runtime } from 'main.core';\nimport type { States as StatesType } from 'ui.entity-catalog';\nimport { mapWritableState } from 'ui.vue3.pinia';\nimport type { RolesDialogAnalytics } from '../roles-dialog-analytics';\nimport { RolesDialogHeaderWithHint } from './roles-dialog-header-with-hint';\n\nimport '../css/roles-dialog-content-header.css';\n\nexport function getRolesDialogContentHeader(States: StatesType, analytic: RolesDialogAnalytics): Object\n{\n\tconst sendSearchAnalyticLabel = (searchQuery: ?string) => {\n\t\tanalytic.sendSearchLabel(searchQuery);\n\t};\n\n\tconst debouncedSendSearchAnalyticLabel: Function = Runtime.debounce(sendSearchAnalyticLabel, 800);\n\n\treturn {\n\t\tcomponents: {\n\t\t\tRolesDialogHeaderWithHint,\n\t\t},\n\t\tcomputed: {\n\t\t\t...mapWritableState(States.useGlobalState, {\n\t\t\t\tsearchQuery: 'searchQuery',\n\t\t\t\tsearching: 'searchApplied',\n\t\t\t}),\n\t\t\theader(): string {\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_MAIN_CONTENT_HEADER');\n\t\t\t},\n\t\t\thint(): string {\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_MAIN_CONTENT_HEADER_HINT');\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tsearchQuery() {\n\t\t\t\tif (this.searching)\n\t\t\t\t{\n\t\t\t\t\tdebouncedSendSearchAnalyticLabel(this.searchQuery);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\ttemplate: `\n\t\t\t<div class=\"ai__roles-dialog_main-content-header\">\n\t\t\t\t<RolesDialogHeaderWithHint\n\t\t\t\t\t:header=\"header\"\n\t\t\t\t\t:hint=\"hint\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t`,\n\t};\n}\n","import { Main } from 'ui.icon-set.api.core';\nimport { BIcon } from 'ui.icon-set.api.vue';\n\nexport const RolesDialogRoleItemAvatar = {\n\tname: 'RolesDialogRoleItemAvatar',\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tdata(): { isAvatarLoaded: boolean | null } {\n\t\treturn {\n\t\t\tisAvatarLoaded: null,\n\t\t};\n\t},\n\tprops: {\n\t\tavatar: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tavatarAlt: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tcomputed: {\n\t\ticonSize(): number {\n\t\t\treturn 24;\n\t\t},\n\t\ticonColor(): string {\n\t\t\treturn getComputedStyle(document.body).getPropertyValue('--ui-color-background-primary') || '#fff';\n\t\t},\n\t\tfallbackIcon(): string {\n\t\t\treturn Main.COPILOT_AI;\n\t\t},\n\t},\n\tmethods: {\n\t\tonImageLoad(): void {\n\t\t\tthis.isAvatarLoaded = true;\n\t\t},\n\t\tonImageLoadError(): void {\n\t\t\tthis.isAvatarLoaded = false;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"ai__roles-dialog_role-image-wrapper\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-if=\"icon\"\n\t\t\t\tclass=\"ai__roles-dialog_role-image-icon\"\n\t\t\t>\n\t\t\t\t<BIcon\n\t\t\t\t\t:name=\"icon\"\n\t\t\t\t\t:size=\"iconSize\"\n\t\t\t\t\t:color=\"iconColor\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t>\n\t\t\t\t<transition name=\"ai-roles-dialog-icon-fade\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-show=\"isAvatarLoaded\"\n\t\t\t\t\t\tclass=\"ai__roles-dialog_role-image\"\n\t\t\t\t\t\t:src=\"avatar\"\n\t\t\t\t\t\t:alt=\"avatarAlt\"\n\t\t\t\t\t\t@error=\"onImageLoadError\"\n\t\t\t\t\t\t@load=\"onImageLoad\"\n\t\t\t\t\t/>\n\t\t\t\t</transition>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isAvatarLoaded === null || isAvatarLoaded === false\"\n\t\t\t\t\t:class=\"{'ai__roles-dialog_role-image-icon': true, '--loading': isAvatarLoaded === null}\"\n\t\t\t\t>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name=\"fallbackIcon\"\n\t\t\t\t\t\t:size=\"iconSize\"\n\t\t\t\t\t\t:color=\"iconColor\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Label, LabelColor, LabelSize } from 'ui.label';\n\nexport const RolesDialogLabelNew = {\n\tprops: {\n\t\tinverted: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tlabelHTML(): string {\n\t\t\tconst labelColor = this.inverted ? LabelColor.COPILOT_LIGHT_REVERSE : LabelColor.COPILOT_LIGHT;\n\n\t\t\tconst label = new Label({\n\t\t\t\tcolor: labelColor,\n\t\t\t\tsize: LabelSize.SM,\n\t\t\t\ttext: 'NEW',\n\t\t\t\tfill: true,\n\t\t\t});\n\n\t\t\treturn label.render().outerHTML;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div ref=\"label\" class=\"ai__roles-dialog_label\" v-html=\"labelHTML\"></div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { Main } from 'ui.icon-set.api.core';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { mapWritableState } from 'ui.vue3.pinia';\nimport { type States as StatesType } from 'ui.entity-catalog';\nimport { RolesDialogRoleItemAvatar } from './roles-dialog-role-item-avatar';\nimport { RolesDialogLabelNew } from './roles-dialog-label-new';\n\nimport '../css/roles-dialog-role-item.css';\n\nimport type { RolesDialogItemData } from '../roles-dialog';\n\n// eslint-disable-next-line max-lines-per-function\nexport function getRolesDialogRoleItemWithStates(States: StatesType): Object\n{\n\treturn {\n\t\tname: 'RolesDialogRoleItem',\n\t\tcomponents: {\n\t\t\tBIcon,\n\t\t\tRolesDialogRoleItemAvatar,\n\t\t\tRolesDialogLabelNew,\n\t\t},\n\t\tprops: ['itemData'],\n\t\tcomputed: {\n\t\t\t...mapWritableState(States.useGlobalState, {\n\t\t\t\tsearching: 'searchApplied',\n\t\t\t\tsearchQuery: 'searchQuery',\n\t\t\t}),\n\t\t\titem(): RolesDialogItemData {\n\t\t\t\treturn this.itemData.itemData;\n\t\t\t},\n\t\t\tsubtitle(): string {\n\t\t\t\tconst subtitle = this.item.subtitle;\n\n\t\t\t\tif (this.searching && this.searchQuery !== '')\n\t\t\t\t{\n\t\t\t\t\treturn subtitle.replaceAll(new RegExp(this.searchQuery, 'gi'), (match) => `<mark>${match}</mark>`);\n\t\t\t\t}\n\n\t\t\t\treturn subtitle;\n\t\t\t},\n\t\t\ttitle(): string {\n\t\t\t\tconst title = this.item.title;\n\n\t\t\t\tif (this.searching && this.searchQuery !== '')\n\t\t\t\t{\n\t\t\t\t\treturn title.replaceAll(new RegExp(this.searchQuery, 'gi'), (match) => `<mark>${match}</mark>`);\n\t\t\t\t}\n\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tisSelected(): boolean {\n\t\t\t\treturn Boolean(this.item.customData?.selected);\n\t\t\t},\n\t\t\tisNew(): boolean {\n\t\t\t\treturn Boolean(this.item.customData?.isNew);\n\t\t\t},\n\t\t\tisInfoItem(): boolean {\n\t\t\t\treturn Boolean(this.item.customData?.isInfoItem);\n\t\t\t},\n\t\t\tclassName(): Object {\n\t\t\t\treturn {\n\t\t\t\t\t'ai__roles-dialog_role-item': true,\n\t\t\t\t\t'--selected': this.isSelected,\n\t\t\t\t};\n\t\t\t},\n\t\t\tselectedIconData(): { name: string, color: string, size: number } {\n\t\t\t\treturn {\n\t\t\t\t\tname: Main.CHECK,\n\t\t\t\t\tcolor: this.getUiTokenValue('--ui-color-copilot-soft') || '#B095DC',\n\t\t\t\t\tsize: 16,\n\t\t\t\t};\n\t\t\t},\n\t\t\tinfoIcon(): string {\n\t\t\t\treturn Main.INFO;\n\t\t\t},\n\t\t},\n\t\tmethods: {\n\t\t\tselectRole(): void {\n\t\t\t\tif (Type.isFunction(this.item.button.action))\n\t\t\t\t{\n\t\t\t\t\tthis.item.button.action();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetUiTokenValue(token: string): ?string {\n\t\t\t\tgetComputedStyle(document.body).getPropertyValue(token);\n\t\t\t},\n\t\t},\n\t\ttemplate: `\n\t\t\t<article @click=\"selectRole\" :class=\"className\">\n\t\t\t  <RolesDialogRoleItemAvatar\n\t\t\t      :avatar=\"item.customData.avatar\"\n\t\t\t      :avatar-alt=\"item.title\"\n\t\t\t      :icon=\"isInfoItem ? infoIcon : null\"\n\t\t\t  />\n\t\t\t  <div class=\"ai__roles-dialog_role-item-info\">\n\t\t\t    <div class=\"ai__roles-dialog_role-item-title-wrapper\">\n\t\t\t\t\t<div class=\"ai__roles-dialog_role-item-title\" v-html=\"title\"></div>\n\t\t\t\t\t<div class=\"ai__roles-dialog_role-item-label\">\n\t\t\t\t\t\t<RolesDialogLabelNew v-if=\"isNew\" />\n\t\t\t\t\t</div>\n\t\t\t    </div>\n\t\t\t    <p class=\"ai__roles-dialog_role-item-description\" v-html=\"subtitle\"></p>\n\t\t\t  </div>\n\t\t\t  <div\n\t\t\t      v-if=\"isSelected\"\n\t\t\t      class=\"ai__roles-dialog_role-item-select-icon\"\n\t\t\t  >\n\t\t\t    <BIcon\n\t\t\t        :name=\"selectedIconData.name\"\n\t\t\t        :size=\"selectedIconData.size\"\n\t\t\t        :color=\"selectedIconData.color\"\n\t\t\t    />\n\t\t\t  </div>\n\t\t\t</article>\n\t\t`,\n\t};\n}\n","import { RolesDialogGroupData } from '../roles-dialog';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions } from 'ui.icon-set.api.core';\n\nimport '../css/roles-dialog-group-item.css';\n\nimport { RolesDialogLabelNew } from './roles-dialog-label-new';\n\nexport const RolesDialogGroupItem = {\n\tcomponents: {\n\t\tBIcon,\n\t\tRolesDialogLabelNew,\n\t},\n\tprops: ['groupData'],\n\tcomputed: {\n\t\tgroup(): RolesDialogGroupData {\n\t\t\treturn this.groupData.groupData;\n\t\t},\n\t\tisNew(): boolean {\n\t\t\treturn this.group.customData.isNew;\n\t\t},\n\t\tisSelected(): boolean {\n\t\t\treturn this.group.selected;\n\t\t},\n\t\thandleClick(): ?Function\n\t\t{\n\t\t\tif (this.group.selected)\n\t\t\t{\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn this.groupData.handleClick;\n\t\t},\n\t\tgroupItemClassname(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ai__roles-dialog_group-item': true,\n\t\t\t\t'--selected': this.isSelected,\n\t\t\t};\n\t\t},\n\t\tchevronRightIconName(): string\n\t\t{\n\t\t\treturn Actions.CHEVRON_RIGHT;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div @click=\"handleClick\" class=\"ai__roles-dialog_group-item-wrapper\">\n\t\t\t<div :class=\"groupItemClassname\">\n\t\t\t\t<div class=\"ai__roles-dialog_group-item-inner\">\n\t\t\t\t<div class=\"ai__roles-dialog_group-item-title-wrapper\">\n\t\t\t\t\t<span class=\"ai__roles-dialog_group-item-title\">\n\t\t\t\t\t\t{{ group.name }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class=\"ai__roles-dialog_group-item-label-new\">\n\t\t\t\t\t\t<RolesDialogLabelNew\n\t\t\t\t\t\t\tv-if=\"isNew\"\n\t\t\t\t\t\t\t:inverted=\"isSelected\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t<b-icon :size=\"16\" :name=\"chevronRightIconName\"></b-icon>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import '../css/roles-dialog-search-stub.css';\n\nexport const RolesDialogSearchStub = {\n\ttemplate: `\n\t\t<div class=\"ai__roles-dialog_search-stub\">\n\t\t\t<div class=\"ai__roles-dialog_search-stub-content\">\n\t\t\t\t<div class=\"ai__roles-dialog_search-stub-image\"></div>\n\t\t\t\t<div class=\"ai__roles-dialog_search-stub-text\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('AI_COPILOT_ROLES_SEARCH_NO_RESULT_2') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Engine, type Role, RoleIndustry } from 'ai.engine';\nimport { Type, Loc, BaseError, Runtime } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { type EntityCatalog as EntityCatalogClass, type ItemData, type GroupData } from 'ui.entity-catalog';\nimport { RolesDialogLoaderPopup } from './roles-dialog-loader-popup';\nimport { showRolesDialogErrorPopup } from './roles-dialog-error-popup';\nimport { RolesDialogAnalytics } from './roles-dialog-analytics';\n\nimport { RolesDialogGroupListFooter, RolesDialogGroupListFooterEvents } from './components/roles-dialog-group-list-footer';\nimport { RolesDialogGroupListHeader } from './components/roles-dialog-group-list-header';\nimport { getRolesDialogContentHeader } from './components/roles-dialog-content-header';\nimport { getRolesDialogRoleItemWithStates } from './components/roles-dialog-role-item';\nimport { RolesDialogGroupItem } from './components/roles-dialog-group-item';\nimport { RolesDialogSearchStub } from './components/roles-dialog-search-stub';\n\nimport './css/roles-dialog.css';\n\nexport type RolesDialogOptions = {\n\tmoduleId: string;\n\tcontextId: string;\n\tselectedRoleCode?: string;\n\ttitle?: string;\n}\n\nexport const RolesDialogEvents = {\n\tHIDE: 'hide',\n\tSELECT_ROLE: 'select-role',\n\tSELECT_DEFAULT_ROLE: 'select-default-role',\n};\n\nexport type SelectRoleEventDataType = {\n\trole: Role;\n}\n\nexport type SelectDefaultRoleEventDataType = {\n\tcode: string;\n}\n\nexport type RolesDialogItemData = ItemData | {\n\tcustomData: {\n\t\tselected: boolean;\n\t\tisInfoItem: boolean;\n\t\tavatar?: string;\n\t\tisNew: boolean;\n\t}\n}\n\nexport type RolesDialogGroupData = GroupData | {\n\tcustomData: {\n\t\tisNew: boolean;\n\t},\n}\n\nconst RECOMMENDED_GROUP_CODE = 'recommended';\nconst RECENT_GROUP_CODE = 'recents';\n\nexport class RolesDialog extends EventEmitter\n{\n\t#entityCatalog: EntityCatalogClass;\n\t#engine: Engine;\n\t#analytic: RolesDialogAnalytics;\n\t#roles: Role[];\n\t#recentRoles: Role[];\n\t#defaultRoleCode: string;\n\t#industries: RoleIndustry[];\n\t#selectedDefaultRoleHandler: Function | null;\n\t#selectedRoleCode: ?string;\n\t#universalRole: Role;\n\t#title: ?string;\n\t#moduleId: string;\n\t#contextId: string;\n\n\tconstructor(options: RolesDialogOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('AI.RolesDialog');\n\n\t\tthis.#validateOptions(options);\n\n\t\tthis.#title = options.title || '';\n\t\tif (options.engine)\n\t\t{\n\t\t\tthis.#engine = options.engine;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#engine = new Engine({});\n\t\t}\n\n\t\tthis.#moduleId = options.moduleId;\n\t\tthis.#contextId = options.contextId;\n\n\t\tthis.#engine.setModuleId(options.moduleId);\n\t\tthis.#engine.setContextId(options.contextId);\n\n\t\tthis.#selectedRoleCode = Type.isString(options.selectedRoleCode) ? options.selectedRoleCode : '';\n\n\t\tthis.#analytic = new RolesDialogAnalytics({\n\t\t\tcSection: `${this.#moduleId}_${this.#contextId}`,\n\t\t});\n\t}\n\n\t#validateOptions(options: RolesDialogOptions)\n\t{\n\t\tif (Type.isStringFilled(options.moduleId) === false)\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: moduleId is required option and must be string');\n\t\t}\n\n\t\tif (Type.isStringFilled(options.contextId) === false)\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: contextId is required option and must be string');\n\t\t}\n\n\t\tif (options.selectedRoleCode !== undefined && Type.isString(options.selectedRoleCode) === false)\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: selectedRoleCode must be string');\n\t\t}\n\n\t\tif (options.title && Type.isString(options.title) === false)\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: title must be string');\n\t\t}\n\n\t\tif (options.engine && !(options.engine instanceof Engine))\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: engine option must be instance of Engine');\n\t\t}\n\t}\n\n\tsetSelectedRoleCode(code: string): void\n\t{\n\t\tthis.#selectedRoleCode = code;\n\n\t\tif (this.#entityCatalog)\n\t\t{\n\t\t\tthis.#entityCatalog.setGroups(this.#getItemGroupsFromIndustries());\n\t\t\tthis.#entityCatalog.setItems(this.#getItemsData());\n\t\t}\n\t}\n\n\tasync show(): Promise<void>\n\t{\n\t\tif (this.#entityCatalog)\n\t\t{\n\t\t\tthis.#entityCatalog.show();\n\n\t\t\tthis.#analytic.sendOpenLabel(true, this.#selectedRoleCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.#showAfterInit();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#entityCatalog?.close();\n\t}\n\n\tasync #showAfterInit(): Promise<void>\n\t{\n\t\tconst loader = new RolesDialogLoaderPopup();\n\t\tlet isShowLoader = true;\n\n\t\tsetTimeout(() => {\n\t\t\tif (isShowLoader)\n\t\t\t{\n\t\t\t\tloader.show();\n\t\t\t}\n\t\t}, 300);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.#init();\n\n\t\t\tthis.#analytic.sendOpenLabel(true, this.#selectedRoleCode);\n\n\t\t\tthis.#entityCatalog.show();\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tshowRolesDialogErrorPopup();\n\t\t\tthis.#analytic.sendOpenLabel(false, this.#selectedRoleCode);\n\t\t\tconsole.error(e);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tisShowLoader = false;\n\t\t\tloader.hide();\n\t\t}\n\t}\n\n\t#subscribeEvents(): void\n\t{\n\t\tthis.#selectedDefaultRoleHandler = this.#selectDefaultRole.bind(this);\n\n\t\tEventEmitter.subscribe(\n\t\t\tdocument,\n\t\t\tRolesDialogGroupListFooterEvents.CHOOSE_STANDARD_ROLE,\n\t\t\tthis.#selectedDefaultRoleHandler,\n\t\t);\n\t}\n\n\t#unsubscribeEvents(): void\n\t{\n\t\tEventEmitter.unsubscribe(\n\t\t\tdocument,\n\t\t\tRolesDialogGroupListFooterEvents.CHOOSE_STANDARD_ROLE,\n\t\t\tthis.#selectedDefaultRoleHandler,\n\t\t);\n\t}\n\n\t#selectRole(role: Role): void\n\t{\n\t\tconst event: BaseEvent<SelectRoleEventDataType> = new BaseEvent({\n\t\t\tdata: {\n\t\t\t\trole,\n\t\t\t},\n\t\t});\n\n\t\tthis.setSelectedRoleCode(role.code);\n\t\tthis.#analytic.sendSelectLabel(this.#selectedRoleCode);\n\n\t\tthis.emit(RolesDialogEvents.SELECT_ROLE, event);\n\t}\n\n\t#selectDefaultRole(): void\n\t{\n\t\tthis.setSelectedRoleCode(this.#defaultRoleCode);\n\n\t\tconst event: BaseEvent<SelectDefaultRoleEventDataType> = new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tcode: this.#defaultRoleCode,\n\t\t\t},\n\t\t});\n\n\t\tthis.emit(RolesDialogEvents.SELECT_DEFAULT_ROLE, event);\n\n\t\tthis.#entityCatalog.close();\n\t}\n\n\tasync #init(): Promise<void>\n\t{\n\t\tawait this.#loadData();\n\n\t\tawait this.#initEntityCatalog();\n\t}\n\n\tasync #initEntityCatalog(): void\n\t{\n\t\tconst { EntityCatalog, States } = await Runtime.loadExtension('ui.entity-catalog');\n\n\t\tthis.#entityCatalog = new EntityCatalog({\n\t\t\ttitle: this.#title,\n\t\t\tshowSearch: true,\n\t\t\tcustomComponents: {\n\t\t\t\tRolesDialogContentHeader: getRolesDialogContentHeader(States, this.#analytic),\n\t\t\t\tRolesDialogRoleItem: getRolesDialogRoleItemWithStates(States),\n\t\t\t\tRolesDialogGroupListHeader,\n\t\t\t\tRolesDialogGroupItem,\n\t\t\t\tRolesDialogGroupListFooter,\n\t\t\t\tRolesDialogSearchStub,\n\t\t\t},\n\t\t\tpopupOptions: {\n\t\t\t\tclassName: 'ai_roles-dialog_popup ui-entity-catalog__scope',\n\t\t\t\tresizable: false,\n\t\t\t\twidth: 852,\n\t\t\t\theight: 510,\n\t\t\t\tanimation: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tthis.#subscribeEvents();\n\t\t\t\t\t},\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.emit(RolesDialogEvents.HIDE);\n\t\t\t\t\t\tthis.#unsubscribeEvents();\n\t\t\t\t\t\tthis.#analytic.sendCloseLabel(this.#selectedRoleCode);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tslots: this.#getSlots(EntityCatalog),\n\t\t\tgroups: this.#getItemGroupsFromIndustries(),\n\t\t\titems: this.#getItemsData(),\n\t\t});\n\t}\n\n\t#getSlots(EntityCatalog: EntityCatalogClass): Object {\n\t\tconst slots = {\n\t\t\t[EntityCatalog.SLOT_MAIN_CONTENT_HEADER]: '<RolesDialogContentHeader />',\n\t\t\t[EntityCatalog.SLOT_MAIN_CONTENT_ITEM]: '<RolesDialogRoleItem :itemData=\"itemSlotProps\" />',\n\t\t\t[EntityCatalog.SLOT_GROUP]: '<RolesDialogGroupItem :groupData=\"groupSlotProps\" />',\n\t\t\t[EntityCatalog.SLOT_GROUP_LIST_HEADER]: '<RolesDialogGroupListHeader />',\n\t\t};\n\n\t\tif (EntityCatalog.SLOT_MAIN_CONTENT_SEARCH_STUB)\n\t\t{\n\t\t\tslots[EntityCatalog.SLOT_MAIN_CONTENT_NO_SELECTED_GROUP_STUB] = '<RolesDialogSearchStub />';\n\t\t\tslots[EntityCatalog.SLOT_MAIN_CONTENT_SEARCH_STUB] = '<RolesDialogSearchStub />';\n\t\t}\n\n\t\treturn slots;\n\t}\n\n\t#getInfoItemData(): RolesDialogItemData\n\t{\n\t\treturn {\n\t\t\tid: 'info-item-data',\n\t\t\ttitle: Loc.getMessage('AI_COPILOT_ROLES_HELP_ITEM_TITLE'),\n\t\t\tsubtitle: Loc.getMessage('AI_COPILOT_ROLES_HELP_ITEM_DESCRIPTION'),\n\t\t\tgroupIds: this.#getAllIndustryCodes(),\n\t\t\tcustomData: {\n\t\t\t\tisInfoItem: true,\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\taction: async () => {\n\t\t\t\t\tawait Runtime.loadExtension('ui.feedback.form');\n\t\t\t\t\tconst id = Math.round(Math.random() * 1000);\n\n\t\t\t\t\tBX.UI.Feedback.Form.open({\n\t\t\t\t\t\tid: `ai.roles-dialog.feedback-form_${id}`,\n\t\t\t\t\t\tpresets: {\n\t\t\t\t\t\t\tsender_page: `${this.#moduleId}_${this.#contextId}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tforms: [{\n\t\t\t\t\t\t\tzones: ['es'],\n\t\t\t\t\t\t\tid: 738,\n\t\t\t\t\t\t\tlang: 'es',\n\t\t\t\t\t\t\tsec: '77ui4p',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tzones: ['en'],\n\t\t\t\t\t\t\tid: 740,\n\t\t\t\t\t\t\tlang: 'en',\n\t\t\t\t\t\t\tsec: 'obza3e',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tzones: ['de'],\n\t\t\t\t\t\t\tid: 742,\n\t\t\t\t\t\t\tlang: 'de',\n\t\t\t\t\t\t\tsec: 'vqqxgr',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tzones: ['com.br'],\n\t\t\t\t\t\t\tid: 744,\n\t\t\t\t\t\t\tlang: 'com.br',\n\t\t\t\t\t\t\tsec: 'nz3zig',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tzones: ['ru', 'by', 'kz'],\n\t\t\t\t\t\t\tid: 746,\n\t\t\t\t\t\t\tlang: 'ru',\n\t\t\t\t\t\t\tsec: 'we50kv',\n\t\t\t\t\t\t}],\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.#analytic.sendFeedBackLabel();\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t#getAllIndustryCodes(): string[]\n\t{\n\t\treturn this.#industries.map((industry) => {\n\t\t\treturn industry.code;\n\t\t});\n\t}\n\n\tasync #loadData(): void\n\t{\n\t\tconst result = await this.#engine.getRolesDialogData();\n\n\t\tthis.#universalRole = result.data.universalRole;\n\t\tthis.#defaultRoleCode = this.#universalRole.code;\n\n\t\tthis.#industries = result.data.items.map((roleIndustry) => {\n\t\t\tconst { code, name, isNew } = roleIndustry;\n\n\t\t\treturn {\n\t\t\t\tcode,\n\t\t\t\tname,\n\t\t\t\tisNew,\n\t\t\t};\n\t\t});\n\n\t\tthis.#industries.unshift(this.#getRecentRoleIndustry(), this.#getRecommendedRoleIndustry());\n\n\t\tthis.#roles = result.data.items.reduce((roles: Role[], roleIndustry) => {\n\t\t\tconst industryRoles = roleIndustry.roles;\n\n\t\t\treturn [...roles, ...industryRoles];\n\t\t}, []);\n\n\t\tthis.#recentRoles = result.data.recents;\n\n\t\tthis.#roles = [...this.#roles];\n\n\t\tthis.#selectedRoleCode = this.#selectedRoleCode || null;\n\t}\n\n\t#getRecommendedRoleIndustry(): RoleIndustry\n\t{\n\t\treturn {\n\t\t\tcode: RECOMMENDED_GROUP_CODE,\n\t\t\tname: Loc.getMessage('AI_COPILOT_ROLES_RECOMMENDED_GROUP'),\n\t\t};\n\t}\n\n\t#getRecentRoleIndustry(): RoleIndustry\n\t{\n\t\treturn {\n\t\t\tcode: RECENT_GROUP_CODE,\n\t\t\tname: Loc.getMessage('AI_COPILOT_ROLES_RECENT_GROUP'),\n\t\t};\n\t}\n\n\t#getItemsData(): RolesDialogItemData[]\n\t{\n\t\tlet selectedRole = null;\n\n\t\tconst items: RolesDialogItemData[] = this.#roles.map((role): RolesDialogItemData => {\n\t\t\tconst groupIds = [role.industryCode];\n\n\t\t\tif (role.isRecommended)\n\t\t\t{\n\t\t\t\tgroupIds.push(RECOMMENDED_GROUP_CODE);\n\t\t\t}\n\n\t\t\tif (this.#recentRoles.findIndex((recentRole) => recentRole.code === role.code) > -1)\n\t\t\t{\n\t\t\t\tgroupIds.push(RECENT_GROUP_CODE);\n\t\t\t}\n\n\t\t\tif (role.code === this.#selectedRoleCode)\n\t\t\t{\n\t\t\t\tselectedRole = this.#getItemDataFromRole(role, groupIds);\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.#getItemDataFromRole(role, groupIds);\n\t\t}).filter((role) => role);\n\n\t\tconst itemsSortedByNewness = items.sort((role) => {\n\t\t\treturn role.customData.isNew ? -1 : 1;\n\t\t});\n\n\t\tconst universalRoleItem = this.#getUniversalRoleItemData();\n\n\t\treturn [\n\t\t\tuniversalRoleItem,\n\t\t\tselectedRole,\n\t\t\t...itemsSortedByNewness,\n\t\t\tthis.#getInfoItemData(),\n\t\t].filter((role) => role);\n\t}\n\n\t#getUniversalRoleItemData(): ItemData\n\t{\n\t\tconst role = this.#universalRole;\n\t\tconst groupIds = [...this.#getAllIndustryCodes()];\n\n\t\treturn this.#getItemDataFromRole(role, groupIds);\n\t}\n\n\t#getItemGroupsFromIndustries(): [[RolesDialogGroupData[]]]\n\t{\n\t\tconst selectedGroupIndex = this.#getSelectedGroupIndex();\n\n\t\tconst groups = this.#industries.map((industry, index): RolesDialogGroupData => {\n\t\t\tif (industry.code === RECENT_GROUP_CODE)\n\t\t\t{\n\t\t\t\treturn this.#getRecentItemGroupData(index === selectedGroupIndex);\n\t\t\t}\n\n\t\t\treturn this.#getItemGroupDataFromIndustry(industry, index === selectedGroupIndex);\n\t\t});\n\n\t\treturn [\n\t\t\t[\n\t\t\t\t...groups,\n\t\t\t],\n\t\t];\n\t}\n\n\t#getItemGroupDataFromIndustry(industry: RoleIndustry, isSelected: boolean = false): RolesDialogGroupData\n\t{\n\t\treturn {\n\t\t\tid: industry.code,\n\t\t\tname: industry.name,\n\t\t\tselected: isSelected,\n\t\t\tcustomData: {\n\t\t\t\tisNew: industry.isNew,\n\t\t\t},\n\t\t};\n\t}\n\n\t#getRecentItemGroupData(isSelected: boolean = false): RolesDialogGroupData\n\t{\n\t\treturn {\n\t\t\t...this.#getItemGroupDataFromIndustry(this.#getRecentRoleIndustry(), isSelected),\n\t\t\tcompare: (item1, item2) => {\n\t\t\t\treturn this.#compareRecentItems(item1, item2);\n\t\t\t},\n\t\t};\n\t}\n\n\t#compareRecentItems(item1: RolesDialogItemData, item2: RolesDialogItemData): number\n\t{\n\t\tconst item1Index = this.#recentRoles.findIndex((rr) => item1.id === rr.code) + 1;\n\t\tconst item2Index = this.#recentRoles.findIndex((rr) => item2.id === rr.code) + 1;\n\n\t\tif (item1.id === this.#getInfoItemData().id)\n\t\t{\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn item1Index - item2Index;\n\t}\n\n\t#getItemDataFromRole(role: Role, groupIds: string[] = []): RolesDialogItemData\n\t{\n\t\treturn {\n\t\t\tgroupIds,\n\t\t\tid: role.code,\n\t\t\tname: role.name,\n\t\t\ttitle: role.name,\n\t\t\tsubtitle: role.description,\n\t\t\tdescription: role.description,\n\t\t\tbutton: {\n\t\t\t\ttext: Loc.getMessage('AI_COPILOT_ROLES_USE_ROLE_BTN'),\n\t\t\t\taction: () => {\n\t\t\t\t\tthis.#selectRole(role);\n\t\t\t\t\tthis.#entityCatalog.close();\n\t\t\t\t},\n\t\t\t},\n\t\t\tcustomData: {\n\t\t\t\tselected: role.code === this.#selectedRoleCode,\n\t\t\t\tavatar: role.avatar.medium,\n\t\t\t\tisNew: role.isNew,\n\t\t\t},\n\t\t};\n\t}\n\n\t#getSelectedGroupIndex(): number\n\t{\n\t\tconst selectedGroupIndex = this.#industries.findIndex((industry) => {\n\t\t\treturn this.#isSelectedIndustry(industry);\n\t\t});\n\n\t\treturn selectedGroupIndex > -1 ? selectedGroupIndex : 0;\n\t}\n\n\t#isSelectedIndustry(industry: RoleIndustry): boolean\n\t{\n\t\tconst items = this.#getItemsData();\n\n\t\tconst selectedItem: RolesDialogItemData | undefined = items.find((item) => {\n\t\t\treturn item.id === this.#selectedRoleCode;\n\t\t});\n\n\t\treturn selectedItem?.groupIds.includes(industry.code) || false;\n\t}\n}\n"],"names":["RolesDialogLoaderPopup","show","hide","close","Popup","content","resizable","width","height","padding","contentPadding","borderRadius","className","animation","cacheable","Tag","render","showRolesDialogErrorPopup","popup","renderPopupContent","autoHide","closeByEsc","closeIcon","closeIconSize","CloseIconSize","LARGE","renderWarningIcon","Loc","getMessage","warningIconColor","warningIcon","Icon","icon","Main","WARNING","size","color","RolesDialogAnalyticsEvent","Object","freeze","OPEN","CLOSE","SAVE","SEARCH","FEEDBACK","SELECT","RolesDialogAnalyticsEventStatus","SUCCESS","ERROR","RolesDialogAnalytics","constructor","options","cSection","sendOpenLabel","isSuccess","role","status","extraParams","p1","name","value","event","sendCloseLabel","sendSelectLabel","sendSearchLabel","search","sendFeedBackLabel","params","sendData","Runtime","loadExtension","sendDataOptions","e","console","error","tool","category","c_section","formattedExtraParams","entries","forEach","paramKey","param","Text","toCamelCase","split","map","stringPart","Number","isNaN","parseInt","filter","join","RolesDialogGroupListFooterEvents","CHOOSE_STANDARD_ROLE","RolesDialogGroupListFooter","methods","handleClick","EventEmitter","emit","document","template","RolesDialogHeaderWithHint","components","Hint","props","header","type","String","required","default","hint","RolesDialogGroupListHeader","computed","text","$Bitrix","getRolesDialogContentHeader","States","analytic","sendSearchAnalyticLabel","searchQuery","debouncedSendSearchAnalyticLabel","debounce","mapWritableState","useGlobalState","searching","watch","RolesDialogRoleItemAvatar","BIcon","data","isAvatarLoaded","avatar","avatarAlt","iconSize","iconColor","getComputedStyle","body","getPropertyValue","fallbackIcon","COPILOT_AI","onImageLoad","onImageLoadError","RolesDialogLabelNew","inverted","Boolean","labelHTML","labelColor","LabelColor","COPILOT_LIGHT_REVERSE","COPILOT_LIGHT","label","Label","LabelSize","SM","fill","outerHTML","getRolesDialogRoleItemWithStates","item","itemData","subtitle","replaceAll","RegExp","match","title","isSelected","customData","selected","isNew","isInfoItem","selectedIconData","CHECK","getUiTokenValue","infoIcon","INFO","selectRole","Type","isFunction","button","action","token","RolesDialogGroupItem","group","groupData","undefined","groupItemClassname","chevronRightIconName","Actions","CHEVRON_RIGHT","RolesDialogSearchStub","RolesDialogEvents","HIDE","SELECT_ROLE","SELECT_DEFAULT_ROLE","RECOMMENDED_GROUP_CODE","RECENT_GROUP_CODE","RolesDialog","setEventNamespace","engine","Engine","moduleId","contextId","setModuleId","setContextId","isString","selectedRoleCode","setSelectedRoleCode","code","setGroups","setItems","isStringFilled","BaseError","loader","isShowLoader","setTimeout","bind","subscribe","unsubscribe","BaseEvent","EntityCatalog","showSearch","customComponents","RolesDialogContentHeader","RolesDialogRoleItem","popupOptions","events","onPopupShow","onPopupClose","slots","groups","items","SLOT_MAIN_CONTENT_HEADER","SLOT_MAIN_CONTENT_ITEM","SLOT_GROUP","SLOT_GROUP_LIST_HEADER","SLOT_MAIN_CONTENT_SEARCH_STUB","SLOT_MAIN_CONTENT_NO_SELECTED_GROUP_STUB","id","groupIds","Math","round","random","BX","UI","Feedback","Form","open","presets","sender_page","forms","zones","lang","sec","industry","result","getRolesDialogData","universalRole","roleIndustry","unshift","reduce","roles","industryRoles","recents","selectedRole","industryCode","isRecommended","push","findIndex","recentRole","itemsSortedByNewness","sort","universalRoleItem","selectedGroupIndex","index","compare","item1","item2","item1Index","rr","item2Index","description","medium","selectedItem","find","includes"],"mappings":"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"}