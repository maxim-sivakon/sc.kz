
; /* Start:"a:4:{s:4:"full";s:97:"/bitrix/components/bitrix/main.interface.buttons/templates/.default/script.min.js?172873318163299";s:6:"source";s:77:"/bitrix/components/bitrix/main.interface.buttons/templates/.default/script.js";s:3:"min";s:81:"/bitrix/components/bitrix/main.interface.buttons/templates/.default/script.min.js";s:3:"map";s:81:"/bitrix/components/bitrix/main.interface.buttons/templates/.default/script.map.js";}"*/
BX.namespace("BX.Main");if(typeof BX.Main.interfaceButtons==="undefined"){BX.Main.interfaceButtons=function(t,e){this.classItem="main-buttons-item";this.classItemSublink="main-buttons-item-sublink";this.classItemText="main-buttons-item-text";this.classItemCounter="main-buttons-item-counter";this.classItemIcon="main-buttons-item-icon";this.classItemMore="main-buttons-item-more";this.classOnDrag="main-buttons-drag";this.classDropzone="main-buttons-submenu-dropzone";this.classSeparator="main-buttons-submenu-delimiter";this.classHiddenLabel="main-buttons-hidden-label";this.classSubmenuItem="main-buttons-submenu-item";this.classItemDisabled="main-buttons-disabled";this.classItemOver="--over";this.classMenuShown="--menu-shown";this.classItemActive="main-buttons-item-active";this.classSubmenu="main-buttons-submenu";this.classSecret="secret";this.classItemLocked="--locked";this.classExtraItemLink="";this.classExtraItemText="";this.classExtraItemIcon="";this.classExtraItemCounter="";this.submenuIdPrefix="main_buttons_popup_";this.childMenuIdPrefix="main_buttons_popup_child_";this.submenuWindowIdPrefix="menu-popup-";this.classSettingMenuItem="main-buttons-submenu-setting";this.classEditState="main-buttons-edit";this.classEditItemButton="main-buttons-item-edit-button";this.classDragItemButton="main-buttons-item-drag-button";this.classSettingsApplyButton="main-buttons-submenu-settings-apply";this.classSettingsResetButton="main-buttons-submenu-settings-reset";this.classSetHome="main-buttons-set-home";this.classSetHide="main-buttons-set-hide";this.classManage="main-buttons-manage";this.classContainer="main-buttons";this.classSubmenuNoHiddenItem="main-buttons-submenu-item-no-hidden";this.classDefaultSubmenuItem="menu-popup-item";this.classDefaultSubmenuDelimimeter="popup-window-delimiter-section";this.classInner="main-buttons-inner-container";this.listContainer=null;this.dragItem=null;this.overItem=null;this.moreButton=null;this.messages=null;this.licenseParams=null;this.ajaxSettings=null;this.enableItemMouseEnter=true;this.menuShowTimeout=null;this.isMoreMenuShown=false;this.onDragStarted=false;this.isSettingsEnabled=true;this.containerId=e.containerId;this.isEditEnabledState=false;this.theme=BX.Type.isStringFilled(e.theme)?e.theme:"default";this.maxItemLength=BX.Type.isNumber(e.maxItemLength)&&e.maxItemLength>6?e.maxItemLength:20;this.tmp={};this.itemData=new WeakMap;this.handleMoreMenuItemMouseEnter=this.handleMoreMenuItemMouseEnter.bind(this);this.init(t,e);return{addMenuItem:this.addMenuItem.bind(this),deleteMenuItem:this.deleteMenuItem.bind(this),updateMenuItemText:this.updateMenuItemText.bind(this),getItemById:this.getItemById.bind(this),getAllItems:this.getAllItems.bind(this),getHiddenItems:this.getHiddenItems.bind(this),getVisibleItems:this.getVisibleItems.bind(this),getDisabledItems:this.getDisabledItems.bind(this),getMoreButton:this.getMoreButton.bind(this),adjustMoreButtonPosition:this.adjustMoreButtonPosition.bind(this),getItemData:this.getItemData.bind(this),getSubmenu:this.getMoreMenu.bind(this),showSubmenu:this.showMoreMenu.bind(this),closeSubmenu:this.closeMoreMenu.bind(this),refreshSubmenu:this.refreshMoreMenu.bind(this),getMoreMenu:this.getMoreMenu.bind(this),showMoreMenu:this.showMoreMenu.bind(this),closeMoreMenu:this.closeMoreMenu.bind(this),refreshMoreMenu:this.refreshMoreMenu.bind(this),getCurrentSettings:this.getCurrentSettings.bind(this),saveSettings:this.saveSettings.bind(this),updateCounter:this.updateCounter.bind(this),getActive:this.getActive.bind(this),isDisabled:this.isDisabled.bind(this),isVisibleItem:this.isVisibleItem.bind(this),isEditEnabled:this.isEditEnabled.bind(this),isActiveInMoreMenu:this.isActiveInMoreMenu.bind(this),isSettingsEnabled:this.isSettingsEnabled,classes:{item:this.classItem,itemText:this.classItemText,itemCounter:this.classItemCounter,itemIcon:this.classItemIcon,itemDisabled:this.classItemDisabled,itemOver:this.classItemOver,itemActive:this.classItemActive,itemLocked:this.classItemLocked,menuShown:this.classMenuShown,submenu:this.classSubmenu,submenuItem:this.classSubmenuItem,containerOnDrag:this.classOnDrag,classSettingMenuItem:this.classSettingMenuItem},itemsContainer:this.listContainer,itemsContainerId:this.listContainer.id}};BX.Main.interfaceButtons.prototype={init:function(t,e){this.listContainer=BX(this.getId());if(!BX.Type.isPlainObject(e)){throw"BX.MainButtons: params is not Object"}if(!("containerId"in e)||!BX.Type.isStringFilled(e.containerId)){throw"BX.MainButtons: containerId not set in params"}if(!BX.Type.isDomNode(this.listContainer)){throw"BX.MainButtons: #"+e.containerId+" is not dom node"}if("classes"in e&&BX.Type.isPlainObject(e.classes)){this.setCustomClasses(e.classes)}if("messages"in e&&BX.Type.isPlainObject(e.messages)){this.setMessages(e.messages)}if("licenseWindow"in e&&BX.Type.isPlainObject(e.licenseWindow)){this.setLicenseWindowParams(e.licenseWindow)}if("disableSettings"in e&&e.disableSettings==="true"){this.isSettingsEnabled=false;this.visibleControlMoreButton()}this.initSaving(e.ajaxSettings);this.moreButton=this.getMoreButton();this.listChildItems={};this.initItems();this.adjustMoreButtonPosition();this.bindEventsOnMoreButton();this.bindOnResizeFrame();BX.Event.bind(this.getContainer(),"click",BX.delegate(this._onDocumentClick,this));BX.addCustomEvent("onPullEvent-main",BX.delegate(this._onPush,this));this.updateMoreButtonCounter();if(this.isActiveInMoreMenu()){this.activateItem(this.moreButton)}const s=this.getHomeItem();if(s){const{url:t}=s;this.lastHomeLink=t}const i=Array.from(this.container.querySelectorAll(".main-buttons-item-child-button"));i.forEach((function(t){const e=t.closest(".main-buttons-item-child");if(e.dataset.isOpened){this.realChildButton=e;const t=e.closest(".main-buttons-item-child-button-cloned");if(t){this.clonedChildButton=t}}BX.Event.bind(t,"click",this.onShowChildButtonClick.bind(this))}),this)},calculateChildListWidth:function(){if(this.realChildButton){const t=this.realChildButton.querySelectorAll(".main-buttons-item-child-list-inner .main-buttons-item");const e=10;return Array.from(t).reduce((function(t,e){const s=BX.Text.toNumber(BX.Dom.style(e,"width"));const i=BX.Text.toNumber(BX.Dom.style(e,"margin-left"));const n=BX.Text.toNumber(BX.Dom.style(e,"margin-right"));return t+s+i+n}),e)}return 0},onShowChildButtonClick:function(t){t.preventDefault();if(!this.realChildButton){this.realChildButton=t.currentTarget.closest(".main-buttons-item-child")}const e=this.realChildButton.querySelector(".main-buttons-item-child-list");this.enableItemMouseEnter=false;setTimeout((()=>{this.enableItemMouseEnter=true}),200);const s=BX.Dom.attr(this.realChildButton,"data-child-items");const i=BX.Dom.attr(this.realChildButton,"data-is-opened");let n={};if(i){BX.Dom.attr(this.realChildButton,"data-is-opened",null);s.forEach((function(t){const e=this.getContainer().querySelector('[data-id="'+t+'"]');BX.Dom.style(e,"display",null);if(t.hasOwnProperty("PARENT_ITEM_ID")){n[t["PARENT_ITEM_ID"]]="N"}}),this);if(this.clonedChildButton){BX.Dom.remove(this.clonedChildButton)}BX.Dom.style(e,{overflow:null,"max-width":null});n=JSON.stringify(n);this.saveOptions("expanded_lists",n)}else{BX.Dom.attr(this.realChildButton,"data-is-opened",true);BX.Dom.style(e,"max-width",this.calculateChildListWidth()+"px");this.cloneChildButton(this.realChildButton);s.forEach((t=>{const e=this.getContainer().querySelector('[data-id="'+t+'"]');BX.Dom.insertBefore(e,this.realChildButton);BX.Dom.style(e,"display","inline-block");if(t.hasOwnProperty("PARENT_ITEM_ID")){n[t["PARENT_ITEM_ID"]]="Y"}}));setTimeout((()=>{BX.Dom.style(e,"overflow","unset")}),200);n=JSON.stringify(n);this.saveOptions("expanded_lists",n)}setTimeout((()=>{this._onResizeHandler()}),200)},cloneChildButton:function(t){this.clonedChildButton=BX.Runtime.clone(t);const e=this.clonedChildButton.querySelector(".main-buttons-item-child-list");if(e){BX.Dom.remove(e)}BX.Dom.addClass(this.clonedChildButton,"main-buttons-item-child-button-cloned");BX.Dom.style(this.clonedChildButton,"transition","none");BX.Dom.insertBefore(this.clonedChildButton,t);BX.Event.bind(this.clonedChildButton,"click",this.onShowChildButtonClick.bind(this));setTimeout((()=>{BX.Dom.style(this.clonedChildButton,"transition",null)}),0)},_onDocumentClick:function(t){if(this.isDragButton(t.target)){t.preventDefault();t.stopPropagation()}let e=this.getItem(t);if(BX.Type.isDomNode(e)){if(this.isSettings(e)){this.enableEdit();return false}if(this.isApplySettingsButton(e)){t.preventDefault();t.stopPropagation();this.disableEdit();return false}if(this.isResetSettingsButton(e)){this.resetSettings();return false}if(this.isEditButton(t.target)){this.handleEditButtonClick(t);return false}if(this.isSetHide(e)){const t=this.getVisibleItems();const e=BX.Type.isArray(t)?t.length:null;const s=this.editItemData.ID.replace(this.listContainer.id+"_","");let i=this.getItemById(s);const n=this.getItemAlias(i);i=this.isVisibleItem(i)?i:n;if(this.isDisabled(n)){this.enableItem(n)}else if(!this.isDisabled(n)&&e>2){this.disableItem(n)}if(e===1){BX.onCustomEvent(window,"BX.Main.InterfaceButtons:onHideLastVisibleItem",[i,this])}this.refreshMoreMenu();this.saveSettings();this.adjustMoreButtonPosition();if(this.isEditEnabled()){this.enableEdit()}this.editMenu.popupWindow.close();return false}if(this.isSetHome(e)){const t=this.editItemData.ID.replace(this.listContainer.id+"_","");const e=this.getItemById(t);const s=this.getItemAlias(e);if(this.isDisabled(s)){this.enableItem(s)}this.listContainer.insertBefore(e,BX.firstChild(this.listContainer));this.adjustMoreButtonPosition();this.refreshMoreMenu();this.saveSettings();if(this.isEditEnabled()){this.enableEdit()}this.editMenu.popupWindow.close();return false}if(!this.isDragButton(t.target)&&!this.isEditButton(t.target)){const s=this.getItemData(e);let i=s["ON_CLICK"];if(this.isSublink(t.target)){i=BX.Type.isPlainObject(s["SUB_LINK"])?s["SUB_LINK"]["ON_CLICK"]:""}if(BX.Type.isStringFilled(i)){t.preventDefault();this.execScript(i,t)}}}if(this.isEditEnabled()&&this.getMoreMenu()){this.getMoreMenu().getPopupWindow().setAutoHide(false)}},isActiveInMoreMenu:function(){const t=this.getHiddenItems();const e=this.getDisabledItems();const s=t.concat(e);return s.some((function(t){const e=this.getItemData(t);return e["IS_ACTIVE"]===true}),this)},_onPush:function(t,e){if(t==="user_counter"&&e&&BX.message("SITE_ID")in e){const t=e[BX.message("SITE_ID")];for(const e in t){if(t.hasOwnProperty(e)){this.updateCounter(e,t[e])}}}},getActive:function(){let t=this.getAllItemsData();let e=null;let s=null;while(BX.Type.isArrayFilled(t)){const i=t.shift();if(i["IS_ACTIVE"]===true){if(s===null){s=i}e=i;t=BX.Type.isArrayFilled(i["ITEMS"])?[...i["ITEMS"]]:null}}if(e!==null&&s!==null){const t=BX(s.ID);if(BX.Type.isDomNode(t)){e.NODE=t}else{e.NODE=null}}return e},isSetHome:function(t){return BX.Dom.hasClass(t,this.classSetHome)},isSetHide:function(t){return BX.Dom.hasClass(t,this.classSetHide)},getSettingsButton:function(){return BX.Buttons.Utils.getByClass(this.getMoreMenuContainer(),this.classSettingMenuItem)},getSettingsApplyButton:function(){return BX.Buttons.Utils.getByClass(this.getMoreMenuContainer(),this.classSettingsApplyButton)},isApplySettingsButton:function(t){return BX.Dom.hasClass(t,this.classSettingsApplyButton)},enableEdit:function(){const t=this.getMoreMenu();if(t){const e=t.getPopupWindow();e.setAutoHide(false);BX.Dom.addClass(e.getPopupContainer(),this.classEditState)}BX.Dom.addClass(this.listContainer,this.classEditState);this.isEditEnabledState=true},disableEdit:function(){const t=this.getMoreMenu();if(t){const e=t.getPopupWindow();e.setAutoHide(true);BX.Dom.removeClass(e.getPopupContainer(),this.classEditState)}BX.Dom.removeClass(this.listContainer,this.classEditState);this.isEditEnabledState=false;this.destroyItemEditMenu()},isEditEnabled:function(){return this.isEditEnabledState},showItemEditMenu:function(t,e){if(BX.Type.isPlainObject(t)&&"ID"in t){const s=[this.listContainer.id,"_edit_item"].join("");let i=BX.Main.MenuManager.getMenuById(s);if(i){BX.Main.MenuManager.destroy(s)}i=this.createItemEditMenu(t,s,e);i.popupWindow.show()}},destroyItemEditMenu:function(){const t=[this.listContainer.id,"_edit_item"].join("");const e=BX.Main.MenuManager.getMenuById(t);if(e){BX.Main.MenuManager.destroy(t)}},getContainer:function(){if(!BX.Type.isDomNode(this.container)){this.container=BX(this.containerId).parentNode.parentNode}return this.container},getItemEditMenu:function(){return BX.Main.MenuManager.getMenuById([this.listContainer.id,"_edit_item"].join(""))},createItemEditMenu:function(t,e,s){const i=[{text:this.message("MIB_SET_HOME"),className:"main-buttons-set-home menu-popup-no-icon"}];const n=t["ID"].replace(this.listContainer.id+"_","");const o=this.getItemById(n);if(this.isDisabled(o)){i.push({text:this.message("MIB_SET_SHOW"),className:"main-buttons-set-hide menu-popup-no-icon"})}else{i.push({text:this.message("MIB_SET_HIDE"),className:"main-buttons-set-hide menu-popup-no-icon"})}if(t["IS_PINNED"]){const e=this.getParentItem(t["ID"]);i.push({text:this.message("MIB_UNPIN_ITEM").replace("#NAME#",e?e["TEXT"]:""),onclick:(e,s)=>{this.handleItemUnpin(t,o);s.getMenuWindow().close()}})}const a=BX.pos(s);const u={menuId:e,anchor:s,menuItems:i,settings:{autoHide:true,offsetTop:0,offsetLeft:a.width/2,zIndex:20,angle:{position:"top",offset:a.width/2}}};const r=BX.Main.MenuManager.create(u.menuId,u.anchor,u.menuItems,u.settings);if(this.isVisibleItem(o)){t.NODE=o}else{t.NODE=this.getItemAlias(o)}this.editItemData=t;if("menuItems"in r&&BX.Type.isArray(r.menuItems)){r.menuItems.forEach((function(t){BX.Event.bind(t.layout.item,"click",BX.delegate(this._onDocumentClick,this))}),this)}BX.onCustomEvent(window,"BX.Main.InterfaceButtons:onBeforeCreateEditMenu",[r,t,this]);this.editMenu=r;return r},prepareMenuItemData:function(t){const e={CLASS:"",CLASS_SUBMENU_ITEM:"",COUNTER:0,COUNTER_ID:t.counterId,DATA_ID:t.dataId,HAS_CHILD:false,HAS_MENU:false,HTML:"",ID:t.id,IS_ACTIVE:false,IS_DISABLED:"false",IS_LOCKED:false,IS_PASSIVE:false,MAX_COUNTER_SIZE:99,NODE:BX.Tag.render`<div id="${t.id}" class="main-buttons-item"></div>`,ON_CLICK:t.onClick,SUB_LINK:false,SUPER_TITLE:false,TEXT:t.text,TITLE:"",URL:t.url};return e},addMenuItem:function(t){const e=this.getCurrentSettings();const s=Object.keys(e);const i=this.prepareMenuItemData(t);const n=this.createRootItem(i);const o=this.getItemById(s[s.length-1]);BX.Dom.insertAfter(n,o);this.initItems()},deleteMenuItem:function(t){this.itemData.delete(t);BX.Dom.remove(t)},updateMenuItemText:function(t,e){if(!t||!e){return}const s=this.getItemData(t);s.TEXT=e;const i=this.getItemById(s.ID);const n="main-buttons-item-text-box";const o=BX.Buttons.Utils.getByClass(i,n);o.innerText=e},getHomeItem:function(){const t=this.getVisibleItems();const e=BX.Type.isArray(t)&&t.length>0?t[0]:null;if(!e){return null}const s=this.getItemData(e);const i=this.normalizeUrl(s["URL"]);if(this.canBeHomed(i,s)){return{itemData:s,url:i,firstVisibleItem:e}}if(BX.Type.isArrayFilled(s["ITEMS"])){for(let t=0;t<s["ITEMS"].length;t++){const i=s["ITEMS"][t];if(i["IS_PINNED"]||i["IS_DISBANDED"]||i["IS_DELIMITER"]){continue}const n=this.normalizeUrl(i["URL"]);if(this.canBeHomed(n,i)){return{itemData:i,url:n,firstVisibleItem:e}}}}return null},normalizeUrl:function(t){if(!BX.Type.isStringFilled(t)){return""}if(t.charAt(0)==="?"){const e=document.createElement("a");e.href=t;t=e.pathname+e.search}return t},canBeHomed:function(t,e){if(!BX.Type.isStringFilled(t)||BX.Type.isStringFilled(e["ON_CLICK"])){return false}if(BX.Reflection.getClass("BX.SidePanel.Instance")){const e=BX.SidePanel.Instance.getUrlRule(t);if(e){return false}}const s=new BX.Event.BaseEvent({data:{itemLink:t,itemData:e}});BX.Event.EventEmitter.emit("BX.Main.InterfaceButtons:onBeforeFirstItemChange",s);return!s.isDefaultPrevented()},isEditButton:function(t){return BX.Dom.hasClass(t,this.classEditItemButton)},isDragButton:function(t){return BX.Dom.hasClass(t,this.classDragItemButton)},isResetSettingsButton:function(t){return BX.Dom.hasClass(t,this.classSettingsResetButton)},getContainerHeight:function(){const t=this.getAllItems().map((function(t){const e=getComputedStyle(t);return BX.height(t)+parseInt(e.marginTop)+parseInt(e.marginBottom)}));return Math.max.apply(Math,t)},setLicenseWindowParams:function(t){this.licenseParams=t||{}},message:function(t){let e;try{e=this.messages[t]}catch(t){e=""}return e},setCustomClasses:function(t){if(!BX.Type.isPlainObject(t)){return}this.classItem=t.item||this.classItem;this.classItemSublink=t.itemSublink||this.classItemSublink;this.classItemText=t.itemText||this.classItemText;this.classItemCounter=t.itemCounter||this.classItemCounter;this.classItemIcon=t.itemIcon||this.classItemIcon;this.classItemMore=t.itemMore||this.classItemMore;this.classItemOver=t.itemOver||this.classItemOver;this.classMenuShown=t.menuShown||this.classMenuShown;this.classItemActive=t.itemActive||this.classItemActive;this.classItemDisabled=t.itemDisabled||this.classItemDisabled;this.classOnDrag=t.onDrag||this.classOnDrag;this.classDropzone=t.dropzone||this.classDropzone;this.classSeparator=t.separator||this.classSeparator;this.classSubmenuItem=t.submenuItem||this.classSubmenuItem;this.classSubmenu=t.submenu||this.classSubmenu;this.classSecret=t.secret||this.classSecret;this.classItemLocked=t.itemLocked||this.classItemLocked;this.classExtraItemLink=t.extraItemLink||this.classExtraItemLink;this.classExtraItemText=t.extraItemText||this.classExtraItemText;this.classExtraItemIcon=t.extraItemIcon||this.classExtraItemIcon;this.classExtraItemCounter=t.extraItemCounter||this.classExtraItemCounter},setMessages:function(t){if(!BX.Type.isPlainObject(t)){return}this.messages=t},makeFullItemId:function(t){if(!BX.Type.isStringFilled(t)){return}return[this.listContainer.id,t.replace("-","_")].join("_")},getItemById:function(t){let e=null;if(BX.Type.isStringFilled(t)){const s=t.startsWith(this.listContainer.id)?t:this.makeFullItemId(t);e=BX.Buttons.Utils.getBySelector(this.listContainer,"#"+s.replaceAll(":","\\:"))}return e},getItemCounterObject:function(t){let e=null;if(BX.Type.isDomNode(t)){e=BX.Buttons.Utils.getByClass(t,this.classItemCounter)}return e},updateCounter:function(t,e){if(t.indexOf("crm")===0&&e<0){return}this.updateItemsByCounterId(this.getAllItemsData(),t,e);this.updateMoreButtonCounter()},updateItemsByCounterId:function(t,e,s,i=[]){for(let n=0;n<t.length;n++){const o=t[n];if(o["COUNTER_ID"]===e){o["COUNTER"]=Number(s);this.setCounterValueById(e,o["COUNTER"]);for(let t=i.length-1;t>=0;t--){const e=i[t];e["COUNTER"]=e["ITEMS"].reduce(((t,e)=>{const s=e["IS_PINNED"]===true;const i=BX.Type.isNumber(e["COUNTER"])&&!s?e["COUNTER"]:0;return t+i}),0);this.setCounterValueById(e["COUNTER_ID"],e["COUNTER"])}}if(o["ITEMS"]){this.updateItemsByCounterId(o["ITEMS"],e,s,[...i,o])}}},recalculateItemsCounters:function(t,e=[]){let s=0;for(let i=0;i<t.length;i++){const n=t[i];if(n["ITEMS"]){n["COUNTER"]=this.recalculateItemsCounters(n["ITEMS"],[...e,n])}const o=n["IS_PINNED"]===true;s+=BX.Type.isNumber(n["COUNTER"])&&!o?n["COUNTER"]:0}for(let t=e.length-1;t>=0;t--){const s=e[t];s["COUNTER"]=s["ITEMS"].reduce(((t,e)=>{const s=e["IS_PINNED"]===true;const i=BX.Type.isNumber(e["COUNTER"])&&!s?e["COUNTER"]:0;return t+i}),0);this.setCounterValueById(s["COUNTER_ID"],s["COUNTER"])}return s},setCounterValueById:function(t,e){if(!BX.Type.isStringFilled(t)){return}const s=e>99?"99+":e>0?e:"";const i=document.querySelectorAll(`[data-mib-counter-id="${t}"]`);Array.from(i).forEach((t=>{t.textContent=s}))},setMoreButtonCounter:function(t){const e=this.getItemCounterObject(this.moreButton);e.textContent=t>99?"99+":t>0?t:""},bindEventsOnMoreButton:function(){BX.Event.bind(this.moreButton,"click",this.handleMoreButtonClick.bind(this));BX.Event.bind(this.moreButton,"mouseenter",this.handleMoreButtonMouseEnter.bind(this));BX.Event.bind(this.moreButton,"mouseleave",this.handleMoreButtonMouseLeave.bind(this))},bindOnResizeFrame:function(){window.frames["maininterfacebuttonstmpframe-"+this.getId()].onresize=BX.throttle(this._onResizeHandler,20,this)},getId:function(){return BX.Buttons.Utils.getByClass(this.getContainer(),this.classInner).id},getAllItems:function(){return BX.Buttons.Utils.getByClass(this.listContainer,this.classItem,true)},getAllItemsData:function(){return this.getAllItems().map((t=>this.getItemData(t)))},getVisibleItems:function(){const t=this.getAllItems();let e=[];if(t&&t.length){e=t.filter((t=>this.isVisibleItem(t)&&!this.isDisabled(t)))}return e},getHiddenItems:function(){const t=this.getAllItems();let e=[];if(t&&t.length){e=t.filter((t=>!this.isVisibleItem(t)&&!this.isDisabled(t)))}return e},getDisabledItems:function(){return this.getAllItems().filter((t=>this.isDisabled(t)))},getMoreButton:function(){const t=this.getContainer().getElementsByClassName(this.classItemMore);return t[0]||null},getLastVisibleItem:function(){const t=this.getVisibleItems();let e=null;if(BX.Type.isArray(t)&&t.length){e=t[t.length-1]}if(!BX.Type.isDomNode(e)){e=null}return e},getLastDisabledItem:function(){const t=this.getDisabledItems();let e=null;if(BX.Type.isArray(t)&&t.length){e=t[t.length-1]}if(!BX.Type.isDomNode(e)){e=null}return e},adjustMoreButtonPosition:function(){this.updateMoreButtonCounter();if(this.getMoreMenu()){this.getMoreMenu().getPopupWindow().adjustPosition()}},getMoreMenuId:function(t){let e="";if(BX.Type.isDomNode(this.listContainer)&&BX.Type.isStringFilled(this.listContainer.id)){e=this.submenuIdPrefix+this.listContainer.id}if(t){e=this.submenuWindowIdPrefix+e}return e},getChildMenuId:function(){let t="";if(BX.Type.isDomNode(this.listContainer)&&BX.Type.isStringFilled(this.listContainer.id)){t=this.childMenuIdPrefix+this.listContainer.id}return t},getMenuItemText:function(t,e=null){const s=BX.Type.isElementNode(t)?this.getItemData(t):t;return BX.Tag.render`
				<span class="main-buttons-menu-popup-item">${[BX.Tag.render`<span class="${this.classItemIcon}"></span>`,this.createItemText(s),this.createItemCounter(s),e&&this.isEditEnabled()?this.createItemPin(s,e):""]}</span>
			`},createRootItem:function(t){let e=this.classItem;e+=BX.Type.isStringFilled(t["CLASS"])?" "+t["CLASS"]:"";if(t["IS_PASSIVE"]){e+=" --passive"}else if(t["IS_ACTIVE"]){if(BX.Type.isStringFilled(this.classItemActive)){e+=" "+this.classItemActive}else{e+=" main-buttons-item-active"}}if(t["HAS_MENU"]){e+=" --has-menu"}if(t["IS_LOCKED"]){e+=" --locked"}const s=BX.Tag.render`
				<div
					id="${t["ID"]}"
					class="${e}"
					data-disabled="${t["IS_DISABLED"]}"
					data-class="${t["CLASS_SUBMENU_ITEM"]}"
					data-id="${t["DATA_ID"]}"
					data-top-menu-id="${this.getId()}"
					title=""
				>${[this.createItemLink(t,true),BX.Type.isPlainObject(t["SUB_LINK"])?this.createItemSubLink(t["SUB_LINK"]):""]}</div>
			`;this.setItemData(s,t);return s},createItemLink:function(t,e=false){t=BX.Type.isPlainObject(t)?t:{};let s;const i=["main-buttons-item-link",this.classExtraItemLink].join(" ").trim();if(BX.Type.isStringFilled(t["URL"])){s=BX.Tag.render`<a class="${i}" href="${BX.Text.encode(t["URL"])}"></a>`}else{s=BX.Tag.render`<span class="${i}"></span>`}BX.Dom.append(this.createItemIcon(t),s);BX.Dom.append(this.createItemText(t,e),s);BX.Dom.append(this.createItemCounter(t),s);return s},createItemSubLink:function(t){t=BX.Type.isPlainObject(t)?t:{};const e=BX.Type.isStringFilled(t["CLASS"])?" "+t["CLASS"]:"";const s=BX.Type.isStringFilled(t["URL"])?BX.Text.encode(t["URL"]):"";return BX.Tag.render`
				<a class="${this.classItemSublink}${e}" href="${s}"></a>
			`},createItemIcon:function(t){const e=[this.classItemIcon,this.classExtraItemIcon].join(" ").trim();return BX.Tag.render`<span class="${e}"></span>`},createItemText:function(t,e=false){t=BX.Type.isPlainObject(t)?t:{};const s=[this.classItemText,this.classExtraItemText].join(" ").trim();let i=BX.Type.isStringFilled(t["TEXT"])?t["TEXT"]:"";if(e&&i.length>this.maxItemLength){i=i.substring(0,this.maxItemLength-3)+"..."}let n="";if(BX.Type.isPlainObject(t["SUPER_TITLE"])){let{TEXT:e,CLASS:s,COLOR:i}=t["SUPER_TITLE"];s=BX.Type.isStringFilled(s)?` ${s}`:"";const o=BX.Type.isStringFilled(i)?` style="color:${i}"`:"";n=BX.Tag.render`
					<span class="main-buttons-item-super-title${s}"${o}>${e}</span>
				`}return BX.Tag.render`
				<span class="${s}">${[BX.Tag.render`<span 
						class="main-buttons-item-drag-button"
						onclick="${this.handleDragButtonClick.bind(this)}" 
						data-slider-ignore-autobinding="true"
					></span>`,n,BX.Tag.render`
						<span class="main-buttons-item-text-title">
							<span class="main-buttons-item-text-box">${BX.Text.encode(i)}<span class="main-buttons-item-menu-arrow"></span></span>
						</span>
					`,BX.Tag.render`<span 
						class="main-buttons-item-edit-button"
						onclick="${this.handleEditButtonClick.bind(this)}" 
						data-slider-ignore-autobinding="true"
					></span>`,BX.Tag.render`<span class="main-buttons-item-text-marker"></span>`]}</span>
			`},createItemCounter:function(t){t=BX.Type.isPlainObject(t)?t:{};const e=[this.classItemCounter,this.classExtraItemCounter].join(" ").trim();let s="";const i=BX.Type.isNumber(t["MAX_COUNTER_SIZE"])?t["MAX_COUNTER_SIZE"]:99;if(BX.Type.isNumber(t["COUNTER"])&&t["COUNTER"]>0){s=t["COUNTER"]>i?`${i}+`:t["COUNTER"]}const n=BX.Type.isStringFilled(t["COUNTER_ID"])?t["COUNTER_ID"]:"";return BX.Tag.render`<span data-mib-counter-id="${n}" class="${e}">${s}</span>`},createItemPin:function(t,e){return BX.Tag.render`
				<span class="main-buttons-item-pin" 
					data-slider-ignore-autobinding="true"
					onclick="${this.handleItemPin.bind(this,t,e)}"
					onmouseenter="${this.handleItemPinEnter.bind(this)}"
					onmouseleave="${this.handleItemPinLeave.bind(this)}"
				></span>
			`},getLockedClass:function(t){let e="";if(BX.Type.isDomNode(t)&&this.isLocked(t)){e=this.classItemLocked}return e},getMoreMenuItems:function(){const t=this.getAllItems();const e=this.getHiddenItems();const s=this.getDisabledItems();const i=[];if(t.length){t.forEach((t=>{if(e.indexOf(t)===-1&&s.indexOf(t)===-1){const e=this.getItemData(t);i.push({id:e["DATA_ID"],html:this.getMenuItemText(t),href:e["URL"],onclick:e["ON_CLICK"],title:t.getAttribute("title"),className:[this.classSubmenuItem,this.getIconClass(t),this.classSecret,this.getAliasLink(t),this.getLockedClass(t)].join(" "),items:this.getMoreMenuSubItems(t),events:{onMouseEnter:this.handleMoreMenuItemMouseEnter}})}}))}if(e.length){e.forEach((t=>{const e=this.getItemData(t);const s=[this.classSubmenuItem,this.getIconClass(t),this.getAliasLink(t),this.getLockedClass(t)];if(e["IS_ACTIVE"]===true){s.push(this.classItemActive)}i.push({id:e["DATA_ID"],html:this.getMenuItemText(t),href:e["URL"],onclick:e["ON_CLICK"],title:t.getAttribute("title"),className:s.join(" "),items:this.getMoreMenuSubItems(t),events:{onMouseEnter:this.handleMoreMenuItemMouseEnter}})}))}if(this.isSettingsEnabled){i.push({delimiter:true,html:"<span>"+this.message("MIB_MANAGE")+"</span>",className:[this.classSeparator,this.classSubmenuItem,this.classManage].join(" ")});i.push({html:this.message("MIB_SETTING_MENU_ITEM"),className:[this.classSettingMenuItem,this.classSubmenuItem].join(" ")});const t=["ui-btn",this.theme==="default"?"ui-btn-sm":"ui-btn-xs","ui-btn-success-light","ui-btn-no-caps","ui-btn-round","ui-btn-icon-main-buttons-apply"];i.push({html:`\n\t\t\t\t\t<span class="${t.join(" ")}">\n\t\t\t\t\t\t<span class="ui-btn-text">${this.message("MIB_APPLY_SETTING_MENU_ITEM")}</span>\n\t\t\t\t\t</span>`,className:[this.classSettingsApplyButton,this.classSubmenuItem].join(" ")});i.push({html:this.message("MIB_RESET_SETTINGS"),className:[this.classSettingsResetButton,this.classSubmenuItem].join(" ")});i.push({delimiter:true,html:"<span>"+this.message("MIB_HIDDEN")+"</span>",className:[this.classSeparator,this.classSubmenuItem,this.classHiddenLabel].join(" ")});if(!s.length){i.push({html:"<span>"+this.message("MIB_NO_HIDDEN")+"</span>",className:[this.classSubmenuItem,this.classSubmenuNoHiddenItem].join(" ")})}if(s.length){s.forEach((t=>{const e=this.getItemData(t);const s=[this.classSubmenuItem,this.classItemDisabled,this.getIconClass(t),this.getAliasLink(t),this.getLockedClass(t)];if(e["IS_ACTIVE"]===true){s.push(this.classItemActive)}i.push({id:e["DATA_ID"],html:this.getMenuItemText(t),href:e["URL"],onclick:e["ON_CLICK"],title:t.getAttribute("title"),className:s.join(" "),items:this.getMoreMenuSubItems(t),events:{onMouseEnter:this.handleMoreMenuItemMouseEnter}})}))}}return i},getMenuItems:function(t){return this.createMenuItems(this.getItemData(t),t)},getMoreMenuSubItems:function(t){return this.createMenuItems(this.getItemData(t),null)},createMenuItems:function(t,e=null){if(!BX.Type.isArrayFilled(t["ITEMS"])){return[]}const s=t["ITEMS"];const i=[];for(let t=0;t<s.length;t++){const n=s[t];if(n["IS_PINNED"]||n["IS_DISBANDED"]){continue}const o=n["IS_DELIMITER"]===true;if(o){const t=i.length===0;const e=i[i.length-1];if(t||e&&e["delimiter"]===true){continue}}const a=["menu-popup-no-icon","main-buttons-menu-item"];if(n["IS_ACTIVE"]===true){a.push("main-buttons-menu-item-active")}const u=BX.Text.toBoolean(n["IS_LOCKED"]);if(u){a.push(this.classItemLocked)}if(this.isEditEnabled()){a.push(this.classEditState)}let r;if(o){r={delimiter:true,className:a.join(" "),text:n["TEXT"]}}else{r={html:this.getMenuItemText(n,e),href:n["URL"],onclick:n["ON_CLICK"],title:n["TITLE"],className:a.join(" ")}}const l=n.hasOwnProperty("AJAX_OPTIONS");if(l){r.cacheable=true;r.events=this._getEvents(n["AJAX_OPTIONS"]);r.items=[{id:"loading",text:this.message("MIB_MAIN_BUTTONS_LOADING")}]}else if(BX.Type.isArrayFilled(n["ITEMS"])&&!this.isEditEnabled()){const t=this.createMenuItems(n,e);if(t.length){r.items=t}}i.push(r)}if(i.length&&i[i.length-1]["delimiter"]===true){i.pop()}return i},_setAjaxMode:function(t){for(let e in t){if(!t.hasOwnProperty(e)){continue}if(t[e].hasOwnProperty("ajaxOptions")){t[e].cacheable=true;t[e].events=this._getEvents(t[e]["ajaxOptions"]);t[e].items=[{id:"loading",text:this.message("MIB_MAIN_BUTTONS_LOADING")}]}}},_getEvents:function(t){return{onSubMenuShow:()=>{if(this.subMenuLoaded){return}const e=this.getSubMenu();e.removeMenuItem("loading");const s=e.getMenuItem("loading");this.getSubItems(t).then((t=>{this._setAjaxMode(t);this.subMenuLoaded=true;this.addSubMenu(t);this.showSubMenu()})).catch((t=>{if(s){s.getLayout().text.innerText=t}}))}}},getSubItems:function(t){return new Promise((function(e,s){if(this.progress){s(this.message("MIB_MAIN_BUTTONS_LOADING"));return}if(t.mode==="component"){this.progress=true;BX.ajax.runComponentAction(t.component,t.action,{mode:t.componentMode,signedParameters:t.signedParameters?t.signedParameters:{},data:t.data}).then((t=>{this.progress=false;e(t.data)}))}else{this.progress=true;BX.ajax.runAction(t.action,{data:t.data}).then((t=>{this.progress=false;e(t.data)}))}}))},getMoreMenuArgs:function(){const t=this.getMoreMenuId();const e=this.moreButton;const s=this.getMoreMenuItems();let i;const n=800;if(this.theme==="default"){const t=350;const s=25;i={autoHide:false,compatibleMode:false,offsetLeft:-s,offsetTop:4,cacheable:false,className:"main-buttons-menu-popup main-buttons-more-menu-popup",minWidth:240,maxWidth:t,maxHeight:n,subMenuOptions:{className:"main-buttons-menu-popup main-buttons-more-menu-popup --sub-menu",minWidth:150,maxWidth:t,events:{onFirstShow:this.handleMoreMenuFirstShow.bind(this)}},bindOptions:{position:"bottom",forceTop:true},events:{onClose:this.handleMoreMenuClose.bind(this),onDestroy:this.handleMoreMenuClose.bind(this),onFirstShow:this.handleMoreMenuFirstShow.bind(this),onShow:this.handleMoreMenuShow.bind(this),onBeforeAdjustPosition:this.handleAdjustPosition.bind(this,e)}}}else{const t=this.moreButton.querySelector(".main-buttons-item-text-title");const e=t.offsetWidth;const s=250;const o=e/2-s/2+BX.Main.Popup.getOption("angleLeftOffset");const a=BX.Main.Popup.getOption("angleLeftOffset")-BX.Main.Popup.getOption("angleMinTop");const u=s/2-a;i={autoHide:false,compatibleMode:false,offsetTop:4,offsetLeft:o,minWidth:s,maxWidth:s,maxHeight:n,angle:{position:"top",offset:u},className:"main-buttons-default-menu-popup main-buttons-more-menu-popup",subMenuOptions:{className:"main-buttons-default-menu-popup main-buttons-more-menu-popup --sub-menu",minWidth:null,events:{onFirstShow:this.handleMoreMenuFirstShow.bind(this)}},cacheable:false,bindOptions:{position:"bottom",forceTop:true},events:{onClose:this.handleMoreMenuClose.bind(this),onDestroy:this.handleMoreMenuClose.bind(this),onFirstShow:this.handleMoreMenuFirstShow.bind(this),onShow:this.handleMoreMenuShow.bind(this)}}}if(this.isEditEnabled()){i.className+=" "+this.classEditState}return[t,e,s,i]},getChildMenuArgs:function(t){const e=800;if(this.theme==="default"){const s=25;const i=350;return{autoHide:false,compatibleMode:false,offsetLeft:-s,offsetTop:4,cacheable:false,className:"main-buttons-menu-popup",maxWidth:i,minWidth:t.offsetWidth+s*2+30,maxHeight:e,subMenuOptions:{className:"main-buttons-menu-popup --sub-menu",minWidth:null,events:{onFirstShow:this._onChildMenuFirstShow.bind(this)}},bindOptions:{position:"bottom",forceTop:true},events:{onFirstShow:this._onChildMenuFirstShow.bind(this),onShow:this._onChildMenuShow.bind(this,t),onClose:this._onChildMenuClose.bind(this,t),onDestroy:this._onChildMenuClose.bind(this,t),onBeforeAdjustPosition:this.handleAdjustPosition.bind(this,t)}}}else{const s=250;return{autoHide:false,compatibleMode:false,offsetTop:4,cacheable:false,className:"main-buttons-default-menu-popup",minWidth:Math.min(t.offsetWidth+25*2+30,s),maxWidth:s,maxHeight:e,bindOptions:{position:"bottom",forceTop:true},subMenuOptions:{className:"main-buttons-default-menu-popup --sub-menu",minWidth:null,events:{onFirstShow:this._onChildMenuFirstShow.bind(this)}},events:{onFirstShow:this._onChildMenuFirstShow.bind(this),onShow:this._onChildMenuShow.bind(this,t),onClose:this._onChildMenuClose.bind(this,t),onDestroy:this._onChildMenuClose.bind(this,t)}}}},centerPopupArrow(t,e){const s=e.offsetWidth;const i=t.getPopupContainer().offsetWidth;const n=s/2-i/2;const o=BX.Main.Popup.getOption("angleLeftOffset")-BX.Main.Popup.getOption("angleMinTop");t.setAngle({offset:i/2-o});t.setOffset({offsetLeft:n+BX.Main.Popup.getOption("angleLeftOffset")})},visibleControlMoreButton:function(){const t=this.getHiddenItems();if(!t.length){this.getMoreButton().style.display="none"}else{this.getMoreButton().style.display=""}},createMoreMenu:function(){const t=BX.Main.MenuManager.create(...this.getMoreMenuArgs());if(this.isSettingsEnabled){this.dragAndDropInitInSubmenu()}t.getMenuItems().forEach((function(t){const e=t.getLayout().item;BX.Event.bind(e,"click",BX.delegate(this._onDocumentClick,this))}),this);return t},createChildMenu:function(t){const e=this.getMenuItems(t);if(e.length){const s=BX.Main.MenuManager.create(this.getChildMenuId(),t,e,this.getChildMenuArgs(t));if(!this.isEditEnabled()&&this.isSettingsEnabled){const e=()=>{this.showMoreMenu();this.enableEdit();this.destroyChildMenu();this.showChildMenu(t)};s.getMenuItems().forEach((t=>{const s=t.getLayout().item;s.draggable=true;BX.Event.bind(s,"dragstart",e)}))}return s}return null},showMoreMenu:function(){clearTimeout(this.submenuLeaveTimeout);if(!this.isEditEnabled()){this.closeChildMenu()}let t=this.getMoreMenu();if(t!==null){t.getPopupWindow().show()}else{this.destroyMoreMenu();t=this.createMoreMenu();t.getPopupWindow().show()}this.setMoreMenuShown(true);this.activateItem(this.moreButton);if(this.isEditEnabled()){t.getPopupWindow().setAutoHide(false)}},showChildMenu:function(t){clearTimeout(this.childMenuLeaveTimeout);if(!this.isEditEnabled()){this.closeMoreMenu()}if(!this.isVisibleItem(t)){return}const e=BX.Main.MenuManager.getMenuById(this.getChildMenuId());if(e&&e.bindElement===t){e.getPopupWindow().show();this.destroyItemEditMenu()}else{this.destroyChildMenu(t);const e=this.createChildMenu(t);if(e){e.getPopupWindow().show();this.destroyItemEditMenu()}}},closeMoreMenu:function(){const t=this.getMoreMenu();if(t===null){return}t.getPopupWindow().close();if(!this.isActiveInMoreMenu()){this.deactivateItem(this.moreButton)}this.setMoreMenuShown(false)},closeChildMenu:function(){const t=this.getChildMenu();if(t===null){return}this.closePinHint();t.close()},getMoreMenu:function(){return BX.Main.MenuManager.getMenuById(this.getMoreMenuId())},getChildMenu:function(){return BX.Main.MenuManager.getMenuById(this.getChildMenuId())},destroyMoreMenu:function(){BX.Main.MenuManager.destroy(this.getMoreMenuId())},destroyChildMenu:function(){BX.Main.MenuManager.destroy(this.getChildMenuId())},refreshMoreMenu:function(){const t=this.getMoreMenu();if(t===null){return}const e=this.getMoreMenuArgs();if(BX.Type.isArray(e)){this.destroyMoreMenu();this.createMoreMenu();this.showMoreMenu()}},setMoreMenuShown:function(t){this.isSubmenuShown=false;if(BX.type.isBoolean(t)){this.isSubmenuShown=t}if(this.isSubmenuShown){BX.Dom.addClass(this.moreButton,this.classMenuShown)}else{BX.Dom.removeClass(this.moreButton,this.classMenuShown)}},activateItem:function(t){if(!BX.Type.isDomNode(t)){return}if(!BX.Dom.hasClass(t,this.classItemActive)){BX.Dom.addClass(t,this.classItemActive)}},deactivateItem:function(t){if(!BX.Type.isDomNode(t)){return}if(BX.Dom.hasClass(t,this.classItemActive)){BX.Dom.removeClass(t,this.classItemActive)}},getCurrentSettings:function(){const t={};this.getAllItems().forEach(((e,s)=>{t[e.id]={sort:s,isDisabled:this.isDisabled(e),isPinned:this.isPinned(e)}}));return t},initSaving:function(t){this.sendOptions=this.sendOptions.bind(this);this.optionsToSave=[];this.debouncedSendOptions=BX.debounce(this.sendOptions,5e3);if(BX.Type.isPlainObject(t)){this.ajaxSettings={componentName:t.componentName,signedParams:t.signedParams}}},sendOptions:function(){if(this.optionsToSave.length<=0){return}const t={};this.optionsToSave.forEach((function(e){t[e.name]=e.value}));this.optionsToSave=[];window.removeEventListener("beforeunload",this.sendOptions);BX.removeCustomEvent("SidePanel.Slider:onClose",this.sendOptions);return BX.ajax.runComponentAction(this.ajaxSettings.componentName,"save",{mode:"class",signedParameters:this.ajaxSettings.signedParams,data:{options:t}})},saveOptions:function(t,e){if(this.ajaxSettings){if(this.optionsToSave.length<=0){window.addEventListener("beforeunload",this.sendOptions);BX.addCustomEvent("SidePanel.Slider:onClose",this.sendOptions)}this.optionsToSave.push({name:t,value:e});this.debouncedSendOptions()}else if(this.listContainer.id){BX.userOptions.save("ui",this.listContainer.id,t,e)}},saveSettings:function(){const t=this.getCurrentSettings();const e="settings";if(!BX.Type.isPlainObject(t)){return}if(BX.Type.isDomNode(this.listContainer)&&"id"in this.listContainer){this.saveOptions(e,JSON.stringify(t));const s=this.getHomeItem();if(s){const{itemData:t,url:e,firstVisibleItem:i}=s;if(t){if(this.lastHomeLink!==e){this.saveOptions("firstPageLink",e);this.sendOptions();BX.onCustomEvent("BX.Main.InterfaceButtons:onFirstItemChange",[e,i])}this.lastHomeLink=e}}}},resetSettings:function(){let t=null;const e=BX.PopupWindowManager.create(this.listContainer.id+"_reset_popup",null,{content:this.message("MIB_RESET_ALERT"),autoHide:false,overlay:true,closeByEsc:true,closeIcon:true,draggable:{restrict:true},titleBar:this.message("MIB_RESET_SETTINGS"),buttons:[t=new BX.PopupWindowButton({text:this.message("MIB_RESET_BUTTON"),className:"popup-window-button-create",events:{click:()=>{if(BX.Dom.hasClass(t.buttonNode,"popup-window-button-wait")){return}BX.Dom.addClass(t.buttonNode,"popup-window-button-wait");this.handleResetSettings((s=>{if(s){BX.Dom.removeClass(t.buttonNode,"popup-window-button-wait");e.setContent(s)}else{this.saveOptions("settings",JSON.stringify({}));this.saveOptions("firstPageLink","");this.sendOptions().then((function(){window.location.reload()})).catch((function(){window.location.reload()}))}}))}}}),new BX.PopupWindowButtonLink({text:this.message("MIB_CANCEL_BUTTON"),className:"popup-window-button-link-cancel",events:{click:function(){this.popupWindow.close()}}})]});e.show()},handleResetSettings:function(t){const e=[];BX.onCustomEvent("BX.Main.InterfaceButtons:onBeforeResetMenu",[e,this]);let s=new BX.Promise;const i=s;for(let t=0;t<e.length;t++){s=s.then(e[t])}s.then((function(e){t(null,e)}),(function(e){t(e,null)}));i.fulfill()},moveButtonAlias:function(t,e){if(!t||!this.dragItem){return}const s=this.getItemAlias(this.dragItem);const i=this.getItemAlias(t);if(this.isListItem(s)){if(i){if(e){BX.Dom.insertAfter(s,i)}else{this.listContainer.insertBefore(s,i)}}else{this.listContainer.appendChild(s)}}if(this.getMoreMenu()){this.getMoreMenu().getPopupWindow().adjustPosition()}},moveButton:function(t,e){if(!BX.Type.isDomNode(t)||!BX.Type.isDomNode(this.dragItem)){return}if(this.isListItem(t)){if(this.isDisabled(this.dragItem)){this.dragItem.dataset.disabled="false"}if(BX.Type.isDomNode(t)){if(e){BX.Dom.insertAfter(this.dragItem,t)}else{this.listContainer.insertBefore(this.dragItem,t)}}else{this.listContainer.appendChild(this.dragItem)}}if(this.isSubmenuItem(t)){if(e){BX.Dom.insertAfter(this.dragItem,t)}else{this.getMoreMenuContainer().insertBefore(this.dragItem,t)}}},getMoreMenuContainer:function(){const t=this.getMoreMenu();let e=null;if(t!==null){e=t.itemsContainer}return e},findNextSiblingByClass:function(t,e){const s=t;for(;!!t;t=t.nextElementSibling){if(e){if(BX.Dom.hasClass(t,e)&&t!==s){return t}}else{return null}}return null},findChildrenByClassName:function(t,e){let s=null;if(BX.Type.isDomNode(t)&&BX.Type.isStringFilled(e)){s=BX.Buttons.Utils.getByClass(t,e)}return s},initItems:function(){this.getAllItems().forEach((t=>{this.initItem(t)}))},initItem:function(t){if(this.isSettingsEnabled){t.setAttribute("draggable","true");t.setAttribute("tabindex","-1");BX.Event.bind(t,"dragstart",BX.delegate(this._onDragStart,this));BX.Event.bind(t,"dragend",BX.delegate(this._onDragEnd,this));BX.Event.bind(t,"dragenter",BX.delegate(this._onDragEnter,this));BX.Event.bind(t,"dragover",BX.delegate(this._onDragOver,this));BX.Event.bind(t,"dragleave",BX.delegate(this._onDragLeave,this));BX.Event.bind(t,"drop",BX.delegate(this._onDrop,this));t.dataset.link="item-"+BX.Text.getRandom().toLowerCase()}BX.Event.bind(t,"click",this._handleItemClick.bind(this));BX.Event.bind(t,"mouseenter",this.handleItemMouseEnter.bind(this));BX.Event.bind(t,"mouseleave",this.handleItemMouseLeave.bind(this))},dragAndDropInitInSubmenu:function(){const t=this.getMoreMenu();if(!t){return}const e=t.menuItems;e.forEach((t=>{if(this.isSeparator(t.layout.item)||this.isSettings(t.layout.item)||this.isApplySettingsButton(t.layout.item)||this.isResetSettingsButton(t.layout.item)){t.layout.item.draggable=false}else{t.layout.item.draggable=true;t.layout.item.dataset.sortable=true;BX.Event.bind(t.layout.item,"dragstart",BX.delegate(this._onDragStart,this));BX.Event.bind(t.layout.item,"dragenter",BX.delegate(this._onDragEnter,this));BX.Event.bind(t.layout.item,"dragover",BX.delegate(this._onDragOver,this));BX.Event.bind(t.layout.item,"dragleave",BX.delegate(this._onDragLeave,this));BX.Event.bind(t.layout.item,"dragend",BX.delegate(this._onDragEnd,this));BX.Event.bind(t.layout.item,"drop",BX.delegate(this._onDrop,this))}if(BX.Dom.hasClass(t.layout.item,this.classHiddenLabel)||BX.Dom.hasClass(t.layout.item,this.classManage)){BX.Event.bind(t.layout.item,"dragover",BX.delegate(this._onDragOver,this))}}))},getItem:function(t){if(!BX.Type.isDomNode(t)){if(!t||!BX.Type.isDomNode(t.target)){return null}}else{t={target:t}}let e=t.target.closest("."+this.classItem);if(!BX.Type.isDomNode(e)){e=t.target.closest("."+this.classDefaultSubmenuItem+", ."+this.classDefaultSubmenuDelimimeter)}return e},getItemData:function(t){if(!BX.Type.isDomNode(t)){return{}}const e=this.itemData.get(t);if(e){return e}let s;try{s=JSON.parse(t.dataset.item)}catch(t){s={}}this.setItemData(t,s);return s},setItemData(t,e){if(BX.Type.isElementNode(t)&&BX.Type.isPlainObject(e)){e.NODE=t;this.itemData.set(t,e)}},setOpacity:function(t){if(!BX.Type.isDomNode(t)){return}BX.style(t,"opacity",.5)},unsetOpacity:function(t){if(!BX.Type.isDomNode(t)){return}BX.style(t,"opacity","1")},setDragStyles:function(){BX.Dom.addClass(this.listContainer,this.classOnDrag);BX.Dom.addClass(BX(this.getMoreMenuId(true)),this.classOnDrag);this.setOpacity(this.dragItem)},unsetDragStyles:function(){const t=this.getMoreMenu();this.getAllItems().forEach((t=>{this.unsetOpacity(t);BX.Dom.removeClass(t,this.classItemOver)}));if(t&&BX.Type.isArray(t.menuItems)&&t.menuItems.length){t.menuItems.forEach((t=>{this.unsetOpacity(t);BX.Dom.removeClass(t.layout.item,this.classItemOver)}))}BX.Dom.removeClass(this.listContainer,this.classOnDrag);BX.Dom.removeClass(BX(this.getMoreMenuId(true)),this.classOnDrag)},getIconClass:function(t){let e="";if(BX.Type.isDomNode(t)&&"dataset"in t&&"class"in t.dataset&&BX.Type.isStringFilled(t.dataset.class)){e=t.dataset.class}return e},disableItem:function(t){const e=this.getItemAlias(t);if(t&&"dataset"in t){t.dataset.disabled="true";if(e){e.dataset.disabled="true"}}},enableItem:function(t){let e;if(!BX.Type.isDomNode(t)){return}if(this.isSubmenuItem(t)){BX.Dom.removeClass(t,this.classItemDisabled);e=this.getItemAlias(t);if(BX.Type.isDomNode(e)){e.dataset.disabled="false"}}},getAliasLink:function(t){return this.dataValue(t,"link")||""},getItemAlias:function(t){let e=null;if(!BX.Type.isDomNode(t)){return e}const s=this.getAllItems();const i=this.isSubmenuItem(t);const n=this.isListItem(t);if(!i&&!n){return e}if(i){s.forEach((function(s){BX.Dom.hasClass(t,this.getAliasLink(s))&&(e=s)}),this)}if(n){e=BX.Buttons.Utils.getByClass(document,this.getAliasLink(t))}return e},hideItem:function(t){!!t&&BX.Dom.addClass(t,this.classSecret)},showItem:function(t){!!t&&BX.Dom.removeClass(t,this.classSecret)},fakeDragItem:function(){if(!BX.Type.isDomNode(this.dragItem)||!BX.Type.isDomNode(this.overItem)){return}let t=null;if(this.isDragToSubmenu()){t=this.getItemAlias(this.dragItem);if(t!==this.dragItem){this.listContainer.appendChild(this.dragItem);this.dragItem=t;this.showItem(this.dragItem);this.adjustMoreButtonPosition();this.updateMoreMenuItems();this.tmp.moved=false;this.tmp.movetToSubmenu=true;this.setOpacity(this.dragItem)}}if(this.isDragToList()&&!this.tmp.movetToSubmenu){t=this.getItemAlias(this.dragItem);if(t!==this.dragItem){this.hideItem(this.dragItem);this.dragItem=t;this.adjustMoreButtonPosition();this.updateMoreMenuItems();this.setOpacity(this.dragItem)}}this.tmp.movetToSubmenu=false},updateMoreMenuItems:function(){const t=this.getMoreMenu();if(t===null){return}const e=t.menuItems;if(!BX.Type.isArray(e)||!e.length){return}const s=this.getHiddenItems();const i=this.getDisabledItems();const n=i.concat(s);e.forEach((t=>{const e=[].some.call(n,(e=>BX.Dom.hasClass(t.layout.item,this.dataValue(e,"link"))||this.isDisabled(t.layout.item)||this.isSeparator(t.layout.item)||this.isDropzone(t.layout.item)));if(e||(this.isSettings(t.layout.item)||this.isApplySettingsButton(t.layout.item)||this.isResetSettingsButton(t.layout.item)||this.isNotHiddenItem(t.layout.item)||this.isSeparator(t.layout.item)||t.layout.item===this.dragItem)&&!this.isMoreButton(t.layout.item)){this.showItem(t.layout.item)}else{this.hideItem(t.layout.item)}}))},isNotHiddenItem:function(t){return BX.Dom.hasClass(t,this.classSubmenuNoHiddenItem)},getNotHidden:function(){return BX.Buttons.Utils.getByClass(this.getMoreMenuContainer(),this.classSubmenuNoHiddenItem)},setOverStyles:function(t){if(BX.Type.isDomNode(t)&&!BX.Dom.hasClass(t,this.classItemOver)){BX.Dom.addClass(t,this.classItemOver)}},unsetOverStyles:function(t){if(BX.Type.isDomNode(t)&&BX.Dom.hasClass(t,this.classItemOver)){BX.Dom.removeClass(t,this.classItemOver)}},dataValue:function(t,e){let s="";if(BX.Type.isDomNode(t)){const i=BX.data(t,e);if(typeof i!=="undefined"){s=i}}return s},execScript:function(t,e){if(BX.Type.isStringFilled(t)){const s=new Function("event",t);s(e)}},showLicenseWindow:function(){if(!B24.licenseInfoPopup){return}const t=B24.licenseInfoPopup;t.init({B24_LICENSE_BUTTON_TEXT:this.message("MIB_LICENSE_BUY_BUTTON"),B24_TRIAL_BUTTON_TEXT:this.message("MIB_LICENSE_TRIAL_BUTTON"),IS_FULL_DEMO_EXISTS:this.licenseParams.isFullDemoExists,HOST_NAME:this.licenseParams.hostname,AJAX_URL:this.licenseParams.ajaxUrl,LICENSE_ALL_PATH:this.licenseParams.licenseAllPath,LICENSE_DEMO_PATH:this.licenseParams.licenseDemoPath,FEATURE_GROUP_NAME:this.licenseParams.featureGroupName,AJAX_ACTIONS_URL:this.licenseParams.ajaxActionsUrl,B24_FEATURE_TRIAL_SUCCESS_TEXT:this.message("MIB_LICENSE_WINDOW_TRIAL_SUCCESS_TEXT")});t.show("main-buttons",this.message("MIB_LICENSE_WINDOW_HEADER_TEXT"),this.message("MIB_LICENSE_WINDOW_TEXT"))},_handleItemClick:function(t){if(!this.isEditEnabled()){const e=this.getItem(t);this.showChildMenu(e)}},handleEditButtonClick:function(t){t.preventDefault();t.stopPropagation();let e=this.getItem(t);if(!BX.Type.isDomNode(e)){return}if(this.isSubmenuItem(e)){e=this.getItemAlias(e)}const s=this.getItemData(e);const i=this.getItemEditMenu();if(i&&i.popupWindow.isShown()&&this.lastEditNode===e){i.popupWindow.close()}else{this.showItemEditMenu(s,t.target)}this.lastEditNode=e},handleDragButtonClick:function(t){t.preventDefault();t.stopPropagation()},handleItemPinEnter:function(t){const e=this.getChildMenu();if(e){this.showPinHint(t.currentTarget)}},showPinHint:function(t){const e=48;const s=BX.Main.PopupManager.create({id:"main-buttons-pin-hint",closeByEsc:true,padding:15,className:"main-buttons-pin-hint-popup",height:e,cacheable:false,autoHide:true,bindOptions:{forceBindPosition:true},content:this.message("MIB_PIN_HINT"),darkMode:true,events:{onAfterShow:function(e){const s=e.getTarget();const i=BX.Dom.getPosition(t);const n=BX.Dom.getPosition(s.getPopupContainer());if(n.left<i.left+i.width){s.setAngle({position:"top",offset:0});s.setOffset({offsetLeft:20,offsetTop:5});s.adjustPosition()}}}});s.setAngle({position:"left",offset:0});s.setOffset({offsetLeft:t.offsetWidth+5,offsetTop:-t.offsetHeight/2-e/2-2});s.setBindElement(t);s.show();s.adjustPosition()},closePinHint:function(){const t=BX.Main.PopupManager.getPopupById("main-buttons-pin-hint");if(t){t.close()}},handleItemPinLeave:function(t){this.closePinHint()},handleItemPin:function(t,e,s){s.stopPropagation();s.preventDefault();const i=this.createRootItem(t);BX.Dom.addClass(i,"main-buttons-item-insert-animation");BX.Dom.insertBefore(i,e);requestAnimationFrame((()=>{requestAnimationFrame((()=>{BX.Dom.style(i,{width:i.scrollWidth+"px",opacity:1})}))}));const n=()=>{BX.Dom.removeClass(i,"main-buttons-item-insert-animation");BX.Dom.style(i,"width",null);BX.Dom.style(i,"opacity",null);const t=this.getItemData(e);this.recalculateItemsCounters([t]);this.showMoreMenu();this.updateMoreButtonCounter();this.showChildMenu(e);this.saveSettings()};setTimeout(n,300);this.initItem(i);this.pinItem(t);this.destroyMoreMenu();this.destroyChildMenu()},handleItemUnpin:function(t,e){BX.Dom.style(e,{width:e.offsetWidth+"px"});BX.Dom.addClass(e,"main-buttons-item-insert-animation");requestAnimationFrame((()=>{requestAnimationFrame((()=>{BX.Dom.style(e,{width:0,margin:0,opacity:0})}))}));const s=()=>{BX.Dom.remove(e);this.showMoreMenu();this.updateMoreButtonCounter();this.saveSettings()};setTimeout(s,300);this.pinItem(t,false);const i=[];let n="";const o=t["ID"].split(":");o.forEach((t=>{n+=`${n===""?"":":"}${t}`;const e=this.getItemById(n);if(e){i.push(this.getItemData(e))}}));this.destroyMoreMenu();this.recalculateItemsCounters(i)},pinItem:function(t,e=true){const s=t["ID"];const i=s.split(":");let n="";i.forEach(((t,o)=>{n+=`${n===""?"":":"}${t}`;const a=this.getItemById(n);if(!a){return}const u=this.getItemData(a);let r=u["ITEMS"];let l=n;const h=i.slice(o+1);const m=[u];while(BX.Type.isArrayFilled(h)&&BX.Type.isArrayFilled(r)){l=l+":"+h.shift();for(let t=0;t<r.length;t++){const i=r[t];if(i["ID"]===s){i["IS_PINNED"]=e;for(let t=m.length-1;t>=0;t--){const s=m[t];const i=t===0;if(e){const t=s["ITEMS"].some((t=>{const e=t["IS_PINNED"]===true;const s=t["IS_DISBANDED"]===true;const i=t["IS_DELIMITER"]===true;return!e&&!s&&!i}));if(!t){s["IS_DISBANDED"]=true;if(i){a.dataset.disbanded=true}}}else{if(i){a.dataset.disbanded=false}s["IS_DISBANDED"]=false}const n=s["ITEMS"].some((t=>t["IS_ACTIVE"]===true&&t["IS_PINNED"]!==true&&t["IS_DELIMITER"]!==true));if(n){s["IS_ACTIVE"]=true;if(i){this.activateItem(a)}}else{s["IS_ACTIVE"]=false;if(i){this.deactivateItem(a)}}}return}else if(i["ID"]===l){r=i["ITEMS"];l=i["ID"];m.push(i);break}}}}))},getParentItem:function(t){const e=t.split(":");let s="";for(let i=0;i<e.length;i++){s+=`${s===""?"":":"}${e[i]}`;const n=this.getItemById(s);if(!n){continue}const o=this.getItemData(n);let a=o["ITEMS"];let u=s;const r=e.slice(i+1);let l=null;while(BX.Type.isArrayFilled(r)&&BX.Type.isArrayFilled(a)){u=u+":"+r.shift();for(let e=0;e<a.length;e++){const s=a[e];if(s["ID"]===t){return l===null?o:l}else if(s["ID"]===u){a=s["ITEMS"];u=s["ID"];l=s;break}}}}return null},_onDragStart:function(t){const e=this.getVisibleItems();const s=BX.Type.isArray(e)?e.length:null;this.dragItem=this.getItem(t);if(!BX.Type.isDomNode(this.dragItem)){return}if(s===1&&this.isListItem(this.dragItem)){t.preventDefault();BX.onCustomEvent(window,"BX.Main.InterfaceButtons:onHideLastVisibleItem",[this.dragItem,this]);return}if(this.isMoreButton(this.dragItem)||this.isSeparator(this.dragItem)||this.isNotHiddenItem(this.dragItem)||BX.Dom.attr(this.dragItem,"data-parent-item-id")||BX.Dom.attr(this.dragItem,"data-has-child")){t.preventDefault();return}this.onDragStarted=true;this.closeChildMenu();this.destroyItemEditMenu();if(this.isListItem(this.dragItem)){this.showMoreMenu()}this.setDragStyles();if(!this.isEditEnabled()){this.enableEdit()}},_onDragEnd:function(t){t.preventDefault();const e=this.getItem(t);this.onDragStarted=false;if(!BX.Type.isDomNode(e)){return}this.unsetDragStyles();this.refreshMoreMenu();if(!this.isEditEnabled()){this.closeMoreMenu()}const s=BX.findNextSibling(this.dragItem,(t=>this.isVisibleItem(t)));const i=BX.findPreviousSibling(this.dragItem,(t=>this.isVisibleItem(t)));if(BX.Dom.hasClass(i,this.classHiddenLabel)||this.isDisabled(i)&&this.isSubmenuItem(i)||this.isDisabled(s)&&this.isSubmenuItem(s)){this.disableItem(this.dragItem);this.refreshMoreMenu()}if(this.isEditEnabled()){this.enableEdit()}else{this.disableEdit()}this.updateMoreButtonCounter();this.saveSettings();this.dragItem=null;this.overItem=null;this.tmp.moved=false},updateMoreButtonCounter:function(){let t=this.getHiddenItems();const e=this.getDisabledItems();t=t.concat(e);let s=0;if(BX.Type.isArray(t)){t.forEach((t=>{const e=this.getItemData(t);const i=BX.Type.isNumber(e["COUNTER"])&&e["COUNTER"]>0?e["COUNTER"]:0;s+=i}))}if(BX.Type.isNumber(s)){this.setMoreButtonCounter(s)}},_onDragEnter:function(t){const e=this.getItem(t);if(BX.Type.isDomNode(e)&&this.isNotHiddenItem(e)){this.setOverStyles(e)}},_onDragOver:function(t){t.preventDefault();this.overItem=this.getItem(t);if(!BX.Type.isDomNode(this.overItem)||!BX.Type.isDomNode(this.dragItem)||this.overItem===this.dragItem||this.isNotHiddenItem(this.overItem)||BX.Dom.attr(this.overItem,"data-parent-item-id")||BX.Dom.attr(this.overItem,"data-has-child")){return}this.fakeDragItem();const e=this.isNext(t);const s=this.isGoodPosition(t);if(e&&s){let t;let e=false;if(this.isListItem(this.overItem)){t=this.findNextSiblingByClass(this.overItem,this.classItem);if(t===null&&this.getLastVisibleItem()===this.overItem){t=this.overItem;e=true}}else{t=this.findNextSiblingByClass(this.overItem,this.classSubmenuItem);if(this.isSettings(t)||this.isApplySettingsButton(t)||this.isResetSettingsButton(t)){return}if(t===null&&this.getItemAlias(this.getLastDisabledItem())===this.overItem){t=this.overItem;e=true}}if(BX.Type.isDomNode(t)){this.moveButton(t,e);this.moveButtonAlias(t,e);this.adjustMoreButtonPosition();this.updateMoreMenuItems()}}else if(!e&&s&&!BX.Dom.hasClass(this.overItem,this.classHiddenLabel)){this.moveButton(this.overItem);this.moveButtonAlias(this.overItem);this.adjustMoreButtonPosition();this.updateMoreMenuItems()}},_onDragLeave:function(t){const e=this.getItem(t);if(BX.Type.isDomNode(e)){this.unsetOverStyles(t.target)}},_onDrop:function(t){const e=this.getItem(t);if(!BX.Type.isDomNode(e)){return}if(this.isNotHiddenItem(e)||this.isDisabled(e)){this.disableItem(this.dragItem);this.adjustMoreButtonPosition()}const s=this.getItemAlias(this.dragItem);if(this.isListItem(s)){s.dataset.disabled="false"}this.unsetDragStyles();t.preventDefault()},handleMoreMenuFirstShow:function(t){const e=t.getTarget();BX.Event.bind(e.getPopupContainer(),"mouseenter",this.handleMoreMenuMouseEnter.bind(this));BX.Event.bind(e.getPopupContainer(),"mouseleave",this.handleMoreMenuMouseLeave.bind(this))},handleMoreMenuMouseEnter:function(){clearTimeout(this.submenuLeaveTimeout)},handleMoreMenuMouseLeave:function(){this.tryCloseMoreMenuOnTimeout()},tryCloseMoreMenuOnTimeout:function(){clearTimeout(this.submenuLeaveTimeout);if(!this.isEditEnabled()){this.submenuLeaveTimeout=setTimeout((()=>{this.closeMoreMenu()}),500)}},handleMoreMenuShow:function(t){BX.Event.EventEmitter.emit("BX.Main.InterfaceButtons:onMenuShow");BX.Event.EventEmitter.emit(this,"BX.Main.InterfaceButtons:onMoreMenuShow",{event:t});setTimeout((()=>{if(!this.isEditEnabled()){t.getTarget().setAutoHide(true)}}),500)},handleMoreMenuClose:function(){BX.Event.EventEmitter.emit(this,"BX.Main.InterfaceButtons:onMoreMenuClose");this.setMoreMenuShown(false);if(this.isEditEnabled()){this.activateItem(this.moreButton)}else{if(!this.isActiveInMoreMenu()){this.deactivateItem(this.moreButton)}}this.destroyItemEditMenu()},_onChildMenuFirstShow:function(t){const e=t.getTarget();BX.Event.bind(e.getPopupContainer(),"mouseenter",this._onChildMenuMouseEnter.bind(this));BX.Event.bind(e.getPopupContainer(),"mouseleave",this._onChildMenuMouseLeave.bind(this))},_onChildMenuMouseEnter:function(){clearTimeout(this.childMenuLeaveTimeout)},_onChildMenuMouseLeave:function(){this.tryCloseChildMenuOnTimeout()},tryCloseChildMenuOnTimeout:function(){if(this.isEditEnabled()){return}clearTimeout(this.childMenuLeaveTimeout);this.childMenuLeaveTimeout=setTimeout((()=>{this.closeChildMenu()}),500)},_onChildMenuShow:function(t,e){BX.Dom.addClass(t,this.classMenuShown);BX.Event.EventEmitter.emit("BX.Main.InterfaceButtons:onMenuShow");BX.Event.EventEmitter.emit(this,"BX.Main.InterfaceButtons:onSubMenuShow",{item:t,event:e});if(this.theme!=="default"){this.centerPopupArrow(e.getTarget(),t)}setTimeout((()=>{e.getTarget().setAutoHide(true)}),500)},_onChildMenuClose:function(t){BX.Event.EventEmitter.emit(this,"BX.Main.InterfaceButtons:onSubMenuClose");BX.Dom.removeClass(t,this.classMenuShown);this.closePinHint()},handleAdjustPosition:function(t,e){const s=25;const i=BX.Dom.getPosition(t);const n=e.getTarget();if(e.left<i.left-s){const t=n.getPopupContainer().offsetWidth;const o=i.right-t+s;if(o>0){e.left=o;BX.Dom.addClass(n.getPopupContainer(),"--left-handed")}}else{BX.Dom.removeClass(n.getPopupContainer(),"--left-handed")}},_onResizeHandler:function(){this.adjustMoreButtonPosition();this.updateMoreMenuItems();this.closeChildMenu();if(!this.isSettingsEnabled){this.visibleControlMoreButton()}},handleMoreButtonClick:function(t){t.preventDefault();this.showMoreMenu()},handleMoreButtonMouseEnter:function(t){if(this.enableItemMouseEnter){clearTimeout(this.menuShowTimeout);this.menuShowTimeout=setTimeout((()=>{this.showMoreMenu()}),100)}clearTimeout(this.submenuLeaveTimeout)},handleMoreButtonMouseLeave:function(){clearTimeout(this.menuShowTimeout);this.tryCloseMoreMenuOnTimeout()},handleItemMouseEnter:function(t){if(!this.enableItemMouseEnter){return}if(this.onDragStarted){return}const e=this.getItem(t);clearTimeout(this.childMenuLeaveTimeout);clearTimeout(this.menuShowTimeout);this.menuShowTimeout=setTimeout((()=>{this.showChildMenu(e)}),100);BX.Dom.addClass(e,this.classItemOver)},handleItemMouseLeave:function(t){clearTimeout(this.menuShowTimeout);if(!this.enableItemMouseEnter){return}if(this.onDragStarted){return}const e=this.getItem(t);BX.Dom.removeClass(e,this.classItemOver);this.tryCloseChildMenuOnTimeout()},handleMoreMenuItemMouseEnter:function(t){if(this.isEditEnabled()){t.preventDefault()}},getSettingsResetButton:function(){return BX.Buttons.Utils.getByClass(this.getMoreMenuContainer(),this.classSettingsResetButton)},isDisabled:function(t){let e=false;if(BX.Type.isDomNode(t)){e=this.dataValue(t,"disabled")==="true"||BX.Dom.hasClass(t,this.classItemDisabled)}return e},isPinned:function(t){let e=false;if(BX.Type.isDomNode(t)){e=this.getItemData(t)["IS_PINNED"]===true}return e},isSettings:function(t){let e=false;if(BX.Type.isDomNode(t)){e=BX.Dom.hasClass(t,this.classSettingMenuItem)}return e},isLocked:function(t){let e=false;if(BX.Type.isDomNode(t)){e=this.dataValue(t,"locked")==="true"||BX.Dom.hasClass(t,this.classItemLocked)}return e},isDropzone:function(t){return BX.Dom.hasClass(t,this.classDropzone)},isNext:function(t){const e=this.dragItem.getBoundingClientRect();const s=this.overItem.getBoundingClientRect();const i=getComputedStyle(this.dragItem);const n=parseInt(i.marginRight.replace("px",""));let o=null;if(this.isListItem(this.overItem)){o=t.clientX>s.left-n&&t.clientX>e.right}if(this.isSubmenuItem(this.overItem)){o=t.clientY>e.top}return o},isGoodPosition:function(t){const e=this.overItem;if(!BX.Type.isDomNode(e)){return false}let s;const i=e.getBoundingClientRect();if(this.isListItem(e)){s=this.isNext(t)&&t.clientX>=i.left+i.width/2||!this.isNext(t)&&t.clientX<=i.left+i.width/2}if(this.isSubmenuItem(e)){s=this.isNext(t)&&t.clientY>=i.top+i.height/2||!this.isNext(t)&&t.clientY<=i.top+i.height/2}return s},isSubmenuItem:function(t){return BX.Dom.hasClass(t,this.classSubmenuItem)},isVisibleItem:function(t){if(!BX.Type.isDomNode(t)){return false}return t.offsetTop===0},isMoreButton:function(t){let e=false;if(BX.Type.isDomNode(t)&&BX.Dom.hasClass(t,this.classItemMore)){e=true}return e},isListItem:function(t){let e=false;if(BX.Type.isDomNode(t)&&BX.Dom.hasClass(t,this.classItem)){e=true}return e},isSublink:function(t){let e=false;if(BX.Type.isDomNode(t)){e=BX.Dom.hasClass(t,this.classItemSublink)}return e},isSeparator:function(t){let e=false;if(BX.Type.isDomNode(t)){e=BX.Dom.hasClass(t,this.classSeparator)}return e},isDragToSubmenu:function(){return!this.isSubmenuItem(this.dragItem)&&this.isSubmenuItem(this.overItem)},isDragToList:function(){return this.isSubmenuItem(this.dragItem)&&!this.isSubmenuItem(this.overItem)}}}if(typeof BX.Main.interfaceButtonsManager==="undefined"){BX.Main.interfaceButtonsManager={data:{},init:function(t){let e=null;if(!BX.Type.isPlainObject(t)||!("containerId"in t)){throw"BX.Main.interfaceButtonsManager: containerId not set in params Object"}e=BX(t.containerId);if(BX.Type.isDomNode(e)){this.data[t.containerId]=new BX.Main.interfaceButtons(e,t)}else{BX(BX.delegate((function(){e=BX(t.containerId);if(!BX.Type.isDomNode(e)){throw"BX.Main.interfaceButtonsManager: container is not dom node"}this.data[t.containerId]=new BX.Main.interfaceButtons(e,t)}),this))}},getById:function(t){let e=null;if(BX.type.isString(t)&&BX.Type.isStringFilled(t)){try{e=this.data[t]}catch(t){}}return e},getObjects:function(){return this.data}}}
/* End */
;
; /* Start:"a:4:{s:4:"full";s:94:"/bitrix/components/bitrix/main.interface.buttons/templates/.default/utils.min.js?1728733181575";s:6:"source";s:76:"/bitrix/components/bitrix/main.interface.buttons/templates/.default/utils.js";s:3:"min";s:80:"/bitrix/components/bitrix/main.interface.buttons/templates/.default/utils.min.js";s:3:"map";s:80:"/bitrix/components/bitrix/main.interface.buttons/templates/.default/utils.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Buttons");BX.Buttons.Utils={getByClass:function(e,t,l){var n=[];if(t){n=(e||document.body).getElementsByClassName(t);if(!l){n=n.length?n[0]:null}else{n=[].slice.call(n)}}return n},getByTag:function(e,t,l){var n=[];if(t){n=(e||document.body).getElementsByTagName(t);if(!l){n=n.length?n[0]:null}else{n=[].slice.call(n)}}return n},getBySelector:function(e,t,l){var n=[];if(t){if(!l){n=(e||document.body).querySelector(t)}else{n=(e||document.body).querySelectorAll(t);n=[].slice.call(n)}}return n}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:95:"/bitrix/components/bitrix/bizproc.workflow.edit/templates/.default/script.min.js?17287331841804";s:6:"source";s:76:"/bitrix/components/bitrix/bizproc.workflow.edit/templates/.default/script.js";s:3:"min";s:80:"/bitrix/components/bitrix/bizproc.workflow.edit/templates/.default/script.min.js";s:3:"map";s:80:"/bitrix/components/bitrix/bizproc.workflow.edit/templates/.default/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Bizproc.WorkflowEditComponent");if(typeof BX.Bizproc.WorkflowEditComponent.Globals!=="undefined"){return}BX.Bizproc.WorkflowEditComponent.Globals={};BX.Bizproc.WorkflowEditComponent.Globals.init=function(o){this.documentTypeSigned=String(o.documentTypeSigned)};BX.Bizproc.WorkflowEditComponent.Globals.onAfterSliderClose=function(o,e){var t=o.getData();if(t.get("upsert")){var a=t.get("upsert");for(var r in a){e[r]=a[r]}}if(t.get("delete")){var n=t.get("delete");for(var i in n){delete e[n[i]]}}};BX.Bizproc.WorkflowEditComponent.Globals.showGlobalVariables=function(){var o=this;BX.Bizproc.Globals.Manager.Instance.showGlobals(BX.Bizproc.Globals.Manager.Instance.mode.variable,String(this.documentTypeSigned)).then(function(e){o.onAfterSliderClose(e,arWorkflowGlobalVariables)})};BX.Bizproc.WorkflowEditComponent.Globals.showGlobalConstants=function(){var o=this;BX.Bizproc.Globals.Manager.Instance.showGlobals(BX.Bizproc.Globals.Manager.Instance.mode.constant,String(this.documentTypeSigned)).then(function(e){o.onAfterSliderClose(e,arWorkflowGlobalConstants)})}})();function BPImportToClipboard(){var o=JSON.stringify({template:rootActivity.Serialize(),parameters:arWorkflowParameters,variables:arWorkflowVariables,constants:arWorkflowConstants});BX.clipboard.copy(encodeURIComponent(o))}function BPExportFromString(o){try{var e=JSON.parse(decodeURIComponent(o))}catch(o){e={}}if(e.parameters&&BX.type.isPlainObject(e.parameters)){arWorkflowParameters=e.parameters}if(e.variables&&BX.type.isPlainObject(e.variables)){arWorkflowVariables=e.variables}if(e.constants&&BX.type.isPlainObject(e.constants)){arWorkflowConstants=e.constants}if(e.template&&BX.type.isPlainObject(e.template)){arWorkflowTemplate=e.template;ReDraw()}}
/* End */
;
; /* Start:"a:4:{s:4:"full";s:106:"/bitrix/activities/bitrix/statemachineworkflowactivity/statemachineworkflowactivity.min.js?172873318617820";s:6:"source";s:86:"/bitrix/activities/bitrix/statemachineworkflowactivity/statemachineworkflowactivity.js";s:3:"min";s:90:"/bitrix/activities/bitrix/statemachineworkflowactivity/statemachineworkflowactivity.min.js";s:3:"map";s:90:"/bitrix/activities/bitrix/statemachineworkflowactivity/statemachineworkflowactivity.map.js";}"*/
(function(e,t,s){"use strict";let i=e=>e,l,o,a,r,c,n,b;var d=babelHelpers.classPrivateFieldLooseKey("SPACE_BETWEEN_STATE_TITLE_AND_STATE_CHILD");var h=babelHelpers.classPrivateFieldLooseKey("CHILD_ACTIVITY_BORDER");var p=babelHelpers.classPrivateFieldLooseKey("ARROW_SIZE");var v=babelHelpers.classPrivateFieldLooseKey("ARROW_HALF_SIZE");var u=babelHelpers.classPrivateFieldLooseKey("ARROW_QUARTER_SIZE");var P=babelHelpers.classPrivateFieldLooseKey("ARROW_ONE_EIGHTH_SIZE");var f=babelHelpers.classPrivateFieldLooseKey("tableLeftPosition");var L=babelHelpers.classPrivateFieldLooseKey("tableRightPosition");var F=babelHelpers.classPrivateFieldLooseKey("linesCenter");var H=babelHelpers.classPrivateFieldLooseKey("linesLeft");var y=babelHelpers.classPrivateFieldLooseKey("linesRight");var B=babelHelpers.classPrivateFieldLooseKey("serialize");var g=babelHelpers.classPrivateFieldLooseKey("removeChild");var m=babelHelpers.classPrivateFieldLooseKey("replaceChild");var w=babelHelpers.classPrivateFieldLooseKey("removeResources");var x=babelHelpers.classPrivateFieldLooseKey("paintWholeLine");var $=babelHelpers.classPrivateFieldLooseKey("drawAllLines");var T=babelHelpers.classPrivateFieldLooseKey("removeAllLines");var A=babelHelpers.classPrivateFieldLooseKey("findTargetStateNames");var O=babelHelpers.classPrivateFieldLooseKey("drawLine");var D=babelHelpers.classPrivateFieldLooseKey("disposeLine");var S=babelHelpers.classPrivateFieldLooseKey("disposeLinesFromRightToLeft");var R=babelHelpers.classPrivateFieldLooseKey("disposeLinesFromLeftToLeftColumn2");var M=babelHelpers.classPrivateFieldLooseKey("disposeLinesFromLeftToLeftColumn1");var j=babelHelpers.classPrivateFieldLooseKey("disposeLinesFromLeftToRight");var K=babelHelpers.classPrivateFieldLooseKey("disposeArrowRightOut");var E=babelHelpers.classPrivateFieldLooseKey("disposeArrowRightIn");var _=babelHelpers.classPrivateFieldLooseKey("disposeArrowLeftOut");var I=babelHelpers.classPrivateFieldLooseKey("disposeArrowLeftIn");var z=babelHelpers.classPrivateFieldLooseKey("draw");var C=babelHelpers.classPrivateFieldLooseKey("renderAddNewStateButton");var k=babelHelpers.classPrivateFieldLooseKey("addNewState");var N=babelHelpers.classPrivateFieldLooseKey("reCheckLineStatuses");class W extends window.BizProcActivity{constructor(){super();Object.defineProperty(this,N,{value:he});Object.defineProperty(this,k,{value:de});Object.defineProperty(this,C,{value:be});Object.defineProperty(this,z,{value:ne});Object.defineProperty(this,I,{value:ce});Object.defineProperty(this,_,{value:re});Object.defineProperty(this,E,{value:ae});Object.defineProperty(this,K,{value:oe});Object.defineProperty(this,j,{value:le});Object.defineProperty(this,M,{value:ie});Object.defineProperty(this,R,{value:se});Object.defineProperty(this,S,{value:te});Object.defineProperty(this,D,{value:ee});Object.defineProperty(this,O,{value:J});Object.defineProperty(this,A,{value:q});Object.defineProperty(this,T,{value:Y});Object.defineProperty(this,$,{value:V});Object.defineProperty(this,x,{value:Q});Object.defineProperty(this,w,{value:X});Object.defineProperty(this,m,{value:U});Object.defineProperty(this,g,{value:Z});Object.defineProperty(this,B,{value:G});this.Table=null;Object.defineProperty(this,f,{writable:true,value:null});Object.defineProperty(this,L,{writable:true,value:null});this.__l=[];this.StatusArrows=[];Object.defineProperty(this,F,{writable:true,value:0});Object.defineProperty(this,H,{writable:true,value:0});Object.defineProperty(this,y,{writable:true,value:0});this.classname="StateMachineWorkflowActivity";this.SerializeStateMachineWorkflowActivity=this.Serialize;this.Serialize=babelHelpers.classPrivateFieldLooseBase(this,B)[B].bind(this);this.LineMouseOver=e=>{babelHelpers.classPrivateFieldLooseBase(this,x)[x](e.target.id,"#e00","over")};this.LineMouseOut=e=>{babelHelpers.classPrivateFieldLooseBase(this,x)[x](e.target.id,"rgb(192, 193, 195)","out")};this.DrawLines=babelHelpers.classPrivateFieldLooseBase(this,$)[$].bind(this);this.FindSetState=babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this);this.Draw=babelHelpers.classPrivateFieldLooseBase(this,z)[z].bind(this);this.AddStatus=babelHelpers.classPrivateFieldLooseBase(this,k)[k].bind(this);this.ReCheckPosition=babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this);this.RemoveChildStateMachine=this.RemoveChild;this.RemoveChild=babelHelpers.classPrivateFieldLooseBase(this,g)[g].bind(this);this.ReplaceChild=babelHelpers.classPrivateFieldLooseBase(this,m)[m].bind(this);this.RemoveResourcesActivity=this.RemoveResources;this.RemoveResources=babelHelpers.classPrivateFieldLooseBase(this,w)[w].bind(this)}}function G(){if(this.childActivities.length>0){this.Properties.InitialStateName=this.childActivities[0].Name}return this.SerializeStateMachineWorkflowActivity()}function Z(e){this.RemoveChildStateMachine(e);t.Dom.remove(this.Table);this.Table=null;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=null;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=null;babelHelpers.classPrivateFieldLooseBase(this,z)[z](this.statediv)}function U(e,t){const s=this.childActivities.indexOf(e);const i=this.childActivities.indexOf(t);if(s<0||i<0){return}this.childActivities[s]=t;this.childActivities[i]=e;window.BPTemplateIsModified=true;babelHelpers.classPrivateFieldLooseBase(this,w)[w]();babelHelpers.classPrivateFieldLooseBase(this,z)[z](this.statediv)}function X(){this.RemoveResourcesActivity();if(this.Table){t.Dom.remove(this.Table);this.Table=null}babelHelpers.classPrivateFieldLooseBase(this,f)[f]=null;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=null;babelHelpers.classPrivateFieldLooseBase(this,T)[T]()}function Q(e,s,i){const l=e.slice(0,Math.max(0,e.length-2));for(let e=1;e<=3;e++){const o=document.getElementById(`${l}.${e}`);const a=t.Text.toInteger(t.Dom.style(o,"zIndex"))+(i==="over"?1e3:-1e3);t.Dom.style(o,{zIndex:a,backgroundColor:s})}}function V(){babelHelpers.classPrivateFieldLooseBase(this,T)[T]();babelHelpers.classPrivateFieldLooseBase(this,A)[A](false,this);for(const[e,t]of this.StatusArrows.entries()){const s=window.ActGetRealPos(document.getElementById(t[0]));const i=window.ActGetRealPos(document.getElementById(t[1]));if(s===false||i===false||s.left<=0||i.left<=0){continue}const{d0:l,d1:o,d2:a,d3:r,d4:c}=babelHelpers.classPrivateFieldLooseBase(this,O)[O](e,t);s.right+=babelHelpers.classPrivateFieldLooseBase(this.constructor,d)[d];s.left-=babelHelpers.classPrivateFieldLooseBase(this.constructor,d)[d];babelHelpers.classPrivateFieldLooseBase(this,D)[D]([l,o,a,r,c],s,i,t[0]);this.__l.push([l,o,a,r,c])}}function Y(){this.__l.forEach((e=>e.forEach((e=>t.Dom.remove(e)))));this.__l=[];this.StatusArrows=[];babelHelpers.classPrivateFieldLooseBase(this,F)[F]=0;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=0;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=0}function q(e,t){if(t.Type==="SetStateActivity"){if(Object.hasOwn(t.Properties,"TargetStateName")){this.StatusArrows.push([e,t.Properties.TargetStateName])}return}t.childActivities.forEach((s=>{babelHelpers.classPrivateFieldLooseBase(this,A)[A](t.Type==="StateActivity"?s.Name:e,s)}))}function J(e,s){const{root:o,d0:a,d4:r,d1:c,d2:n,d3:b}=t.Tag.render(l||(l=i`
			<div>
				<div 
					ref="d0"
					class="bizproc-designer-state-machine-workflow-activity-arrow-wrapper"
					style="z-index: ${0};"
				></div>
				<div
					ref="d4"
					class="bizproc-designer-state-machine-workflow-activity-arrow-wrapper"
					style="z-index: ${0};"
				></div>
				<div 
					ref="d1"
					id="${0}"
					class="bizproc-designer-state-machine-workflow-activity-horizontal-line"
					style="z-index: ${0};"
				></div>
				<div 
					ref="d2"
					id="${0}"
					class="bizproc-designer-state-machine-workflow-activity-vertical-line"
					style="z-index: ${0};"
				></div>
				<div 
					ref="d3"
					id="${0}"
					class="bizproc-designer-state-machine-workflow-activity-horizontal-line"
					style="z-index: ${0};"
				></div>
			</div>
		`),14+e*10,14+e*10,`${s[0]}-${s[1]}.1`,15+e*10,`${s[0]}-${s[1]}.2`,15+e*10,`${s[0]}-${s[1]}.3`,15+e*10);t.Event.bind(c,"mouseover",this.LineMouseOver);t.Event.bind(c,"mouseout",this.LineMouseOut);t.Event.bind(n,"mouseover",this.LineMouseOver);t.Event.bind(n,"mouseout",this.LineMouseOut);t.Event.bind(b,"mouseover",this.LineMouseOver);t.Event.bind(b,"mouseout",this.LineMouseOut);t.Dom.append(o,this.Table.parentNode);return{d0:a,d4:r,d1:c,d2:n,d3:b}}function ee(e,s,i,l){if(t.Text.toInteger(s.right)<t.Text.toInteger(i.left)){babelHelpers.classPrivateFieldLooseBase(this,S)[S](e,s,i)}else if(t.Text.toInteger(s.left)===t.Text.toInteger(i.left)){const o=document.getElementById(l).closest("[data-column]");if(o&&t.Dom.attr(o,"data-column")===2){babelHelpers.classPrivateFieldLooseBase(this,R)[R](e,s,i)}else{babelHelpers.classPrivateFieldLooseBase(this,M)[M](e,s,i)}}else{babelHelpers.classPrivateFieldLooseBase(this,j)[j](e,s,i)}}function te(e,s,i){++babelHelpers.classPrivateFieldLooseBase(this,F)[F];const l=-50+babelHelpers.classPrivateFieldLooseBase(this,F)[F]%6*6;const o=i.left-s.right;const a=-1;const[r,c,n,b,d]=e;const p=s.top+Math.floor(s.height/4);const P=i.top+Math.floor(i.height/4);const f=o/2+l;const L=2;const H=s.right+f;t.Dom.style(c,{top:`${p}px`,left:`${s.right+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]+1}px`,width:`${f}px`});t.Dom.style(n,{top:s.top>i.top?`${P+7}px`:`${p}px`,left:`${H}px`,height:`${s.top>i.top?s.top-i.top+L*2-9:i.top-s.top+L*2+1}px`});t.Dom.style(b,{top:`${i.top+Math.floor((i.bottom-i.top)/2)}px`,left:`${H}px`,width:`${o/2+a*l+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2+2}px`});babelHelpers.classPrivateFieldLooseBase(this,K)[K](r,s.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]+1,p-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]);babelHelpers.classPrivateFieldLooseBase(this,E)[E](d,i.left-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,i.top+Math.floor(i.height/2)-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u])}function se(e,s,i){++babelHelpers.classPrivateFieldLooseBase(this,y)[y];const l=-50+babelHelpers.classPrivateFieldLooseBase(this,y)[y]%10*10;const o=150;const[a,r,c,n,b]=e;const d=s.top+Math.floor(s.height/4);const p=i.top+Math.floor(i.height/4);const P=o/2+l;const f=2;t.Dom.style(r,{top:`${d}px`,left:`${s.right+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2+2}px`,width:`${P-2}px`});t.Dom.style(c,{top:s.top>i.top?`${p+7}px`:`${d+2}px`,left:`${s.right+P}px`,height:`${s.top>i.top?s.top-i.top-f*2:i.top-s.top-f*2+7}px`});t.Dom.style(n,{top:`${i.top+Math.floor((i.bottom-i.top)/2)-1}px`,left:`${i.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2-2}px`,width:`${P+6}px`});babelHelpers.classPrivateFieldLooseBase(this,K)[K](a,s.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,d-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]);babelHelpers.classPrivateFieldLooseBase(this,I)[I](b,i.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2+1,i.top+Math.floor(i.height/2)-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u])}function ie(e,s,i){++babelHelpers.classPrivateFieldLooseBase(this,H)[H];const l=-50+babelHelpers.classPrivateFieldLooseBase(this,H)[H]%10*10;const o=150;const[a,r,c,n,b]=e;const d=s.top+Math.floor(s.height/4);const p=i.top+Math.floor(i.height/4);const P=o/2-l;const f=2;t.Dom.style(r,{top:`${d}px`,left:`${s.left-P-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]-2}px`,width:`${P}px`});t.Dom.style(c,{top:s.top>i.top?`${p+7}px`:`${d+2}px`,left:`${s.left-o/2+l-3}px`,height:`${s.top>i.top?s.top-i.top-f*2:i.top-s.top-f*2+7}px`});t.Dom.style(n,{top:`${i.top+Math.floor((i.bottom-i.top)/2)}px`,left:`${s.left-o/2+l-1}px`,width:`${P+3}px`});babelHelpers.classPrivateFieldLooseBase(this,_)[_](a,s.left-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,d-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]);babelHelpers.classPrivateFieldLooseBase(this,E)[E](b,i.left-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,i.top+Math.floor(i.height/2)-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u])}function le(e,s,i){++babelHelpers.classPrivateFieldLooseBase(this,F)[F];const l=-50+babelHelpers.classPrivateFieldLooseBase(this,F)[F]%6*6;const o=s.left-i.right;const a=-1;const[r,c,n,b,d]=e;const p=s.top+Math.floor(s.height/4);const P=i.top+Math.floor(i.height/4);const f=o/2+l;const L=2;t.Dom.style(c,{top:`${p}px`,left:`${s.left-f-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]-1}px`,width:`${f}px`});t.Dom.style(n,{top:s.top>i.top?`${P+7}px`:`${p+2}px`,left:`${i.right+o/2-l-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2}px`,height:`${s.top>i.top?s.top-i.top-L*2:i.top-s.top-L*2+7}px`});t.Dom.style(b,{top:`${i.top+Math.floor((i.bottom-i.top)/2)}px`,left:`${i.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2-2}px`,width:`${o/2+a*l+2}px`});babelHelpers.classPrivateFieldLooseBase(this,_)[_](r,s.left-babelHelpers.classPrivateFieldLooseBase(this.constructor,v)[v]-babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2,p-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]);babelHelpers.classPrivateFieldLooseBase(this,I)[I](d,i.right-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u]+babelHelpers.classPrivateFieldLooseBase(this.constructor,h)[h]*2+1,i.top+Math.floor(i.height/2)-babelHelpers.classPrivateFieldLooseBase(this.constructor,u)[u])}function oe(e,s,l){const a=t.Tag.render(o||(o=i`
			<div class="ui-icon-set --chevron-right bizproc-designer-state-machine-workflow-activity-arrow"></div>
		`));t.Dom.append(a,e);t.Dom.style(e,{left:`${s}px`,top:`${l}px`})}function ae(e,s,l){const o=t.Tag.render(a||(a=i`
			<div class="ui-icon-set --chevron-right bizproc-designer-state-machine-workflow-activity-arrow"></div>
		`));t.Dom.append(o,e);t.Dom.style(e,{left:`${s}px`,top:`${l}px`,backgroundColor:"white",maxWidth:"9px"})}function re(e,s,l){const o=t.Tag.render(r||(r=i`
			<div class="ui-icon-set --chevron-left bizproc-designer-state-machine-workflow-activity-arrow"></div>
		`));t.Dom.append(o,e);t.Dom.style(e,{left:`${s}px`,top:`${l}px`,maxWidth:"12px"})}function ce(e,s,l){const o=t.Tag.render(c||(c=i`
			<div 
				class="ui-icon-set --chevron-left bizproc-designer-state-machine-workflow-activity-arrow"
				style="margin-left: -10px"
			></div>
		`));t.Dom.append(o,e);t.Dom.style(e,{left:`${s}px`,top:`${l}px`,backgroundColor:"white"})}function ne(e){this.statediv=e;const s=Array.from({length:this.childActivities.length},(()=>t.Tag.render(n||(n=i`
				<tr>
					<td align="right" valign="center" data-column="1"></td>
					<td align="center" valign="center"></td>
					<td align="left" valign="center" data-column="2"></td>
				</tr>
			`))));const l=this.childActivities.length%2*2;this.Table=t.Tag.render(b||(b=i`
			<table cellpadding="0" cellspacing="0" border="0" style="width: 100%;">
				<tbody>
					${0}
					<tr>
						<td align="right" valign="center" width="350px">
							${0}
						</td>
						<td align="center" valign="center" width="150px"></td>
						<td align="left" valign="center">
							${0}
						</td>
					</tr>
				</tbody>
			</table>
		`),s,l===0?babelHelpers.classPrivateFieldLooseBase(this,C)[C]():"&nbsp",l===2?babelHelpers.classPrivateFieldLooseBase(this,C)[C]():"&nbsp");t.Dom.append(this.Table,e);this.childActivities.forEach(((e,t)=>e.Draw(this.Table.rows[t].cells[t%2*2])));babelHelpers.classPrivateFieldLooseBase(this,N)[N](true)}function be(){return new s.Button({text:window.BPMESS.STM_ADD_STATUS_1,size:s.Button.Size.EXTRA_SMALL,color:s.Button.Color.LIGHT_BORDER,noCaps:true,onclick:(e,t)=>{babelHelpers.classPrivateFieldLooseBase(this,k)[k](t,e)}}).render()}function de(e,i){e.preventDefault();const l=this.childActivities.length;const o=window.CreateActivity("StateActivity");this.childActivities.push(o);o.parentActivity=this;o.Draw(this.Table.rows[l].cells[l%2*2]);const a=this.Table.insertRow(-1);a.insertCell(-1).align="right";a.insertCell(-1).align="center";a.insertCell(-1).align="left";if(i instanceof s.Button){i.renderTo(this.Table.rows[l+1].cells[(l+1)%2*2])}else{t.Dom.append(e.target,this.Table.rows[l+1].cells[(l+1)%2*2])}o.Settings()}function he(e){if(t.Dom.style(this.Table,"display")==="none"){return}const s=t.Dom.getPosition(this.Table);if(e||babelHelpers.classPrivateFieldLooseBase(this,f)[f]!==s.left||babelHelpers.classPrivateFieldLooseBase(this,L)[L]!==s.right){babelHelpers.classPrivateFieldLooseBase(this,f)[f]=s.left;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=s.right;babelHelpers.classPrivateFieldLooseBase(this,$)[$]()}setTimeout(babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this),1e3)}Object.defineProperty(W,d,{writable:true,value:5});Object.defineProperty(W,h,{writable:true,value:1});Object.defineProperty(W,p,{writable:true,value:18});Object.defineProperty(W,v,{writable:true,value:Math.floor(babelHelpers.classPrivateFieldLooseBase(W,p)[p]/2)});Object.defineProperty(W,u,{writable:true,value:Math.floor(babelHelpers.classPrivateFieldLooseBase(W,p)[p]/4)});Object.defineProperty(W,P,{writable:true,value:Math.floor(babelHelpers.classPrivateFieldLooseBase(W,p)[p]/8)});e.StateMachineWorkflowActivity=W})(this.window=this.window||{},BX,BX.UI);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:85:"/bitrix/activities/bitrix/emptyblockactivity/emptyblockactivity.min.js?17287331862243";s:6:"source";s:66:"/bitrix/activities/bitrix/emptyblockactivity/emptyblockactivity.js";s:3:"min";s:70:"/bitrix/activities/bitrix/emptyblockactivity/emptyblockactivity.min.js";s:3:"map";s:70:"/bitrix/activities/bitrix/emptyblockactivity/emptyblockactivity.map.js";}"*/
(function(i,e){"use strict";let t=i=>i,s,n,d;const r=window.BizProcActivity;var o=babelHelpers.classPrivateFieldLooseKey("draw");var a=babelHelpers.classPrivateFieldLooseKey("onHideClick");class c extends r{constructor(){super();Object.defineProperty(this,a,{value:l});Object.defineProperty(this,o,{value:h});this.Type="EmptyBlockActivity";this.BizProcActivityDraw=this.Draw;this.Draw=babelHelpers.classPrivateFieldLooseBase(this,o)[o].bind(this);this.CheckFields=()=>true;this.OnHideClick=babelHelpers.classPrivateFieldLooseBase(this,a)[a].bind(this)}}function h(i){if(this.childActivities.length===0){this.childActivities=[new window.SequenceActivity];this.childActivities[0].parentActivity=this}this.container=e.Tag.render(s||(s=t`<div class="parallelcontainer"></div>`));e.Dom.append(this.container,i);this.BizProcActivityDraw(this.container);this.activityContent=null;e.Dom.style(this.div,{position:"relative",top:"12px"});this.hideContainer=e.Tag.render(n||(n=t`
			<div 
				style="
					background: #FFFFFF;
					border: 1px #CCCCCC dashed;
					width: 250px;
					color: #AAAAAA;
					padding: 13px 0 3px 0;
					cursor: pointer;
				"
			>${0}</div>
		`),e.Text.encode(window.BPMESS.PARA_MIN));e.Event.bind(this.hideContainer,"click",this.OnHideClick.bind(this));e.Dom.append(this.hideContainer,this.container);this.childsContainer=e.Tag.render(d||(d=t`
			<table id="${0}" width="100%" cellspacing="0" cellpadding="0" border="0">
				<tbody>
					<tr>
						<td align="center" valign="center" width="15%"></td>
						<td align="center" valign="center" width="70%" style="border: 2px #dfdfdf dashed; padding: 10px"></td>
						<td align="center" valign="center" width="15%"></td>
					</tr>
				</tbody>
			</table>
		`),e.Text.encode(this.Name));e.Dom.append(this.childsContainer,this.container);if(this.Properties._DesMinimized==="Y"){e.Dom.hide(this.childsContainer)}else{e.Dom.hide(this.hideContainer)}this.childActivities[0].Draw(this.childsContainer.rows[0].cells[1])}function l(){this.Properties._DesMinimized=this.Properties._DesMinimized==="Y"?"N":"Y";e.Dom.toggle(this.childsContainer);e.Dom.toggle(this.hideContainer)}i.EmptyBlockActivity=c})(this.window=this.window||{},BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:102:"/bitrix/activities/bitrix/stateinitializationactivity/stateinitializationactivity.min.js?1728733186179";s:6:"source";s:84:"/bitrix/activities/bitrix/stateinitializationactivity/stateinitializationactivity.js";s:3:"min";s:88:"/bitrix/activities/bitrix/stateinitializationactivity/stateinitializationactivity.min.js";s:3:"map";s:88:"/bitrix/activities/bitrix/stateinitializationactivity/stateinitializationactivity.map.js";}"*/
StateInitializationActivity=function(){var t=new SequentialWorkflowActivity;t.Type="StateInitializationActivity";return t};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:98:"/bitrix/activities/bitrix/statefinalizationactivity/statefinalizationactivity.min.js?1728733186173";s:6:"source";s:80:"/bitrix/activities/bitrix/statefinalizationactivity/statefinalizationactivity.js";s:3:"min";s:84:"/bitrix/activities/bitrix/statefinalizationactivity/statefinalizationactivity.min.js";s:3:"map";s:84:"/bitrix/activities/bitrix/statefinalizationactivity/statefinalizationactivity.map.js";}"*/
StateFinalizationActivity=function(){var t=new SequentialWorkflowActivity;t.Type="StateFinalizationActivity";return t};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:117:"/bitrix/activities/bitrix/requestinformationoptionalactivity/requestinformationoptionalactivity.min.js?17287331861095";s:6:"source";s:98:"/bitrix/activities/bitrix/requestinformationoptionalactivity/requestinformationoptionalactivity.js";s:3:"min";s:102:"/bitrix/activities/bitrix/requestinformationoptionalactivity/requestinformationoptionalactivity.min.js";s:3:"map";s:102:"/bitrix/activities/bitrix/requestinformationoptionalactivity/requestinformationoptionalactivity.map.js";}"*/
RequestInformationOptionalActivity=function(){var l=new ParallelActivity;l.Type="RequestInformationOptionalActivity";l.__parallelActivityInitType="SequenceActivity";l.DrawParallelActivity=l.Draw;l.Draw=function(t){var e=_crt(1,4);e.style.fontSize="11px";e.rows[0].cells[1].style.background="url("+(l.Icon?l.Icon:"/bitrix/images/bizproc/act_icon.gif")+") 2px 2px no-repeat";e.rows[0].cells[1].style.height="24px";e.rows[0].cells[1].style.width="24px";e.rows[0].cells[2].align="left";e.rows[0].cells[2].innerHTML=HTMLEncode(l["Properties"]["Title"]);e.rows[0].cells[2].style.overflow="hidden";e.rows[0].cells[2].style.lineHeight="14px";e.rows[0].cells[0].width="33";e.rows[0].cells[0].align="left";e.rows[0].cells[0].innerHTML='&nbsp;<span style="color: #007700">'+BPMESS["BPRIOA_OK"]+"</span>";e.rows[0].cells[3].align="right";e.rows[0].cells[3].innerHTML='<span style="color: #770000">'+BPMESS["BPRIOA_CANCEL"]+"</span>&nbsp;";l.activityContent=e;l.activityHeight="30px";l.activityWidth="200px";l.DrawParallelActivity(t)};return l};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:79:"/bitrix/activities/bitrix/foreachactivity/foreachactivity.min.js?17287331862238";s:6:"source";s:60:"/bitrix/activities/bitrix/foreachactivity/foreachactivity.js";s:3:"min";s:64:"/bitrix/activities/bitrix/foreachactivity/foreachactivity.min.js";s:3:"map";s:64:"/bitrix/activities/bitrix/foreachactivity/foreachactivity.map.js";}"*/
(function(i,e){"use strict";let t=i=>i,s,n,d;const r=window.BizProcActivity;var a=babelHelpers.classPrivateFieldLooseKey("draw");var o=babelHelpers.classPrivateFieldLooseKey("onHideClick");class h extends r{constructor(){super();Object.defineProperty(this,o,{value:l});Object.defineProperty(this,a,{value:c});this.Type="ForEachActivity";this.BizProcActivityDraw=this.Draw.bind(this);this.Draw=babelHelpers.classPrivateFieldLooseBase(this,a)[a].bind(this);this.CheckFields=()=>true;this.OnHideClick=babelHelpers.classPrivateFieldLooseBase(this,o)[o].bind(this)}}function c(i){if(this.childActivities.length===0){this.childActivities=[new window.SequenceActivity];this.childActivities[0].parentActivity=this}this.container=e.Tag.render(s||(s=t`<div class="parallelcontainer"></div`));e.Dom.append(this.container,i);this.BizProcActivityDraw(this.container);this.activityContent=null;e.Dom.style(this.div,{position:"relative",top:"12px"});this.hideContainer=e.Tag.render(n||(n=t`
			<div 
				style="
					background: #fff;
					border: 1px #CCCCCC dashed;
					width: 250px;
					color: #aaa;
					padding: 13px 0 3px 0;
					cursor: pointer;
				"
			>${0}</div>
		`),e.Text.encode(window.BPMESS.PARA_MIN));e.Event.bind(this.hideContainer,"click",this.OnHideClick.bind(this));e.Dom.append(this.hideContainer,this.container);this.childsContainer=e.Tag.render(d||(d=t`
			<table id="${0}" width="100%" cellspacing="0" cellpadding="0" border="0">
				<tbody>
					<tr>
						<td align="center" valign="center" width="15%"></td>
						<td align="center" valign="center" width="70%" style="border: 2px #dfdfdf dashed; padding: 10px"></td>
						<td align="center" valign="center" width="15%"></td>
					</tr>
				</tbody>
			</table>
		`),e.Text.encode(this.Name));e.Dom.append(this.childsContainer,this.container);if(this.Properties._DesMinimized==="Y"){e.Dom.hide(this.childsContainer)}else{e.Dom.hide(this.hideContainer)}this.childActivities[0].Draw(this.childsContainer.rows[0].cells[1])}function l(){this.Properties._DesMinimized=this.Properties._DesMinimized==="Y"?"N":"Y";e.Dom.toggle(this.childsContainer);e.Dom.toggle(this.hideContainer)}i.ForEachActivity=h})(this.window=this.window||{},BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:102:"/bitrix/activities/bitrix/handleexternaleventactivity/handleexternaleventactivity.min.js?1728733186257";s:6:"source";s:84:"/bitrix/activities/bitrix/handleexternaleventactivity/handleexternaleventactivity.js";s:3:"min";s:88:"/bitrix/activities/bitrix/handleexternaleventactivity/handleexternaleventactivity.min.js";s:3:"map";s:88:"/bitrix/activities/bitrix/handleexternaleventactivity/handleexternaleventactivity.map.js";}"*/
(function(t){"use strict";const i=window.BizProcActivity;class n extends i{constructor(){super();this.Type="HandleExternalEventActivity"}}t.HandleExternalEventActivity=n})(this.window=this.window||{});
/* End */
;
; /* Start:"a:4:{s:4:"full";s:82:"/bitrix/activities/bitrix/parallelactivity/parallelactivity.min.js?172873318610896";s:6:"source";s:62:"/bitrix/activities/bitrix/parallelactivity/parallelactivity.js";s:3:"min";s:66:"/bitrix/activities/bitrix/parallelactivity/parallelactivity.min.js";s:3:"map";s:66:"/bitrix/activities/bitrix/parallelactivity/parallelactivity.map.js";}"*/
(function(e,i){"use strict";let t=e=>e,s,l,a,r,o;const n=window.BizProcActivity;var c=babelHelpers.classPrivateFieldLooseKey("copyBranch");var d=babelHelpers.classPrivateFieldLooseKey("addBranch");var h=babelHelpers.classPrivateFieldLooseKey("createBranch");var v=babelHelpers.classPrivateFieldLooseKey("deleteBranch");var b=babelHelpers.classPrivateFieldLooseKey("drawVLine");var p=babelHelpers.classPrivateFieldLooseKey("drawMoveBranchButtons");var P=babelHelpers.classPrivateFieldLooseKey("moveBranchToLeft");var y=babelHelpers.classPrivateFieldLooseKey("moveBranchToRight");var f=babelHelpers.classPrivateFieldLooseKey("isEventWithCtrlKey");var u=babelHelpers.classPrivateFieldLooseKey("swapBranch");var B=babelHelpers.classPrivateFieldLooseKey("swapNodes");var w=babelHelpers.classPrivateFieldLooseKey("refreshDelButton");var C=babelHelpers.classPrivateFieldLooseKey("onHideClick");var A=babelHelpers.classPrivateFieldLooseKey("draw");var F=babelHelpers.classPrivateFieldLooseKey("renderActivityContent");var L=babelHelpers.classPrivateFieldLooseKey("drawHideContainer");var H=babelHelpers.classPrivateFieldLooseKey("drawChildrenContainer");var m=babelHelpers.classPrivateFieldLooseKey("removeChild");var g=babelHelpers.classPrivateFieldLooseKey("removeResources");class D extends n{constructor(){super();Object.defineProperty(this,g,{value:W});Object.defineProperty(this,m,{value:Y});Object.defineProperty(this,H,{value:X});Object.defineProperty(this,L,{value:V});Object.defineProperty(this,F,{value:$});Object.defineProperty(this,A,{value:I});Object.defineProperty(this,C,{value:N});Object.defineProperty(this,w,{value:k});Object.defineProperty(this,B,{value:M});Object.defineProperty(this,u,{value:z});Object.defineProperty(this,f,{value:S});Object.defineProperty(this,y,{value:j});Object.defineProperty(this,P,{value:E});Object.defineProperty(this,p,{value:K});Object.defineProperty(this,b,{value:O});Object.defineProperty(this,v,{value:R});Object.defineProperty(this,h,{value:x});Object.defineProperty(this,d,{value:T});Object.defineProperty(this,c,{value:_});this.allowSort=false;this.Type="ParallelActivity";this.childActivities=[];this.__parallelActivityInitType="SequenceActivity";this.allowSort=false;this.copyBranch=babelHelpers.classPrivateFieldLooseBase(this,c)[c].bind(this);this.addBranch=babelHelpers.classPrivateFieldLooseBase(this,d)[d].bind(this);this.createBranch=babelHelpers.classPrivateFieldLooseBase(this,h)[h].bind(this);this.delBranch=e=>{babelHelpers.classPrivateFieldLooseBase(this,v)[v](e.target.parentNode.parentNode)};this.DrawVLine=babelHelpers.classPrivateFieldLooseBase(this,b)[b].bind(this);this.RefreshDelButton=babelHelpers.classPrivateFieldLooseBase(this,w)[w].bind(this);this.OnHideClick=babelHelpers.classPrivateFieldLooseBase(this,C)[C].bind(this);this.BizProcActivityDraw=this.Draw;this.Draw=babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this);this.ActivityRemoveChild=this.RemoveChild;this.RemoveChild=babelHelpers.classPrivateFieldLooseBase(this,m)[m].bind(this);this.BizProcActivityRemoveResources=this.RemoveResources;this.RemoveResources=babelHelpers.classPrivateFieldLooseBase(this,g)[g].bind(this);this.drawMoveElement=babelHelpers.classPrivateFieldLooseBase(this,p)[p].bind(this);this.moveToRight=e=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y](e.target.parentNode.parentNode,e)};this.moveToLeft=e=>{babelHelpers.classPrivateFieldLooseBase(this,P)[P](e.target.parentNode.parentNode,e)};this.swapBranch=babelHelpers.classPrivateFieldLooseBase(this,u)[u].bind(this)}}function _(e,i){babelHelpers.classPrivateFieldLooseBase(this,h)[h](this.childActivities[e],i!=null?i:e)}function T(){const e=this.childsContainer.rows[2].cells.length;babelHelpers.classPrivateFieldLooseBase(this,h)[h](this.__parallelActivityInitType,e-1)}function x(e,t){const s=window.CreateActivity(e);s.parentActivity=this;s.setCanBeActivated(this.getCanBeActivatedChild());this.childActivities.splice(t,0,s);for(let e=0;e<this.childsContainer.rows.length;e++){const s=this.childsContainer.rows[e].insertCell(t);i.Dom.attr(s,{align:"center",vAlign:"top"})}babelHelpers.classPrivateFieldLooseBase(this,b)[b](t);s.Draw(this.childsContainer.rows[2].cells[t]);babelHelpers.classPrivateFieldLooseBase(this,w)[w]()}function R(e){this.RemoveChild(this.childActivities[e.ind])}function O(e){i.Dom.attr(this.childsContainer.rows[0],"class","trLine");i.Dom.attr(this.childsContainer.rows[3],"class","trLine");i.Dom.style(this.childsContainer.rows[1].cells[e],"background","url(/bitrix/images/bizproc/act_line_bg.gif) 50% top repeat-y");i.Dom.style(this.childsContainer.rows[2].cells[e],"background","url(/bitrix/images/bizproc/act_line_bg.gif) 50% top repeat-y");i.Dom.attr(this.childsContainer.rows[2].cells[e],"vAlign","top");const l=this.childsContainer.rows[1].cells[e];i.Dom.attr(l,{height:"20",vAlign:"bottom"});const{root:a,remove:r}=i.Tag.render(s||(s=t`
			<div style="margin-top: 14px; display: none;">
				<div class="bizproc-designer-parallel-activity__del_br"
					ref="remove"
					title="${0}"
					alt="${0}">
					<div class="ui-icon-set --minus-60"></div>
				</div>
			</div>
		`),i.Text.encode(window.BPMESS.PARA_DEL),i.Text.encode(window.BPMESS.PARA_DEL));i.Event.bind(r,"click",babelHelpers.classPrivateFieldLooseBase(this,v)[v].bind(this,l));i.Dom.append(a,l);if(this.allowSort){babelHelpers.classPrivateFieldLooseBase(this,p)[p](e,l)}}function K(e,s){const{root:a,left:r,right:o}=i.Tag.render(l||(l=t`
			<div class="move-thread">
				<div
					ref="left" 
					class="ui-icon-set --chevron-left bizproc-designer-parallel-activity-move-arrow"
					title="${0}"
				></div>
				<div
					ref="right"
					class="ui-icon-set --chevron-right bizproc-designer-parallel-activity-move-arrow"
					title="${0}"
				></div>
			</div>
		`),i.Text.encode(window.BPMESS.PARA_MOVE_LEFT),i.Text.encode(window.BPMESS.PARA_MOVE_RIGHT));i.Event.bind(r,"click",babelHelpers.classPrivateFieldLooseBase(this,P)[P].bind(this,s));i.Event.bind(o,"click",babelHelpers.classPrivateFieldLooseBase(this,y)[y].bind(this,s));i.Dom.append(a,s)}function E(e,i){const t=e.ind;if(t!==0){if(babelHelpers.classPrivateFieldLooseBase(this,f)[f](i)){babelHelpers.classPrivateFieldLooseBase(this,c)[c](t,t)}else{babelHelpers.classPrivateFieldLooseBase(this,u)[u](t-1,t)}window.BPTemplateIsModified=true}}function j(e,i){const t=e.ind;if(t!==this.childActivities.length){if(babelHelpers.classPrivateFieldLooseBase(this,f)[f](i)){babelHelpers.classPrivateFieldLooseBase(this,c)[c](t,t+1)}else{babelHelpers.classPrivateFieldLooseBase(this,u)[u](t,t+1)}window.BPTemplateIsModified=true}}function S(e){return e.ctrlKey===true||e.metaKey===true}function z(e,i){const t=this.childActivities[e];this.childActivities[e]=this.childActivities[i];this.childActivities[i]=t;for(let t=1;t<3;t++){this.childsContainer.rows[t].cells[e].ind=i;this.childsContainer.rows[t].cells[i].ind=e;babelHelpers.classPrivateFieldLooseBase(this,B)[B](this.childsContainer.rows[t].cells[e],this.childsContainer.rows[t].cells[i])}}function M(e,t){const s=t.nextElementSibling;e.replaceWith(t);if(s){i.Dom.insertBefore(e,s)}else{i.Dom.append(e,t.parentNode)}}function k(){this.childActivities.forEach(((e,t)=>{i.Dom.style(this.childsContainer.rows[1].cells[t].childNodes[0],"display",this.childActivities.length>2?"block":"none");this.childsContainer.rows[1].cells[t].ind=t}))}function N(){this.Properties._DesMinimized=this.Properties._DesMinimized==="Y"?"N":"Y";BX.Dom.toggle(this.childsContainer);BX.Dom.toggle(this.hideContainer)}function I(e){if(this.childActivities.length===0){this.childActivities=[window.CreateActivity(this.__parallelActivityInitType),window.CreateActivity(this.__parallelActivityInitType)];this.childActivities[0].parentActivity=this;this.childActivities[0].setCanBeActivated(this.getCanBeActivatedChild());this.childActivities[1].parentActivity=this;this.childActivities[1].setCanBeActivated(this.getCanBeActivatedChild())}this.container=i.Tag.render(a||(a=t`<div class="parallelcontainer">${0}</div>`),babelHelpers.classPrivateFieldLooseBase(this,F)[F]());i.Dom.append(this.container,e);this.BizProcActivityDraw(this.container);this.activityContent=null;i.Dom.style(this.div,{position:"relative",top:"12px"});babelHelpers.classPrivateFieldLooseBase(this,L)[L]();babelHelpers.classPrivateFieldLooseBase(this,H)[H]();if(this.Properties._DesMinimized==="Y"){i.Dom.hide(this.childsContainer)}else{i.Dom.hide(this.hideContainer)}this.childActivities.forEach(((e,i)=>{babelHelpers.classPrivateFieldLooseBase(this,b)[b](i);e.Draw(this.childsContainer.rows[2].cells[i])}));babelHelpers.classPrivateFieldLooseBase(this,w)[w]()}function $(){if(!this.activityContent){var e;const s=(e=this.Icon)!=null?e:"/bitrix/images/bizproc/act_icon.gif";const{root:l,add:a}=i.Tag.render(r||(r=t`
				<table 
					cellpadding="0"
					cellspacing="0"
					border="0"
					style="width: 100%; font-size: 11px;"
				>
					<tbody>
						<tr>
							<td 
								align="center"
								valign="center"
								style="
									background: url('${0}') 2px 2px no-repeat;
									height: 24px;
									width: 24px;
								"
							></td>
							<td align="left" valign="center">
								${0}
							</td>
							<td
								ref="add"
								class="bizproc-designer-parallel-activity-add-branch-icon"
								title="${0}"
							></td>
						</tr>
					</tbody>
				</table>
			`),s,i.Text.encode(this.Properties.Title),i.Text.encode(window.BPMESS.PARA_ADD));i.Event.bind(a,"click",babelHelpers.classPrivateFieldLooseBase(this,d)[d].bind(this));this.activityContent=l;return this.activityContent}return""}function V(){this.hideContainer=i.Tag.render(o||(o=t`
			<div 
				style="
					background: #FFFFFF;
					border: 1px #CCCCCC dotted;
					width: 250px;
					color: #AAAAAA;
					padding: 13px 0 3px 0;
					cursor: pointer;
				"
			>${0}</div>
		`),i.Text.encode(window.BPMESS.PARA_MIN));i.Event.bind(this.hideContainer,"click",babelHelpers.classPrivateFieldLooseBase(this,C)[C].bind(this));i.Dom.append(this.hideContainer,this.container)}function X(){this.childsContainer=window._crt(4,this.childActivities.length);i.Dom.attr(this.childsContainer,"id",i.Text.encode(this.Name));i.Dom.style(this.childsContainer,"background","#FFFFFF");i.Dom.append(this.childsContainer,this.container)}function Y(e){const i=this.childActivities.indexOf(e);if(i!==-1){this.ActivityRemoveChild(e);if(this.childsContainer){this.childsContainer.rows[0].deleteCell(i);this.childsContainer.rows[1].deleteCell(i);this.childsContainer.rows[2].deleteCell(i);this.childsContainer.rows[3].deleteCell(i);babelHelpers.classPrivateFieldLooseBase(this,w)[w]()}}}function W(){this.BizProcActivityRemoveResources();if(this.container&&this.container.parentNode){i.Dom.remove(this.container);this.container=null;this.childsContainer=null}}e.ParallelActivity=D})(this.window=this.window||{},BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:74:"/bitrix/activities/bitrix/delayactivity/delayactivity.min.js?1728733186478";s:6:"source";s:56:"/bitrix/activities/bitrix/delayactivity/delayactivity.js";s:3:"min";s:60:"/bitrix/activities/bitrix/delayactivity/delayactivity.min.js";s:3:"map";s:60:"/bitrix/activities/bitrix/delayactivity/delayactivity.map.js";}"*/
(function(e){"use strict";const i=window.BizProcActivity;var t=babelHelpers.classPrivateFieldLooseKey("checkFields");class s extends i{constructor(){super();Object.defineProperty(this,t,{value:o});this.Type="DelayActivity";this.CheckFields=babelHelpers.classPrivateFieldLooseBase(this,t)[t].bind(this)}}function o(){return!!this.Properties.TimeoutDuration||!!this.Properties.TimeoutTime}e.DelayActivity=s})(this.window=this.window||{});
/* End */
;
; /* Start:"a:4:{s:4:"full";s:82:"/bitrix/activities/bitrix/sequenceactivity/sequenceactivity.min.js?172873318612466";s:6:"source";s:62:"/bitrix/activities/bitrix/sequenceactivity/sequenceactivity.js";s:3:"min";s:66:"/bitrix/activities/bitrix/sequenceactivity/sequenceactivity.min.js";s:3:"map";s:66:"/bitrix/activities/bitrix/sequenceactivity/sequenceactivity.map.js";}"*/
(function(e,i,s,t){"use strict";let a=e=>e,l,r,o,n;let c=null;function d(e,s,t){const a=t?window.arAllActivities[e].PRESETS.find((e=>e.ID===t)):null;const l=a?a.PROPERTIES:{};const r={Properties:{Title:a&&a.NAME||i.Text.encode(window.arAllActivities[e].NAME),...l},Type:window.arAllActivities[e].CLASS,Children:[]};c.AddActivity(window.CreateActivity(r),s)}function h(e,i){if(window.arUserParams&&BX.type.isArray(window.arUserParams.SNIPPETS)&&window.arUserParams.SNIPPETS[e]){c.AddActivity(window.CreateActivity(window.arUserParams.SNIPPETS[e]),i)}}const b=window.BizProcActivity;var v=babelHelpers.classPrivateFieldLooseKey("numberHeadRows");var p=babelHelpers.classPrivateFieldLooseKey("menuItems");var u=babelHelpers.classPrivateFieldLooseKey("onLineMouseOver");var P=babelHelpers.classPrivateFieldLooseKey("onLineMouseOut");var w=babelHelpers.classPrivateFieldLooseKey("initDragNDropHandlers");var f=babelHelpers.classPrivateFieldLooseKey("onDragging");var y=babelHelpers.classPrivateFieldLooseKey("onDrop");var m=babelHelpers.classPrivateFieldLooseKey("moveActivityToPosition");var g=babelHelpers.classPrivateFieldLooseKey("checkMovingCycle");var A=babelHelpers.classPrivateFieldLooseKey("copyActivityToPosition");var H=babelHelpers.classPrivateFieldLooseKey("removeChild");var L=babelHelpers.classPrivateFieldLooseKey("refreshArrows");var F=babelHelpers.classPrivateFieldLooseKey("removeResources");var B=babelHelpers.classPrivateFieldLooseKey("onClick");var D=babelHelpers.classPrivateFieldLooseKey("getAllActivitiesMenuItems");var E=babelHelpers.classPrivateFieldLooseKey("getGroupMenuItems");var S=babelHelpers.classPrivateFieldLooseKey("addMyActivitiesMenuItem");var C=babelHelpers.classPrivateFieldLooseKey("getActivityMenuItem");var M=babelHelpers.classPrivateFieldLooseKey("renderActivityMenuItemNode");var T=babelHelpers.classPrivateFieldLooseKey("onGroupItemSubMenuShow");var O=babelHelpers.classPrivateFieldLooseKey("addActivity");var I=babelHelpers.classPrivateFieldLooseKey("createArrow");var N=babelHelpers.classPrivateFieldLooseKey("draw");class R extends b{constructor(){super();Object.defineProperty(this,N,{value:te});Object.defineProperty(this,I,{value:se});Object.defineProperty(this,O,{value:ie});Object.defineProperty(this,T,{value:ee});Object.defineProperty(this,M,{value:Z});Object.defineProperty(this,C,{value:Q});Object.defineProperty(this,S,{value:J});Object.defineProperty(this,E,{value:V});Object.defineProperty(this,D,{value:Y});Object.defineProperty(this,B,{value:G});Object.defineProperty(this,F,{value:$});Object.defineProperty(this,L,{value:q});Object.defineProperty(this,H,{value:X});Object.defineProperty(this,A,{value:U});Object.defineProperty(this,g,{value:z});Object.defineProperty(this,m,{value:W});Object.defineProperty(this,y,{value:k});Object.defineProperty(this,f,{value:x});Object.defineProperty(this,w,{value:_});Object.defineProperty(this,P,{value:K});Object.defineProperty(this,u,{value:j});Object.defineProperty(this,v,{writable:true,value:0});Object.defineProperty(this,p,{writable:true,value:void 0});this.Type="SequenceActivity";this.childsContainer=null;babelHelpers.classPrivateFieldLooseBase(this,w)[w]();this.LineMouseOver=babelHelpers.classPrivateFieldLooseBase(this,u)[u];this.LineMouseOut=babelHelpers.classPrivateFieldLooseBase(this,P)[P];this.OnClick=e=>{babelHelpers.classPrivateFieldLooseBase(this,B)[B](e.target)};this.ondragging=babelHelpers.classPrivateFieldLooseBase(this,f)[f].bind(this);this.ondrop=babelHelpers.classPrivateFieldLooseBase(this,y)[y].bind(this);this.ActivityRemoveChild=this.RemoveChild;this.RemoveChild=babelHelpers.classPrivateFieldLooseBase(this,H)[H].bind(this);this.RemoveResources=babelHelpers.classPrivateFieldLooseBase(this,F)[F].bind(this);this.AddActivity=babelHelpers.classPrivateFieldLooseBase(this,O)[O].bind(this);this.CreateLine=babelHelpers.classPrivateFieldLooseBase(this,I)[I].bind(this);this.ActivityDraw=this.Draw;this.Draw=babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this)}get iHead(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v]}set iHead(e){if(i.Type.isInteger(e)&&e>=0){babelHelpers.classPrivateFieldLooseBase(this,v)[v]=e}}}function j(){i.Dom.style(this.parentNode,"backgroundImage","url(/bitrix/images/bizproc/arr_over.gif)")}function K(){i.Dom.style(this.parentNode,"backgroundImage","url(/bitrix/images/bizproc/arr.gif)")}function _(){this.lastDrop=false;this.h1id=window.DragNDrop.AddHandler("ondragging",babelHelpers.classPrivateFieldLooseBase(this,f)[f].bind(this));this.h2id=window.DragNDrop.AddHandler("ondrop",babelHelpers.classPrivateFieldLooseBase(this,y)[y].bind(this))}function x(e,s,t){if(this.childsContainer){for(let e=0;e<=this.childActivities.length;e++){const a=this.childsContainer.rows[e*2+this.iHead].cells[0].childNodes[0];const l=i.Dom.getPosition(a);if(l.left<s&&s<l.right&&l.top<t&&t<l.bottom){a.onmouseover();this.lastDrop=a;return}}if(this.lastDrop){this.lastDrop.onmouseout();this.lastDrop=false}}}function k(e,i,s){if(this.childsContainer&&this.lastDrop){if(window.DragNDrop.obj.parentActivity&&s.ctrlKey===false&&s.metaKey===false){babelHelpers.classPrivateFieldLooseBase(this,m)[m](window.DragNDrop.obj,this.lastDrop)}else{babelHelpers.classPrivateFieldLooseBase(this,A)[A](window.DragNDrop.obj,this.lastDrop)}this.lastDrop.onmouseout();this.lastDrop=false}}function W(e,i){const s=e.parentActivity;const t=s.childActivities.findIndex((i=>i.Name===e.Name));const a=i.ind;if(s.Name!==this.Name||t!==a&&t+1!==a){if(babelHelpers.classPrivateFieldLooseBase(this,g)[g](e)){s.childsContainer.deleteRow(t*2+1+s.iHead);s.childsContainer.deleteRow(t*2+1+s.iHead);s.childActivities.splice(t,1);babelHelpers.classPrivateFieldLooseBase(this,L)[L](s);babelHelpers.classPrivateFieldLooseBase(this,O)[O](e,i.ind)}else{alert(window.BPMESS.BPSA_ERROR_MOVE_1)}}}function z(e){let i=this;while(i){if(e.Name===i.Name){return false}i=i.parentActivity}return true}function U(e,i){const s=window.CreateActivity(e);this.AddActivity(s,i.ind)}function X(e){const i=this.childActivities.indexOf(e);if(i>=0){this.ActivityRemoveChild(e);if(this.childsContainer){this.childsContainer.deleteRow([i*2+1+this.iHead]);this.childsContainer.deleteRow([i*2+1+this.iHead]);babelHelpers.classPrivateFieldLooseBase(this,L)[L](this)}}}function q(e){for(let i=0;i<=e.childActivities.length;i++){e.childsContainer.rows[i*2+e.iHead].cells[0].childNodes[0].ind=i}}function $(){window.DragNDrop.RemoveHandler("ondragging",this.h1id);window.DragNDrop.RemoveHandler("ondrop",this.h2id);if(this.childsContainer&&this.childsContainer.parentNode){i.Dom.remove(this.childsContainer);this.childsContainer=null}}function G(e){c=this;const s=new t.Menu({bindElement:e,id:`all-worfklow-activity-${i.Text.getRandom()}`,minWidth:190,autoHide:true,zIndexOptions:{alwaysOnTop:true},cacheable:false,items:babelHelpers.classPrivateFieldLooseBase(this,D)[D](),subMenuOptions:{maxWidth:850,maxHeight:600}});s.show()}function Y(){if(babelHelpers.classPrivateFieldLooseBase(this,p)[p]){babelHelpers.classPrivateFieldLooseBase(this,S)[S]();return babelHelpers.classPrivateFieldLooseBase(this,p)[p]}const e=babelHelpers.classPrivateFieldLooseBase(this,E)[E]();Object.entries(window.arAllActivities).forEach((([s,t])=>{if((s!=="setstateactivity"||window.rootActivity.Type!==this.Type)&&!t.EXCLUDED&&t.CATEGORY){var a;const l=(a=t.CATEGORY.OWN_ID)!=null?a:t.CATEGORY.ID;if(e[l]){e[l].items.push(babelHelpers.classPrivateFieldLooseBase(this,C)[C](s,t));if(i.Type.isArrayFilled(t.PRESETS)){t.PRESETS.forEach((i=>{e[l].items.push(babelHelpers.classPrivateFieldLooseBase(this,C)[C](s,t,i))}))}}}}));if(e.rest&&i.Reflection.getClass("BX.rest.Marketplace")){e.rest.items.push({className:"bizproc-designer-sequence-activity-menu-item-icon",html:babelHelpers.classPrivateFieldLooseBase(this,M)[M](window.BPMESS.BPSA_MARKETPLACE_ADD_TITLE_2,window.BPMESS.BPSA_MARKETPLACE_ADD_DESCR_3),title:window.BPMESS.BPSA_MARKETPLACE_ADD_DESCR_3,dataset:{icon:"/bitrix/images/bizproc/act_icon_plus.png",name:window.BPMESS.BPSA_MARKETPLACE_ADD_TITLE_2},onclick:(e,i)=>{BX.rest.Marketplace.open({},"auto_pb");i.getMenuWindow().getParentMenuWindow().close()}})}babelHelpers.classPrivateFieldLooseBase(this,p)[p]=Object.values(e).filter((e=>e.items.length>0));babelHelpers.classPrivateFieldLooseBase(this,S)[S]();return babelHelpers.classPrivateFieldLooseBase(this,p)[p]}function V(){const e={};Object.entries(window.arAllActGroups).forEach((([i,s])=>{e[i]={id:i,text:s,items:[],events:{"SubMenu:onShow":babelHelpers.classPrivateFieldLooseBase(this,T)[T]}}}));return e}function J(){const e=babelHelpers.classPrivateFieldLooseBase(this,p)[p].findIndex((e=>e.id==="MyActivity"));if(e>=0){babelHelpers.classPrivateFieldLooseBase(this,p)[p].splice(e,1)}if(window.arUserParams&&i.Type.isArrayFilled(window.arUserParams.SNIPPETS)){const e={id:"MyActivity",text:window.BPMESS.BPSA_MY_ACTIVITIES_1,items:[],events:{"SubMenu:onShow":babelHelpers.classPrivateFieldLooseBase(this,T)[T]}};window.arUserParams.SNIPPETS.forEach(((i,s)=>{var t;e.items.push({className:"bizproc-designer-sequence-activity-menu-item-icon",html:babelHelpers.classPrivateFieldLooseBase(this,M)[M](i.Properties.Title,""),dataset:{icon:(t=i.Icon)!=null?t:"/bitrix/images/bizproc/act_icon.gif",name:i.Properties.Title},title:i.Properties.Title,onclick:(e,i)=>{h(s,i.getMenuWindow().getParentMenuWindow().bindElement.ind);i.getMenuWindow().getParentMenuWindow().close()}})}));babelHelpers.classPrivateFieldLooseBase(this,p)[p].push(e)}}function Q(e,i,s){var t;const a=s&&s.DESCRIPTION?s.DESCRIPTION:i.DESCRIPTION;return{onclick:(i,t)=>{d(e,t.getMenuWindow().getParentMenuWindow().bindElement.ind,s?s.ID:null);t.getMenuWindow().getParentMenuWindow().close()},className:"bizproc-designer-sequence-activity-menu-item-icon",html:babelHelpers.classPrivateFieldLooseBase(this,M)[M](s?s.NAME:i.NAME,a),title:a,dataset:{icon:(t=i.ICON)!=null?t:"/bitrix/images/bizproc/act_icon.gif",name:i.NAME}}}function Z(e,s){return i.Tag.render(l||(l=a`
			<div style="line-height: normal; overflow: hidden; text-overflow: ellipsis;">
				<span><b>${0}</b></span>
				<br/>
				<span>${0}</span>
			</div>
		`),i.Text.encode(e),i.Text.encode(s))}function ee(e){const s=e.getTarget();if(s.getSubMenu()&&s.getSubMenu().getMenuItems()){s.getSubMenu().getMenuItems().forEach((e=>{const s=e.layout.item.querySelector(".menu-popup-item-icon");i.Dom.append(i.Tag.render(r||(r=a`<img src="${0}" alt="${0}"/>`),i.Text.encode(e.dataset.icon),i.Text.encode(e.dataset.name)),s)}))}}function ie(e,s){this.childActivities.splice(s,0,e);e.parentActivity=this;e.setCanBeActivated(this.getCanBeActivatedChild());const t=this.childsContainer.insertRow(s*2+1+this.iHead).insertCell(-1);i.Dom.attr(t,{align:"center",vAlign:"center"});e.Draw(t);const a=this.childsContainer.insertRow(s*2+2+this.iHead).insertCell(-1);i.Dom.attr(a,{align:"center",vAlign:"center"});babelHelpers.classPrivateFieldLooseBase(this,I)[I](s+1);babelHelpers.classPrivateFieldLooseBase(this,L)[L](this);window.BPTemplateIsModified=true}function se(e){i.Dom.style(this.childsContainer.rows[e*2+this.iHead].cells[0],{height:"40px",background:"url(/bitrix/images/bizproc/arr.gif) no-repeat scroll 50% 50%"});const s=BX.Dom.create("img",{attrs:{src:"/bitrix/images/1.gif",width:"28",height:"21"}});s.onmouseover=babelHelpers.classPrivateFieldLooseBase(this,u)[u];s.onmouseout=babelHelpers.classPrivateFieldLooseBase(this,P)[P];s.ind=e;i.Event.bind(s,"click",babelHelpers.classPrivateFieldLooseBase(this,B)[B].bind(this,s));i.Dom.append(s,this.childsContainer.rows[e*2+this.iHead].cells[0])}function te(e){const s=Array.from({length:this.iHead+this.childActivities.length*2},(()=>i.Tag.render(o||(o=a`
				<tr><td align="center" valign="center"></td></tr>
			`))));this.childsContainer=i.Tag.render(n||(n=a`
			<table 
				class="seqactivitycontainer"
				id="${0}"
				width="100%"
				cellspacing="0"
				cellpadding="0"
				border="0"
			>
				<tbody>
					<tr><td align="center" valign="center"></td></tr>
					${0}
				</tbody>
			</table>
		`),i.Text.encode(this.Name),s);i.Dom.append(this.childsContainer,e);babelHelpers.classPrivateFieldLooseBase(this,I)[I](0);this.childActivities.forEach(((e,s)=>{e.Draw(this.childsContainer.rows[s*2+1+this.iHead].cells[0]);babelHelpers.classPrivateFieldLooseBase(this,I)[I](i.Text.toInteger(s)+1)}));if(this.AfterSDraw){this.AfterSDraw()}}e.SequenceActivity=R})(this.window=this.window||{},BX,BX.Event,BX.Main);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:102:"/bitrix/activities/bitrix/sequentialworkflowactivity/sequentialworkflowactivity.min.js?172873318611430";s:6:"source";s:82:"/bitrix/activities/bitrix/sequentialworkflowactivity/sequentialworkflowactivity.js";s:3:"min";s:86:"/bitrix/activities/bitrix/sequentialworkflowactivity/sequentialworkflowactivity.min.js";s:3:"map";s:86:"/bitrix/activities/bitrix/sequentialworkflowactivity/sequentialworkflowactivity.map.js";}"*/
SequentialWorkflowActivity=function(){var e=new SequenceActivity;e.Type="SequentialWorkflowActivity";e.swfWorkspaceDiv=null;e.swfToolBoxDiv=null;e.Table=null;e.hSnippid1=false;e.onScroll=function(){var t=BX("bx-panel");if(!t)return;var i=0;if(BX.hasClass(t,"bx-panel-fixed")){var l=BX.pos(t);i=l.height}var r=BX.GetWindowInnerSize();var o=BX.pos(e.swfWorkspaceDiv);if(o.height>r.innerHeight){var s=BX.pos(e.Table.rows[0].cells[2]);var a=BX.GetWindowScrollPos();if(a.scrollTop>s.top-i){e.swfToolboxDiv.style.position="fixed";e.swfToolboxDiv.style.top=i+"px";e.swfToolboxDiv.style.overflowY="auto";e.swfToolboxDiv.style.height=r.innerHeight-i+"px";e.swfToolboxDiv.style.width="200px";e.swfToolboxDiv.style.left=s.left-a.scrollLeft+0+"px"}else if(a.scrollTop<s.top-i){e.swfToolboxDiv.style.position="static"}if(a.scrollTop+r.innerHeight>s.bottom){e.swfToolboxDiv.style.height=s.bottom-a.scrollTop-i+"px"}}else{e.swfToolboxDiv.style.position="static"}};e.UpdateButtonPanel=function(){if(BX.UI.ButtonPanel&&BX.UI.ButtonPanel.pinner){BX.UI.ButtonPanel.pinner.onChange()}};e.DrawSequenceActivity=e.Draw;e.Draw=function(t){requestAnimationFrame((()=>{e.UpdateButtonPanel()}));if(!window.dlgSnippetsSettings){window.dlgSnippetsSettings=new BX.CDialog({content:'<table width="100%"><tr><td align="right" width="40%">'+BPMESS["SEQWF_SNIP_NAME"]+'</td><td width="60%"><input type="hidden" id="snippsid" value=""><input size="40" id="snippstitle" value=""></td></tr><tr><td align="right" width="40%"></td><td width="60%" style="height:100px"></td></tr><tr><td align="right" width="40%"></td><td width="60%"><input type="button" id="snippsdel" value="'+BPMESS["SEQWF_SNIP_DEL_1"]+'"></td></tr></table>',title:BPMESS["SEQWF_SNIP_TITLE_1"],height:200,width:400,buttons:[{title:BX.message("JS_CORE_WINDOW_SAVE"),id:"savebtn",name:"savebtn",action:function(){var e=window.__lastSnippet;var t=e._ind;arUserParams["SNIPPETS"][t]["Properties"]["Title"]=BX("snippstitle").value;e.childNodes[0].rows[0].cells[1].innerHTML=HTMLEncode(document.getElementById("snippstitle").value);this.parentWindow.Close();BCPSaveUserParams()}},BX.CDialog.prototype.btnCancel]});setTimeout((function(){BX("snippsdel").onclick=function(){if(confirm(BPMESS["SEQWF_CONF_1"])){var e=window.__lastSnippet;var t=e._ind;arUserParams["SNIPPETS"].splice(t,1);var i=e.parentNode;BX.remove(e);for(var l=1;l<i.childNodes.length;l++)i.childNodes[l]._ind=l-1;window.dlgSnippetsSettings.Close();BCPSaveUserParams()}}}),1e3)}e.Table=t.appendChild(_crt(1,3));{window.onscroll=e.onScroll;window.onresize=e.onScroll}e.hSnippid1=DragNDrop.AddHandler("ondragging",e.ondragging2);e.hSnippid2=DragNDrop.AddHandler("ondrop",e.ondrop2);e.swfWorkspaceDiv=e.Table.rows[0].cells[0].appendChild(document.createElement("DIV"));e.swfWorkspaceDiv.className="swfworkspace";if(parseInt(t.clientHeight)>50)e.swfWorkspaceDiv.style.height=parseInt(t.clientHeight)+"px";e.ShowActivities(e.Table.rows[0].cells[2]);e._table=e.swfWorkspaceDiv.appendChild(_crt(3,1));e.Table.rows[0].cells[1].style.width="0px";e.Table.rows[0].cells[1].innerHTML='<img src="/bitrix/images/1.gif" width="0">';e.Table.rows[0].cells[2].style.width="200px";e.Table.rows[0].cells[0].vAlign="top";e.Table.rows[0].cells[2].vAlign="top";e.Table.rows[0].cells[2].align="left";e.Table.rows[0].cells[2].appendChild(document.createElement("DIV")).style.width="200px";var i=e._table.rows[0].cells[0].appendChild(document.createElement("DIV"));i.style.margin="0px auto";i.style.textAlign="center";i.style.width="120px";i.innerHTML='<div style="background: url(/bitrix/images/bizproc/beg_bg.gif);"><div style="background: url(/bitrix/images/bizproc/beg_r.gif) right top no-repeat;"><div style="background: url(/bitrix/images/bizproc/beg_l.gif) left top no-repeat; height: 23px;"><div style="padding-top: 3px; font-size: 12px; color:#194d0b;">'+BPMESS["SEQWF_BEG"]+"</div></div></div></div>";e.DrawActivities();var l=e._table.rows[2].cells[0].appendChild(document.createElement("DIV"));l.style.margin="0px auto";l.style.textAlign="center";l.style.width="120px";l.innerHTML='<div style="background: url(/bitrix/images/bizproc/beg_bg.gif);"><div  style="background: url(/bitrix/images/bizproc/beg_r.gif) right top no-repeat;"><div style="background: url(/bitrix/images/bizproc/beg_l.gif) left top no-repeat; height: 23px;"><div style="padding-top: 3px; font-size: 12px; color:#194d0b;">'+BPMESS["SEQWF_END"]+"</div></div></div></div>"};e.DrawActivities=function(){while(e._table.rows[1].cells[0].childNodes.length>0)e._table.rows[1].cells[0].removeChild(e._table.rows[1].cells[0].childNodes[0]);e.DrawSequenceActivity(e._table.rows[1].cells[0])};e.DrawGroup=function(t){var i=e.swfToolboxDiv.childNodes.length;var l=e.swfToolboxDiv.appendChild(document.createElement("DIV"));if(!arUserParams["TOOLBOX_GROUPS"])arUserParams["TOOLBOX_GROUPS"]=[];if(arUserParams["TOOLBOX_GROUPS"][i]==true)l.className="swftoolboxgroupopened";else l.className="swftoolboxgroupclosed";l.swftoolboxid=i;l.onclick=function(t){requestAnimationFrame((()=>{e.UpdateButtonPanel()}));if(this.className=="swftoolboxgroupclosed"){this.className="swftoolboxgroupopened";arUserParams["TOOLBOX_GROUPS"][this.swftoolboxid]=true}else{this.className="swftoolboxgroupclosed";arUserParams["TOOLBOX_GROUPS"][this.swftoolboxid]=false}BCPSaveUserParams()};var r=l.appendChild(document.createElement("DIV"));r.className="swftoolboxgroupheader";r.innerHTML='<div class="t"><div class="tr"><div class="tl"><div class="imarr"></div><div class="swftoolboxgrheadtext" title="'+HTMLEncode(t)+'">'+HTMLEncode(t)+"</div></div></div></div>";var o=l.appendChild(document.createElement("DIV"));o.className="swftoolboxgrouplist";return o};e.DrawGroupItem=function(e,t,i,l){var r,o,s;r=e.appendChild(document.createElement("DIV"));r.onclick=function(e){BX.PreventDefault(e)};if(t["NAME"]!==undefined)r.activityTemplate={Properties:{Title:t["NAME"]},Type:t["CLASS"],Children:[],Icon:t["ICON"]};else r.activityTemplate=t;var a=r.appendChild(_crt(1,3));a.rows[0].style.height="30px";a.rows[0].cells[0].style.width="30px";a.rows[0].cells[0].style.minWidth="30px";if(!r.activityTemplate["Icon"]&&arAllActivities[r.activityTemplate["Type"].toLowerCase()])r.activityTemplate["Icon"]=arAllActivities[r.activityTemplate["Type"].toLowerCase()]["ICON"];if(r.activityTemplate["Icon"])a.rows[0].cells[0].style.background="url("+r.activityTemplate["Icon"]+") 3px 3px no-repeat";else a.rows[0].cells[0].style.background="url(/bitrix/images/bizproc/act_icon.gif) 3px 3px no-repeat";a.rows[0].cells[0].style.cursor="pointer";a.rows[0].cells[1].style.cursor="pointer";a.rows[0].cells[1].style.fontSize="11px";a.rows[0].cells[1].innerHTML=HTMLEncode(r.activityTemplate["Properties"]["Title"]);a.rows[0].cells[1].align="left";if(i){a.rows[0].cells[2].style.width="14px";a.rows[0].cells[2].style.cursor="pointer";a.rows[0].cells[2].innerHTML='<img src="/bitrix/themes/.default/public/popup/pencil.gif" hspace="2">';a.rows[0].cells[2].onmousedown=function(e){return BX.PreventDefault(e)};r._ind=l;a.rows[0].cells[2].onclick=function(e){window.__lastSnippet=this.parentNode.parentNode.parentNode.parentNode;BX("snippstitle").value=r.activityTemplate["Properties"]["Title"];BX("snippsid").value=l;window.dlgSnippetsSettings.Show();return BX.PreventDefault(e)}}a.insertRow(-1);a.rows[1].insertCell(-1).innerHTML='<table width="100%" style="border-collapse: collapse" cellpadding="0" cellspacing="0" border="0"><tr><td width="5"></td><td style="border-bottom: 1px #EBEBEB solid; height: 1px; font-size: 1px;"><img src="/bitrix/images/1.gif" width="1" height="1"></td><td width="5"></td></tr></table>';a.rows[1].cells[0].colSpan="3";r.onmousedown=function(e){if(!e)e=window.event;var t=DragNDrop.StartDrag(e,this.activityTemplate);t.innerHTML=this.innerHTML;t.style.width=this.parentNode.offsetWidth+"px"}};e.DrawMarketplaceItem=function(e){var t,i,l;t=e.appendChild(document.createElement("DIV"));t.onclick=function(e){BX.PreventDefault(e);BX.rest.Marketplace.open({},"auto_pb")};var r=t.appendChild(_crt(1,3));r.rows[0].style.height="30px";r.rows[0].cells[0].style.width="30px";r.rows[0].cells[0].style.background="url(/bitrix/images/bizproc/act_icon_plus.png) 3px 3px no-repeat";r.rows[0].cells[0].style.cursor="pointer";r.rows[0].cells[1].style.cursor="pointer";r.rows[0].cells[1].style.fontSize="11px";r.rows[0].cells[1].innerHTML=HTMLEncode(BPMESS["SEQWF_MARKETPLACE_ADD"]);r.rows[0].cells[1].align="left";r.insertRow(-1);r.rows[1].insertCell(-1).innerHTML='<table width="100%" style="border-collapse: collapse" cellpadding="0" cellspacing="0" border="0"><tr><td width="5"></td><td style="border-bottom: 1px #EBEBEB solid; height: 1px; font-size: 1px;"><img src="/bitrix/images/1.gif" width="1" height="1"></td><td width="5"></td></tr></table>';r.rows[1].cells[0].colSpan="3"};e.ShowActivities=function(t){e.swfToolboxDiv=t.appendChild(document.createElement("DIV"));if(parseInt(t.clientHeight)>50)e.swfToolboxDiv.style.height=parseInt(t.clientHeight)+"px";e.swfToolboxDiv.style.overflowX="hidden";e.swfToolboxDiv.className="swftoolbox";var i,l;for(i in arAllActGroups){l=null;for(var r in arAllActivities){if(!arAllActivities.hasOwnProperty(r))continue;if(arAllActivities[r]["EXCLUDED"]||!arAllActivities[r]["CATEGORY"])continue;var o=arAllActivities[r]["CATEGORY"]["ID"];if(arAllActivities[r]["CATEGORY"]["OWN_ID"])o=arAllActivities[r]["CATEGORY"]["OWN_ID"];if(o!=i)continue;if(r=="setstateactivity"&&rootActivity.Type==e.Type)continue;if(l===null)l=e.DrawGroup(arAllActGroups[i]);e.DrawGroupItem(l,arAllActivities[r]);const t=arAllActivities[r]["PRESETS"];if(BX.Type.isArrayFilled(t)){t.forEach((t=>{const i={Properties:{Title:t["NAME"],...t["PROPERTIES"]},Type:arAllActivities[r]["CLASS"],Children:[],Icon:arAllActivities[r]["ICON"]};e.DrawGroupItem(l,i)}))}}if(i==="rest"&&BX.getClass("BX.rest.Marketplace")){if(l===null){l=e.DrawGroup(arAllActGroups[i])}e.DrawMarketplaceItem(l)}}var s=e.DrawGroup(BPMESS["SEQWF_SNIP_1"]);e.divSnippets=s;var a=s.appendChild(document.createElement("DIV"));a.style.padding="4px";var n=a.appendChild(document.createElement("DIV"));n.style.padding="7px 5px 7px 5px";n.style.textAlign="center";n.style.color="#AAAAAA";n.style.border="1px dashed #DDDDDD";n.innerHTML=BPMESS["SEQWF_SNIP_DD_1"];e.drdrop=n;arUserParams["SNIPPETS"]=arUserParams["SNIPPETS"]||[];for(var p in arUserParams["SNIPPETS"]){if(!arUserParams["SNIPPETS"].hasOwnProperty(p))continue;e.DrawGroupItem(e.divSnippets,arUserParams["SNIPPETS"][p],true,p)}};e.lastDrop2=false;e.ondragging2=function(t,i,l){var r=BX.pos(e.drdrop);if(r.left<i&&i<r.right&&r.top<l&&l<r.bottom){e.drdrop.style.border="1px dashed #333333";e.lastDrop2=true;return}if(e.lastDrop2){e.drdrop.style.border="1px dashed #DDDDDD";e.lastDrop2=false}};e.ondrop2=function(t,i,l){if(e.lastDrop2){var r=CreateActivity(DragNDrop.obj);e.DrawGroupItem(e.divSnippets,r,true,arUserParams["SNIPPETS"].length);arUserParams["SNIPPETS"].push(r.Serialize());BCPSaveUserParams();e.drdrop.style.border="1px dashed #DDDDDD";e.lastDrop2=false}};e.RemoveResourcesSequenceActivity=e.RemoveResources;e.RemoveResources=function(){requestAnimationFrame((()=>{e.UpdateButtonPanel()}));if(e.hSnippid1){DragNDrop.RemoveHandler("ondragging",e.hSnippid1);DragNDrop.RemoveHandler("ondrop",e.hSnippid2);e.hSnippid1=false}e.RemoveResourcesSequenceActivity();if(e.Table){e.Table.parentNode.removeChild(e.Table);e.Table=null}};return e};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:76:"/bitrix/activities/bitrix/stateactivity/stateactivity.min.js?172873318618087";s:6:"source";s:56:"/bitrix/activities/bitrix/stateactivity/stateactivity.js";s:3:"min";s:60:"/bitrix/activities/bitrix/stateactivity/stateactivity.min.js";s:3:"map";s:60:"/bitrix/activities/bitrix/stateactivity/stateactivity.map.js";}"*/
(function(e,i,t,s){"use strict";let a=e=>e,l,o,n,r,d,c,v,b;var h=babelHelpers.classPrivateFieldLooseKey("sequenceHeader");var p=babelHelpers.classPrivateFieldLooseKey("sequenceContent");var y=babelHelpers.classPrivateFieldLooseKey("sequenceFooter");var u=babelHelpers.classPrivateFieldLooseKey("init");var P=babelHelpers.classPrivateFieldLooseKey("draw");var f=babelHelpers.classPrivateFieldLooseKey("reDraw");var A=babelHelpers.classPrivateFieldLooseKey("onRemoveClick");var m=babelHelpers.classPrivateFieldLooseKey("removeResources");var w=babelHelpers.classPrivateFieldLooseKey("initDragNDropHandlers");var H=babelHelpers.classPrivateFieldLooseKey("onDragging");var L=babelHelpers.classPrivateFieldLooseKey("onDrop");var B=babelHelpers.classPrivateFieldLooseKey("renderTitle");var F=babelHelpers.classPrivateFieldLooseKey("renderContent");var T=babelHelpers.classPrivateFieldLooseKey("renderChildren");var g=babelHelpers.classPrivateFieldLooseKey("resolveIcon");var C=babelHelpers.classPrivateFieldLooseKey("removeChildActivity");var D=babelHelpers.classPrivateFieldLooseKey("openChildSetting");var S=babelHelpers.classPrivateFieldLooseKey("onClickChildRow");var E=babelHelpers.classPrivateFieldLooseKey("showSequence");var N=babelHelpers.classPrivateFieldLooseKey("hideRows");var _=babelHelpers.classPrivateFieldLooseKey("drawSequenceHeader");var z=babelHelpers.classPrivateFieldLooseKey("drawSequenceContent");var O=babelHelpers.classPrivateFieldLooseKey("drawSequenceFooter");var x=babelHelpers.classPrivateFieldLooseKey("hideSequence");var j=babelHelpers.classPrivateFieldLooseKey("showAddChildMenu");var M=babelHelpers.classPrivateFieldLooseKey("getChildMenuItems");var K=babelHelpers.classPrivateFieldLooseKey("addInitializeChild");var $=babelHelpers.classPrivateFieldLooseKey("addCommandChild");var k=babelHelpers.classPrivateFieldLooseKey("addDelayChild");var I=babelHelpers.classPrivateFieldLooseKey("addFinalizeChild");class R extends window.BizProcActivity{constructor(){super();Object.defineProperty(this,I,{value:ue});Object.defineProperty(this,k,{value:ye});Object.defineProperty(this,$,{value:pe});Object.defineProperty(this,K,{value:he});Object.defineProperty(this,M,{value:be});Object.defineProperty(this,j,{value:ve});Object.defineProperty(this,x,{value:ce});Object.defineProperty(this,O,{value:de});Object.defineProperty(this,z,{value:re});Object.defineProperty(this,_,{value:ne});Object.defineProperty(this,N,{value:oe});Object.defineProperty(this,E,{value:le});Object.defineProperty(this,S,{value:ae});Object.defineProperty(this,D,{value:se});Object.defineProperty(this,C,{value:te});Object.defineProperty(this,T,{value:ee});Object.defineProperty(this,F,{value:Z});Object.defineProperty(this,B,{value:V});Object.defineProperty(this,L,{value:Q});Object.defineProperty(this,H,{value:J});Object.defineProperty(this,w,{value:Y});Object.defineProperty(this,m,{value:G});Object.defineProperty(this,A,{value:U});Object.defineProperty(this,f,{value:X});Object.defineProperty(this,P,{value:W});Object.defineProperty(this,u,{value:q});this.lastDrop=false;this.main=null;this.commandTable=null;Object.defineProperty(this,h,{writable:true,value:null});Object.defineProperty(this,p,{writable:true,value:null});Object.defineProperty(this,y,{writable:true,value:null});this.Type="StateActivity";this.Draw=babelHelpers.classPrivateFieldLooseBase(this,P)[P].bind(this);this.OnRemoveClick=babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this);this.RemoveResources=babelHelpers.classPrivateFieldLooseBase(this,m)[m].bind(this);this.InitStateActivity=this.Init;this.Init=babelHelpers.classPrivateFieldLooseBase(this,u)[u].bind(this);this.ondragging=babelHelpers.classPrivateFieldLooseBase(this,H)[H].bind(this);this.ondrop=babelHelpers.classPrivateFieldLooseBase(this,L)[L].bind(this);this.reDraw=babelHelpers.classPrivateFieldLooseBase(this,f)[f].bind(this);this.remove=e=>{const i=e.target;const t=i.parentNode.parentNode.parentNode.parentNode.parentNode;const s=t.id;babelHelpers.classPrivateFieldLooseBase(this,C)[C](t,s)};this.settings=e=>{const i=e.target;const t=i.parentNode.parentNode.parentNode.parentNode.parentNode.id;babelHelpers.classPrivateFieldLooseBase(this,D)[D](t)};this.clickrow=e=>{const i=e.target;const t=i.parentNode.parentNode.parentNode.parentNode.parentNode.id;babelHelpers.classPrivateFieldLooseBase(this,S)[S](t)};this.HideRows=babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this);this.SequentialShow=babelHelpers.classPrivateFieldLooseBase(this,E)[E].bind(this);this.SequentialHide=babelHelpers.classPrivateFieldLooseBase(this,x)[x].bind(this);this.AddInitialize=babelHelpers.classPrivateFieldLooseBase(this,K)[K].bind(this);this.AddCommand=babelHelpers.classPrivateFieldLooseBase(this,$)[$].bind(this);this.AddDelayActivity=babelHelpers.classPrivateFieldLooseBase(this,k)[k].bind(this);this.AddFinilize=babelHelpers.classPrivateFieldLooseBase(this,I)[I].bind(this);this.ShowAddMenu=e=>{this.menu=new PopupMenu("state_float_menu");this.menu.create(2e3);const i=e.target;babelHelpers.classPrivateFieldLooseBase(this,j)[j](i)}}}function q(e){this.InitStateActivity(e);this.childActivities.forEach((e=>{if(e.Type==="EventDrivenActivity"){const i=e.childActivities[0];e.setActivated(i.Activated);i.setCanBeActivated(e.canBeActivated)}}))}function W(e){babelHelpers.classPrivateFieldLooseBase(this,w)[w]();this.main=i.Tag.render(l||(l=a`
			<table class="bizproc-designer-state-activity-table" cellpadding="0" cellspacing="0">
				<tbody>
					<tr id="${0}">
						<td style="height: 24px; white-space: nowrap;">
							${0}
						</td>
					</tr>
					<tr>
						<td>
							${0}
						</td>
					</tr>
				</tbody>
			</table>
		`),i.Text.encode(this.Name),babelHelpers.classPrivateFieldLooseBase(this,B)[B](),babelHelpers.classPrivateFieldLooseBase(this,F)[F]());i.Dom.append(this.main,e)}function X(){const e=this.main.parentNode;i.Dom.remove(this.main);this.main=null;this.commandTable=null;babelHelpers.classPrivateFieldLooseBase(this,P)[P](e)}function U(){this.parentActivity.RemoveChild(this)}function G(){window.DragNDrop.RemoveHandler("ondragging",this.h1id);window.DragNDrop.RemoveHandler("ondrop",this.h2id);i.Dom.remove(this.main);this.h1id=null;this.h2id=null;this.main=null;this.commandTable=null}function Y(){this.lastDrop=false;if(!this.h1id){this.h1id=window.DragNDrop.AddHandler("ondragging",babelHelpers.classPrivateFieldLooseBase(this,H)[H].bind(this));this.h2id=window.DragNDrop.AddHandler("ondrop",babelHelpers.classPrivateFieldLooseBase(this,L)[L].bind(this))}}function J(e,t,s){const a=this.main;const l=i.Dom.getPosition(a);if(l.left<t&&t<l.right&&l.top<s&&s<l.bottom){this.lastDrop=a;i.Dom.style(a,"opacity",".25");return}if(this.lastDrop){i.Dom.style(a,"opacity",null);this.lastDrop=false}}function Q(){if(this.lastDrop){i.Dom.style(this.lastDrop,"opacity",null);this.lastDrop=false;if(this!==window.DragNDrop.obj&&this.parentActivity.ReplaceChild){this.parentActivity.ReplaceChild(this,window.DragNDrop.obj)}}}function V(){const{root:e,title:t,setting:s,remove:l}=i.Tag.render(o||(o=a`
			<table 
				class="bizproc-designer-state-activity-title-table${0}"
				cellpadding="0"
				cellspacing="0"
			>
				<tbody>
					<tr>
						<td ref="title">
							<div
								class="bizproc-designer-state-activity-title"
								title="${0}"
							><b>${0}</b></div>
						</td>
						<td ref='setting' style="cursor: pointer;">
							<div class="ui-icon-set --settings-4 bizproc-designer-state-activity-title-icon"></div>
						</td>
						<td ref='remove' style="cursor: pointer;">
							<div class="ui-icon-set --cross-60 bizproc-designer-state-activity-title-icon"></div>
						</td>
					</tr>
				</tbody>
			</table>
		`),this.Activated==="N"?" --deactivated":"",i.Text.encode(this.Properties.Title),i.Text.encode(this.Properties.Title));i.Event.bind(t,"mousedown",(e=>{const t=window.DragNDrop.StartDrag(e,this);t.innerHTML=this.main.innerHTML;i.Dom.style(t,"width",`${this.main.offsetWidth}px`)}));i.Event.bind(s,"click",this.OnSettingsClick);i.Event.bind(l,"click",babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this));return e}function Z(){const{root:e,add:t}=i.Tag.render(n||(n=a`
			<table 
				class="bizproc-designer-state-activity-children-table${0}"
				cellpadding="4"
				cellspacing="0"
			>
				<tbody>
					<tr>
						<td style="font-size: 12px; text-align: left; vertical-align: center">
							<a
								ref="add"
								href="javascript:void(0)"
								style="text-decoration: none"
							>
								<span>${0}</span>
								<div 
									class="ui-icon-set --chevron-down"
									style="--ui-icon-set__icon-color: #2067b0; --ui-icon-set__icon-size: 10px"
								></div>
							</a>
						</td>
					</tr>
					${0}
				</tbody>
			</table>
		`),this.Activated==="N"?" --deactivated":"",i.Text.encode(window.BPMESS.STATEACT_ADD),babelHelpers.classPrivateFieldLooseBase(this,T)[T]());i.Event.bind(t,"click",babelHelpers.classPrivateFieldLooseBase(this,j)[j].bind(this,t));this.commandTable=e;return e}function ee(){if(this.childActivities.length<=0){return[]}const e=[];this.childActivities.forEach((t=>{let s=t.Properties.Title;let l=t.Type==="StateFinalizationActivity"?"fin":"init";let o=!t.canBeActivated||t.Activated==="N"?" --deactivated":"";if(t.Type==="EventDrivenActivity"){const e=t.childActivities[0];s=e.Properties.Title;l=e.Type==="DelayActivity"?"delay":"cmd";o=!e.canBeActivated||e.Activated==="N"?" --deactivated":""}const{iconCode:n,iconSize:d,iconColor:c}=babelHelpers.classPrivateFieldLooseBase(this.constructor,g)[g](l);const{root:v,title:b,setting:h,remove:p}=i.Tag.render(r||(r=a`
				<tr id="${0}">
					<td class="bizproc-designer-state-activity-child${0}">
						<table style="font-size: 12px; width: 100%">
							<tbody>
								<tr>
									<td style="width: 17px">
										<div
											class="ui-icon-set --${0}"
											style="
												--ui-icon-set__icon-size: ${0};
												--ui-icon-set__icon-color: ${0}
											"
										></div>
									</td>
									<td ref="title" title="${0}">
										${0}
									</td>
									<td 
										ref="setting" 
										title="${0}"
										style="width: 14px"
									>
										<div 
											class="ui-icon-set --settings-4 bizproc-designer-state-activity-child-icon"
										></div>
									</td>
									<td
										ref="remove"
										title="${0}"
										style="width: 14px"
									>
										<div 
											class="ui-icon-set --cross-60 bizproc-designer-state-activity-child-icon"
										></div>
									</td>
								</tr>
							</tbody>
						</table>
					</td>
				</tr>
			`),i.Text.encode(t.Name),o,n,d,c,i.Text.encode(window.BPMESS.STATEACT_EDITBP),i.Text.encode(s),i.Text.encode(window.BPMESS.STATEACT_SETT),i.Text.encode(window.BPMESS.STATEACT_DEL));i.Event.bind(b,"click",babelHelpers.classPrivateFieldLooseBase(this,S)[S].bind(this,t.Name));i.Event.bind(h,"click",babelHelpers.classPrivateFieldLooseBase(this,D)[D].bind(this,t.Name));i.Event.bind(p,"click",babelHelpers.classPrivateFieldLooseBase(this,C)[C].bind(this,v,t.Name));e.push(v)}));return e}function ie(e){if(e==="delay"){return{iconCode:"hourglass-sandglass",iconSize:"17px",iconColor:"rgb(42, 177, 28)"}}if(e==="cmd"){return{iconCode:"forward",iconSize:"17px",iconColor:"rgb(176, 26, 109)"}}if(e==="fin"){return{iconCode:"statefin",iconSize:"12px",iconColor:"none"}}if(e==="init"){return{iconCode:"stateinit",iconSize:"12px",iconColor:"#1a92b7"}}return{}}function te(e,t){const s=this.findChildById(t);if(s){i.Dom.remove(e);this.RemoveChild(s);this.parentActivity.DrawLines()}}function se(e){let i=this.findChildById(e);if(i){if(i.Type==="EventDrivenActivity"){i=i.childActivities[0]}i.Settings()}}function ae(e){const i=this.findChildById(e);if(i){babelHelpers.classPrivateFieldLooseBase(this,E)[E](i)}}function le(e){window.rootActivity._redrawObject=e;i.Dom.style(this.parentActivity.Table,"display","none");babelHelpers.classPrivateFieldLooseBase(this,N)[N]();babelHelpers.classPrivateFieldLooseBase(this,_)[_](e);babelHelpers.classPrivateFieldLooseBase(this,z)[z](e);babelHelpers.classPrivateFieldLooseBase(this,O)[O]();if(document.getElementById("bizprocsavebuttons")){i.Dom.style(document.getElementById("bizprocsavebuttons"),"display","none")}scroll(0,0)}function oe(){for(let e=0;e<this.parentActivity.__l.length;e++){for(let t=0;t<5;t++){i.Dom.style(this.parentActivity.__l[e][t],"display","none")}}}function ne(e){const t=e.Type==="EventDrivenActivity"?e.childActivities[0].Properties.Title:e.Properties.Title;const{root:s,link:l}=i.Tag.render(d||(d=a`
			<div style="font-size: 12px">
				<a ref="link" href="javascript:void(0)">${0}</a>
				<span> - ${0}</span>
			</div>
		`),i.Text.encode(this.Properties.Title),i.Text.encode(t));i.Event.bind(l,"click",babelHelpers.classPrivateFieldLooseBase(this,x)[x].bind(this));babelHelpers.classPrivateFieldLooseBase(this,h)[h]=s;i.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,h)[h],this.parentActivity.Table.parentNode)}function re(e){babelHelpers.classPrivateFieldLooseBase(this,p)[p]=i.Tag.render(c||(c=a`<div></div>`));i.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,p)[p],this.parentActivity.Table.parentNode);e.Draw(babelHelpers.classPrivateFieldLooseBase(this,p)[p])}function de(){const e=new s.Button({text:window.BPMESS.STATEACT_BACK_1,size:s.Button.Size.EXTRA_SMALL,color:s.Button.Color.LIGHT_BORDER,noCaps:true,onclick:babelHelpers.classPrivateFieldLooseBase(this,x)[x].bind(this)});babelHelpers.classPrivateFieldLooseBase(this,y)[y]=i.Tag.render(v||(v=a`<div>${0}</div>`),e.render());i.Dom.style(e.getContainer(),"margin","15px");i.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,y)[y],this.parentActivity.Table.parentNode)}function ce(){i.Dom.style(this.parentActivity.Table,"display","table");i.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,h)[h]);i.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,p)[p]);i.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,y)[y]);babelHelpers.classPrivateFieldLooseBase(this,h)[h]=null;babelHelpers.classPrivateFieldLooseBase(this,p)[p]=null;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=null;if(document.getElementById("bizprocsavebuttons")){i.Dom.style(document.getElementById("bizprocsavebuttons"),"display","block")}window.rootActivity._redrawObject=null;window.arWorkflowTemplate=window.rootActivity.Serialize();window.ReDraw()}function ve(e){const s=()=>{new t.Menu({bindElement:e,id:`state_float_menu-${i.Text.getRandom()}`,minWidth:277,autoHide:true,zIndexOptions:{alwaysOnTop:true},cacheable:false,items:babelHelpers.classPrivateFieldLooseBase(this,M)[M]()}).show()};if(!i.Reflection.getClass("BX.Main.Menu")){i.Runtime.loadExtension("main.popup").then((()=>s())).catch((()=>{}));return}s()}function be(){const e=(e,t)=>{const{iconCode:s,iconColor:l}=babelHelpers.classPrivateFieldLooseBase(this.constructor,g)[g](e);return i.Tag.render(b||(b=a`
				<div style="display: inline-flex; align-items: center">
					<span 
						class="ui-icon-set --${0}"
						style="
							--ui-icon-set__icon-size: 17px;
							--ui-icon-set__icon-color: ${0};
							margin-right: 5px;
						"
					></span>
					<span>${0}</span>
				</div>
			`),s,l,i.Text.encode(t))};const t=[{id:"2",html:e("cmd",window.BPMESS.STATEACT_MENU_COMMAND),onclick:(e,i)=>{i.getMenuWindow().close();babelHelpers.classPrivateFieldLooseBase(this,$)[$]();babelHelpers.classPrivateFieldLooseBase(this,f)[f]()}},{id:"3",html:e("delay",window.BPMESS.STATEACT_MENU_DELAY),onclick:(e,i)=>{i.getMenuWindow().close();babelHelpers.classPrivateFieldLooseBase(this,k)[k]();babelHelpers.classPrivateFieldLooseBase(this,f)[f]()}}];let s=false;let l=false;this.childActivities.forEach((e=>{if(e.Type==="StateInitializationActivity"){s=true}if(e.Type==="StateFinalizationActivity"){l=true}}));if(!s){t.push({id:"1",html:e("init",window.BPMESS.STATEACT_MENU_INIT_1),onclick:(e,i)=>{i.getMenuWindow().close();babelHelpers.classPrivateFieldLooseBase(this,K)[K]();babelHelpers.classPrivateFieldLooseBase(this,f)[f]()}})}if(!l){t.push({id:"5",html:e("fin",window.BPMESS.STATEACT_MENU_FIN_1),onclick:(e,i)=>{i.getMenuWindow().close();babelHelpers.classPrivateFieldLooseBase(this,I)[I]();babelHelpers.classPrivateFieldLooseBase(this,f)[f]()}})}return t}function he(){const e=this.commandTable.insertRow(1);const i=e.insertCell(-1);i.innerHTML="";const t=window.CreateActivity("StateInitializationActivity");this.childActivities.push(t);t.parentActivity=this;t.setCanBeActivated(this.getCanBeActivatedChild());babelHelpers.classPrivateFieldLooseBase(this,E)[E](t)}function pe(){const e=window.CreateActivity("EventDrivenActivity");const i=window.CreateActivity("HandleExternalEventActivity");e.childActivities.push(i);i.parentActivity=e;const t=this.commandTable.insertRow(1);const s=t.insertCell(-1);s.innerHTML="";this.childActivities.push(e);e.parentActivity=this;e.setCanBeActivated(this.getCanBeActivatedChild());i.Settings()}function ye(){const e=window.CreateActivity("EventDrivenActivity");const i=window.CreateActivity("DelayActivity");e.childActivities.push(i);i.parentActivity=e;const t=this.commandTable.insertRow(1);const s=t.insertCell(-1);s.innerHTML="";this.childActivities.push(e);e.parentActivity=this;e.setCanBeActivated(this.getCanBeActivatedChild());i.Settings()}function ue(){const e=this.commandTable.insertRow(1);const i=e.insertCell(-1);i.innerHTML="";const t=window.CreateActivity("StateFinalizationActivity");this.childActivities.push(t);t.parentActivity=this;t.setCanBeActivated(this.getCanBeActivatedChild());babelHelpers.classPrivateFieldLooseBase(this,E)[E](t)}Object.defineProperty(R,g,{value:ie});window.__StateActivityAdd=function(e,i){const t=window.rootActivity.childActivities.find((e=>e.Name===i));if(t){switch(e){case"init":t.AddInitialize();break;case"command":t.AddCommand();break;case"delay":t.AddDelayActivity();break;case"finish":t.AddFinilize();break;default:}if(BX.Type.isFunction(t.reDraw)){t.reDraw()}}};e.StateActivity=R})(this.window=this.window||{},BX,BX.Main,BX.UI);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:76:"/bitrix/activities/bitrix/setstateactivity/setstateactivity.js?1728733186315";s:6:"source";s:62:"/bitrix/activities/bitrix/setstateactivity/setstateactivity.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
/////////////////////////////////////////////////////////////////////////////////////
// SetStateActivity
/////////////////////////////////////////////////////////////////////////////////////
SetStateActivity = function()
{
	var ob = new BizProcActivity();
	ob.Type = 'SetStateActivity';


	return ob;
}

/* End */
;
; /* Start:"a:4:{s:4:"full";s:75:"/bitrix/activities/bitrix/whileactivity/whileactivity.min.js?17287331861978";s:6:"source";s:56:"/bitrix/activities/bitrix/whileactivity/whileactivity.js";s:3:"min";s:60:"/bitrix/activities/bitrix/whileactivity/whileactivity.min.js";s:3:"map";s:60:"/bitrix/activities/bitrix/whileactivity/whileactivity.map.js";}"*/
WhileActivity=function(){var i=new BizProcActivity;i.Type="WhileActivity";i.BizProcActivityDraw=i.Draw;i.Draw=function(e){if(i.childActivities.length==0){i.childActivities=[new SequenceActivity];i.childActivities[0].parentActivity=i}i.container=e.appendChild(document.createElement("DIV"));if(!jsUtils.IsIE())i.container.className="parallelcontainer";i.BizProcActivityDraw(i.container);i.activityContent=null;i.div.style.position="relative";i.div.style.top="12px";i.hideContainer=i.container.appendChild(document.createElement("DIV"));i.hideContainer.style.background="#FFFFFF";i.hideContainer.style.border="1px #CCCCCC dashed";i.hideContainer.style.width="250px";i.hideContainer.style.color="#AAAAAA";i.hideContainer.style.padding="13px 0px 3px 0px";i.hideContainer.style.cursor="pointer";i.hideContainer.innerHTML=BPMESS["PARA_MIN"];i.hideContainer.onclick=i.OnHideClick;i.childsContainer=i.container.appendChild(_crt(1,3));i.childsContainer.rows[0].cells[0].width="15%";i.childsContainer.rows[0].cells[1].width="70%";i.childsContainer.rows[0].cells[2].width="15%";i.childsContainer.rows[0].cells[1].style.border="2px #dfdfdf dashed";i.childsContainer.id=i.Name;if(i.Properties["_DesMinimized"]=="Y"){i.childsContainer.style.display="none"}else{i.hideContainer.style.display="none"}i.childsContainer.rows[0].cells[1].style.padding="10px";i.childActivities[0].Draw(i.childsContainer.rows[0].cells[1])};i.CheckFields=function(){return true};i.OnHideClick=function(){if(i.Properties["_DesMinimized"]=="Y"){i.Properties["_DesMinimized"]="N";i.childsContainer.style.display="table";i.hideContainer.style.display="none"}else{i.Properties["_DesMinimized"]="Y";i.childsContainer.style.display="none";i.hideContainer.style.display="block"}};return i};WhileActivity.changeConditionTypeHandler=function(i){Array.from(i.options).forEach(function(i){var e=document.getElementById(i.getAttribute("data-id"));e.style.display=i.selected?"":"none"})};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:87:"/bitrix/activities/bitrix/eventdrivenactivity/eventdrivenactivity.min.js?17287331861217";s:6:"source";s:68:"/bitrix/activities/bitrix/eventdrivenactivity/eventdrivenactivity.js";s:3:"min";s:72:"/bitrix/activities/bitrix/eventdrivenactivity/eventdrivenactivity.min.js";s:3:"map";s:72:"/bitrix/activities/bitrix/eventdrivenactivity/eventdrivenactivity.map.js";}"*/
(function(e,t){"use strict";const i=window.SequentialWorkflowActivity;var s=babelHelpers.classPrivateFieldLooseKey("draw");var r=babelHelpers.classPrivateFieldLooseKey("afterSequenceDraw");var a=babelHelpers.classPrivateFieldLooseKey("setError");class o extends i{constructor(){super();Object.defineProperty(this,a,{value:c});Object.defineProperty(this,r,{value:n});Object.defineProperty(this,s,{value:l});this.Type="EventDrivenActivity";this.DrawSequentialWorkflowActivity=this.Draw;this.Draw=babelHelpers.classPrivateFieldLooseBase(this,s)[s].bind(this);this.AfterSDraw=babelHelpers.classPrivateFieldLooseBase(this,r)[r].bind(this);this.SetError=babelHelpers.classPrivateFieldLooseBase(this,a)[a].bind(this)}}function l(e){if(this.parentActivity.Type==="StateActivity"){this.DrawSequentialWorkflowActivity(e)}else{this.DrawSequenceActivity(e)}}function n(){if(this.parentActivity.Type==="StateActivity"&&this.childsContainer.rows.length>2){t.Dom.style(this.childsContainer.rows[0],"display","none");t.Dom.style(this.childsContainer.rows[1],"display","none")}}function c(e,t){this.parentActivity.SetError(e,t)}e.EventDrivenActivity=o})(this.window=this.window||{},BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:76:"/bitrix/activities/bitrix/listenactivity/listenactivity.min.js?1728733186273";s:6:"source";s:58:"/bitrix/activities/bitrix/listenactivity/listenactivity.js";s:3:"min";s:62:"/bitrix/activities/bitrix/listenactivity/listenactivity.min.js";s:3:"map";s:62:"/bitrix/activities/bitrix/listenactivity/listenactivity.map.js";}"*/
(function(t){"use strict";const i=window.ParallelActivity;class s extends i{constructor(){super();this.Type="ListenActivity";this.__parallelActivityInitType="EventDrivenActivity"}}t.ListenActivity=s})(this.window=this.window||{});
/* End */
;
; /* Start:"a:4:{s:4:"full";s:89:"/bitrix/activities/bitrix/ifelsebranchactivity/ifelsebranchactivity.min.js?17287331862627";s:6:"source";s:70:"/bitrix/activities/bitrix/ifelsebranchactivity/ifelsebranchactivity.js";s:3:"min";s:74:"/bitrix/activities/bitrix/ifelsebranchactivity/ifelsebranchactivity.min.js";s:3:"map";s:74:"/bitrix/activities/bitrix/ifelsebranchactivity/ifelsebranchactivity.map.js";}"*/
(function(t,e){"use strict";let i=t=>t,s,n,r;const a=window.SequenceActivity;var c=babelHelpers.classPrivateFieldLooseKey("draw");var d=babelHelpers.classPrivateFieldLooseKey("renderTitle");class l extends a{constructor(){super();Object.defineProperty(this,d,{value:h});Object.defineProperty(this,c,{value:o});this.Type="IfElseBranchActivity";this.Draw=babelHelpers.classPrivateFieldLooseBase(this,c)[c].bind(this);this.iHead=1}static changeConditionTypeHandler(t){[...t.options].forEach((t=>{const i=document.getElementById(e.Dom.attr(t,"data-id"));e.Dom.style(i,"display",t.selected?"":"none")}))}}function o(t){const r=Array.from({length:this.iHead+this.childActivities.length*2},(()=>e.Tag.render(s||(s=i`
				<tr><td align="center" valign="center"></td></tr>
			`))));const a=babelHelpers.classPrivateFieldLooseBase(this,d)[d]();this.childsContainer=e.Tag.render(n||(n=i`
			<table 
				class="seqactivitycontainer"
				id="${0}"
				style="height: 100%; width: 100%;"
				border="0"
				cellpadding="0"
				cellspacing="0"
			>
				<tbody>
					<tr>
						<td align="center" valign="center">
							<div class="activity" style="margin: 5px; text-align: center; width: 190px; height: 20px;">
								${0}
							</div>
						</td>
					</tr>
					${0}
				</tbody>
			</table>
		`),e.Text.encode(this.Name),a,r);e.Dom.append(this.childsContainer,t);this.CreateLine(0);this.childActivities.forEach(((t,i)=>{t.Draw(this.childsContainer.rows[this.iHead+i*2+1].cells[0]);this.CreateLine(e.Text.toInteger(i)+1)}));this.drawEditorComment(a)}function h(){const t=!this.canBeActivated||this.Activated==="N"?" --deactivated":"";const{root:s,setting:n}=e.Tag.render(r||(r=i`
			<div class="bizproc-designer-if-else-branch-activity-title-wrapper${0}">
				<table style="width: 100%; height: 100%" cellspacing="0" cellpadding="0" border="0">
					<tbody>
						<tr>
							<td 
								align="center"
								title="${0}"
								style="width: 100%; font-size: 11px;"
							>
								<div class="bizproc-designer-if-else-branch-activity-title">
									${0}
								</div>
							</td>
							<td ref="setting" style="cursor: pointer;">
								<div 
									class="ui-icon-set --settings-2 bizproc-designer-if-else-branch-activity-setting-icon"
								></div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		`),t,e.Text.encode(this.Properties.Title),e.Text.encode(this.Properties.Title));e.Event.bind(s,"dblclick",this.OnSettingsClick.bind(this));e.Event.bind(n,"click",this.Settings.bind(this));return s}t.IfElseBranchActivity=l})(this.window=this.window||{},BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:76:"/bitrix/activities/bitrix/ifelseactivity/ifelseactivity.min.js?1728733186318";s:6:"source";s:58:"/bitrix/activities/bitrix/ifelseactivity/ifelseactivity.js";s:3:"min";s:62:"/bitrix/activities/bitrix/ifelseactivity/ifelseactivity.min.js";s:3:"map";s:62:"/bitrix/activities/bitrix/ifelseactivity/ifelseactivity.map.js";}"*/
(function(t){"use strict";const i=window.ParallelActivity;class s extends i{constructor(){super();this.Type="IfElseActivity";this.allowSort=true;this.childActivities=[];this.__parallelActivityInitType="IfElseBranchActivity"}}t.IfElseActivity=s})(this.window=this.window||{});
/* End */
;
; /* Start:"a:4:{s:4:"full";s:79:"/bitrix/activities/bitrix/approveactivity/approveactivity.min.js?17287331861322";s:6:"source";s:60:"/bitrix/activities/bitrix/approveactivity/approveactivity.js";s:3:"min";s:64:"/bitrix/activities/bitrix/approveactivity/approveactivity.min.js";s:3:"map";s:64:"/bitrix/activities/bitrix/approveactivity/approveactivity.map.js";}"*/
(function(t,e){"use strict";let i=t=>t,l;const n=window.ParallelActivity;var a=babelHelpers.classPrivateFieldLooseKey("draw");class s extends n{constructor(){super();Object.defineProperty(this,a,{value:r});this.Type="ApproveActivity";this.__parallelActivityInitType="SequenceActivity";this.DrawParallelActivity=this.Draw;this.Draw=babelHelpers.classPrivateFieldLooseBase(this,a)[a]}}function r(t){this.activityContent=e.Tag.render(l||(l=i`
			<table style="font-size: 11px; width: 100%" cellpadding="0" cellspacing="0" border="0">
				<tbody>
					<tr>
						<td align="left" valign="center" width="33">
							&nbsp;<span style="color: #007700">${0}</span>
						</td>
						<td 
							align="center"
							valign="center"
							style="background: url(${0}) 2px 2px no-repeat; height: 24px; width: 24px"
						></td>
						<td align="left" valign="center">${0}</td>
						<td align="right" valign="center">
							<span style="color: #770000">${0}</span>&nbsp;
						</td>
					</tr>
				</tbody>
			</table>
		`),e.Text.encode(window.BPMESS.APPR_YES),this.Icon,e.Text.encode(this.Properties.Title),e.Text.encode(window.BPMESS.APPR_NO));this.activityHeight="30px";this.activityWidth="200px";this.DrawParallelActivity(t)}t.ApproveActivity=s})(this.window=this.window||{},BX);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:89:"/bitrix/components/bitrix/ui.button.panel/templates/.default/script.min.js?17287331821189";s:6:"source";s:70:"/bitrix/components/bitrix/ui.button.panel/templates/.default/script.js";s:3:"min";s:74:"/bitrix/components/bitrix/ui.button.panel/templates/.default/script.min.js";s:3:"map";s:74:"/bitrix/components/bitrix/ui.button.panel/templates/.default/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.UI");var t=function(){this.layout={container:null}};t.prototype={init:function(t){this.layout.container=BX(t.containerId);this.isFrame=t.isFrame||false;this.hasHints=t.hasHints||false;this.pinnerContainer=t.pinnerContainer||false;this.pinner=new BX.UI.Pinner(this.layout.container,{fixBottom:this.isFrame,fullWidth:this.isFrame,anchorBottom:this.pinnerContainer});if(this.hasHints){BX.UI.Hint.init(this.layout.container)}t.buttons.forEach(this.initButton,this)},getContainer:function(){return this.layout.container},hide:function(){if(!this.layout.container){return}this.layout.container.classList.add("ui-button-panel-wrapper-hide")},show:function(){this.layout.container.classList.remove("ui-button-panel-wrapper-hide")},initButton:function(t){if(!t.ID){return}t.node=BX(t.ID);if(!t.node){return}BX.bind(t.node,"click",this.onButtonClick.bind(this,t))},onButtonClick:function(t,n){BX.onCustomEvent(this,"button-click",[t]);if(t.WAIT){BX.addClass(BX(t.ID),"ui-btn-wait")}if(this.isFrame&&(t.TYPE==="close"||t.TYPE==="cancel")){n.preventDefault();top.BX.SidePanel.Instance.close()}}};BX.UI.ButtonPanel=new t})();
/* End */
;; /* /bitrix/components/bitrix/main.interface.buttons/templates/.default/script.min.js?172873318163299*/
; /* /bitrix/components/bitrix/main.interface.buttons/templates/.default/utils.min.js?1728733181575*/
; /* /bitrix/components/bitrix/bizproc.workflow.edit/templates/.default/script.min.js?17287331841804*/
; /* /bitrix/activities/bitrix/statemachineworkflowactivity/statemachineworkflowactivity.min.js?172873318617820*/
; /* /bitrix/activities/bitrix/emptyblockactivity/emptyblockactivity.min.js?17287331862243*/
; /* /bitrix/activities/bitrix/stateinitializationactivity/stateinitializationactivity.min.js?1728733186179*/
; /* /bitrix/activities/bitrix/statefinalizationactivity/statefinalizationactivity.min.js?1728733186173*/
; /* /bitrix/activities/bitrix/requestinformationoptionalactivity/requestinformationoptionalactivity.min.js?17287331861095*/
; /* /bitrix/activities/bitrix/foreachactivity/foreachactivity.min.js?17287331862238*/
; /* /bitrix/activities/bitrix/handleexternaleventactivity/handleexternaleventactivity.min.js?1728733186257*/
; /* /bitrix/activities/bitrix/parallelactivity/parallelactivity.min.js?172873318610896*/
; /* /bitrix/activities/bitrix/delayactivity/delayactivity.min.js?1728733186478*/
; /* /bitrix/activities/bitrix/sequenceactivity/sequenceactivity.min.js?172873318612466*/
; /* /bitrix/activities/bitrix/sequentialworkflowactivity/sequentialworkflowactivity.min.js?172873318611430*/
; /* /bitrix/activities/bitrix/stateactivity/stateactivity.min.js?172873318618087*/
; /* /bitrix/activities/bitrix/setstateactivity/setstateactivity.js?1728733186315*/
; /* /bitrix/activities/bitrix/whileactivity/whileactivity.min.js?17287331861978*/
; /* /bitrix/activities/bitrix/eventdrivenactivity/eventdrivenactivity.min.js?17287331861217*/
; /* /bitrix/activities/bitrix/listenactivity/listenactivity.min.js?1728733186273*/
; /* /bitrix/activities/bitrix/ifelsebranchactivity/ifelsebranchactivity.min.js?17287331862627*/
; /* /bitrix/activities/bitrix/ifelseactivity/ifelseactivity.min.js?1728733186318*/
; /* /bitrix/activities/bitrix/approveactivity/approveactivity.min.js?17287331861322*/
; /* /bitrix/components/bitrix/ui.button.panel/templates/.default/script.min.js?17287331821189*/

//# sourceMappingURL=page_25d522ed3a5850755d88587bb1570630.map.js