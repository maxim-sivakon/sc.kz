
; /* Start:"a:4:{s:4:"full";s:96:"/bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.min.js?17287331815071";s:6:"source";s:77:"/bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.js";s:3:"min";s:81:"/bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.min.js";s:3:"map";s:81:"/bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.map.js";}"*/
(function(){BX.namespace("BX.UI.SidePanel");if(BX.UI.SidePanel.Wrapper){return}function t(t){}t.prototype.init=function(t){this.container=BX(t.containerId);this.isCloseAfterSave=t.isCloseAfterSave||false;this.isReloadGridAfterSave=t.isReloadGridAfterSave||false;this.isReloadPageAfterSave=t.isReloadPageAfterSave||false;this.skipNotification=t.skipNotification||false;this.useLinkTargetsReplacing=t.useLinkTargetsReplacing||false;this.notification=t.notification||{};var e=BX.SidePanel.Instance.getPreviousSlider(BX.SidePanel.Instance.getSliderByWindow(window));this.parentWindow=e?e.getWindow():top;this.initEditableTitle(t);if(this.isReloadGridAfterSave){if(this.getParam("reloadGridAfterSave")){this.reloadGridOnParentPage()}this.setParam("reloadGridAfterSave",true)}if(this.isCloseAfterSave){if(this.getParam("closeAfterSave")){var i;if(this.notification.content&&top.BX&&!this.getParam("skipNotification")){i=function(){top.BX.loadExt("ui.notification").then(function(){top.BX.UI.Notification.Center.notify(this.notification)}.bind(this))}.bind(this)}else if(this.isReloadPageAfterSave){i=function(){this.parentWindow.location.reload()}.bind(this)}BX.SidePanel.Instance.close(false,i)}if(this.skipNotification){this.setParam("skipNotification",true)}this.setParam("closeAfterSave",true)}if(this.useLinkTargetsReplacing){this.initLinkTargetsReplacing()}};t.prototype.initEditableTitle=function(t){if(!t.title||!t.title.selector||!t.title.defaultTitle){return}var i=this.container.querySelector(t.title.selector);if(!i){return}var n=i.querySelector('input[type="text"]');if(!n){return}i.style.display="none";e.init({dataContainer:i,dataNode:n,defaultTitle:t.title.defaultTitle})};t.prototype.initLinkTargetsReplacing=function(){this.replaceLinkTargets();if(!window.MutationObserver){return}var t=new MutationObserver(this.domMutationHandler.bind(this));t.observe(this.container,{childList:true,subtree:true})};t.prototype.domMutationHandler=function(t){t.forEach(function(t){for(var e=0;e<t.addedNodes.length;++e){var i=t.addedNodes.item(e);if(!i){continue}this.replaceLinkTargets(i)}},this)};t.prototype.replaceLinkTargets=function(t){if(!t){t=document.body}var e=[];if(t.tagName==="A"){e=[t]}else if(t.nodeName!=="#text"){e=BX.convert.nodeListToArray(t.querySelectorAll("a"))}if(e.length===0){return}BX.convert.nodeListToArray(e).filter(function(t){return!t.target}).forEach(function(t){t.target="_top"})};t.prototype.setParam=function(t,e){var i=BX.SidePanel.Instance.getSliderByWindow(window);if(i){i.getData().set(t,e)}};t.prototype.getParam=function(t){var e=BX.SidePanel.Instance.getSliderByWindow(window);if(e){return e.getData().get(t)}return undefined};t.prototype.removeParam=function(t){var e=BX.SidePanel.Instance.getSliderByWindow(window);if(e){e.getData().delete(t)}};t.prototype.reloadGridOnParentPage=function(){var t=this.parentWindow;var e=BX.type.isString(this.isReloadGridAfterSave)?this.isReloadGridAfterSave:null;if(!t.BX.Main||!t.BX.Main.gridManager){return}if(e==="all"){t.BX.Main.gridManager.data.forEach(function(t){t.instance.reload()});return}if(!e&&t.BX.Main.gridManager.data){var i=t.BX.Main.gridManager.data;e=i.length>0?i[0].id:null}if(!e){return}var n=t.BX.Main.gridManager.getById(e);if(!n){return}n.instance.reload()};var e={isInit:false,init:function(t){this.dataNode=t.dataNode;this.titleNode=document.querySelector(".ui-side-panel-wrap-title-name");this.inputNode=document.querySelector(".ui-side-panel-wrap-title-input");this.buttonNode=document.querySelector(".ui-side-panel-wrap-title-edit-button");this.initialTitle=this.titleNode.textContent;this.defaultTitle=t.defaultTitle;BX.bind(this.dataNode,"bxchange",this.onDataNodeChange.bind(this));BX.bind(this.buttonNode,"click",this.startEdit.bind(this));BX.bind(this.inputNode,"keyup",this.onKeyUp.bind(this));BX.bind(this.inputNode,"blur",this.endEdit.bind(this));this.isInit=true;if(!t.disabled){this.enable()}if(!this.dataNode.value){this.dataNode.value=this.defaultTitle}},enable:function(t){t=t||false;if(!this.isInit){return}this.changeDisplay(this.buttonNode,!t);this.titleNode.textContent=!t?this.dataNode.value?this.dataNode.value:this.defaultTitle:this.initialTitle},disable:function(){this.enable(true)},onDataNodeChange:function(){this.titleNode.textContent=this.dataNode.value},onKeyUp:function(t){t=t||window.event;if(t.keyCode===10||t.keyCode===13){this.endEdit();t.preventDefault();return false}},getTitle:function(){var t=this.dataNode.value;if(!t){t=this.titleNode.textContent}return t},startEdit:function(){this.inputNode.value=this.getTitle();this.changeDisplay(this.titleNode,false);this.changeDisplay(this.buttonNode,false);this.changeDisplay(this.inputNode,true);this.inputNode.focus()},endEdit:function(){this.dataNode.value=this.inputNode.value;this.titleNode.textContent=this.inputNode.value;this.changeDisplay(this.inputNode,false);this.changeDisplay(this.buttonNode,true);this.changeDisplay(this.titleNode,true)},changeDisplay:function(t,e){return t.style.display=e?"":"none"}};BX.UI.SidePanel.Wrapper=new t})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:99:"/bitrix/components/bitrix/rest.configuration.action/templates/.default/script.min.js?17287331821175";s:6:"source";s:80:"/bitrix/components/bitrix/rest.configuration.action/templates/.default/script.js";s:3:"min";s:84:"/bitrix/components/bitrix/rest.configuration.action/templates/.default/script.min.js";s:3:"map";s:84:"/bitrix/components/bitrix/rest.configuration.action/templates/.default/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Rest.MarketSite.TileGrid.Item");if(!BX.TileGrid){return false}BX.Rest.MarketSite.TileGrid.Item=function(t){BX.TileGrid.Item.apply(this,arguments);this.title=t.title;this.icon=t.icon;this.link=t.link;this.disabled=t.disabled;this.layout={wrapper:null,title:null,icon:null}};BX.Rest.MarketSite.TileGrid.Item.prototype={__proto__:BX.TileGrid.Item.prototype,constructor:BX.TileGrid.Item,getContent:function(){if(!this.layout.wrapper){this.layout.wrapper=BX.create("div",{props:{className:"rest-market-site-wrapper"+(this.disabled?" rest-market-site-wrapper-disabled":"")},children:[this.getTitle(),this.getIconNode()]})}return this.layout.wrapper},getTitle:function(){if(!this.layout.title){this.layout.title=BX.create("div",{props:{className:"rest-market-site-title"},text:this.title})}return this.layout.title},getIconNode:function(){if(!this.layout.icon){this.layout.icon=BX.create("div",{props:{className:"rest-market-site-icon"},children:[BX.create("a",{props:{className:"rest-market-site-icon-image",href:this.link},style:{backgroundImage:"url("+this.icon+")"}})]})}return this.layout.icon}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:97:"/bitrix/components/bitrix/rest.marketplace.category/templates/banner/script.min.js?17287331822905";s:6:"source";s:78:"/bitrix/components/bitrix/rest.marketplace.category/templates/banner/script.js";s:3:"min";s:82:"/bitrix/components/bitrix/rest.marketplace.category/templates/banner/script.min.js";s:3:"map";s:82:"/bitrix/components/bitrix/rest.marketplace.category/templates/banner/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Rest.MarketPartners.TileGrid.Item");if(!BX.TileGrid){return false}BX.Rest.MarketPartners.TileGrid.Item=function(t){BX.TileGrid.Item.apply(this,arguments);this.title=t.title;this.description=t.description;this.icon=t.icon;this.link=t.link;this.payment=t.price;this.infoHelperCode=t.infoHelperCode;this.layout={wrapper:null,title:null,description:null,icon:null}};BX.Rest.MarketPartners.TileGrid.Item.prototype={__proto__:BX.TileGrid.Item.prototype,constructor:BX.TileGrid.Item,getContent:function(){if(!this.layout.wrapper){this.layout.wrapper=BX.create("div",{props:{className:"rest-market-partners-wrapper"},children:[this.getIconNode(),BX.create("div",{props:{className:"rest-market-partners-content"},children:[this.getTitle(),this.getDescription(),this.getLinkNode()]})]})}return this.layout.wrapper},getIconNode:function(){if(!this.layout.icon){this.layout.icon=BX.create("div",{props:{className:"rest-market-partners-icon"},children:[BX.create("img",{props:{className:"rest-market-partners-icon-image",src:this.icon}})]})}return this.layout.icon},getTitle:function(){if(!this.layout.title){this.layout.title=BX.create("div",{props:{className:"rest-market-partners-title"},text:this.title})}return this.layout.title},getDescription:function(){if(!this.layout.description){this.layout.description=BX.create("div",{props:{className:"rest-market-partners-description"},text:this.description})}return this.layout.description},getLinkNode:function(){var t=BX.create("a",{props:{className:"ui-btn ui-btn-sm ui-btn-primary ui-btn-round",href:this.link},text:BX.message("REST_MARKETPLACE_CATEGORY_INSTALL_LINK_NAME")});if(this.infoHelperCode!==false){t=BX.create("span",{props:{className:"ui-btn ui-btn-sm ui-btn-primary ui-btn-round"},events:{click:BX.delegate(function(){top.BX.UI.InfoHelper.show(this.infoHelperCode)},this)},text:BX.message("REST_MARKETPLACE_CATEGORY_INSTALL_LINK_NAME")})}return BX.create("div",{props:{className:"rest-market-partner-link-wrapper"},children:[t,this.payment?BX.create("span",{props:{className:"rest-market-partners-price"},text:this.payment}):null]})},clipDescription:function(){if(!this.layout.description){return}BX.cleanNode(this.layout.description);var t=BX.create("span",{text:this.description});this.layout.description.appendChild(t);var e=this.layout.description.offsetHeight;var i=this.description;var r=0;while(e<=t.offsetHeight&&i.length>r){r=r+2;t.innerText=i.slice(0,-r)+"..."}},clipTitle:function(){if(!this.layout.title){return}BX.cleanNode(this.layout.title);var t=BX.create("span",{text:this.title});this.layout.title.appendChild(t);var e=this.layout.title.offsetHeight;var i=this.title;var r=0;while(e<=t.offsetHeight&&i.length>r){r=r+2;t.innerText=i.slice(0,-r)+"..."}},afterRender:function(){if(this.description){this.clipDescription()}if(this.title){this.clipTitle()}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:95:"/bitrix/components/bitrix/rest.marketplace.category/templates/list/script.min.js?17287331829446";s:6:"source";s:76:"/bitrix/components/bitrix/rest.marketplace.category/templates/list/script.js";s:3:"min";s:80:"/bitrix/components/bitrix/rest.marketplace.category/templates/list/script.min.js";s:3:"map";s:80:"/bitrix/components/bitrix/rest.marketplace.category/templates/list/script.map.js";}"*/
"use strict";BX.namespace("BX.Rest.Markeplace.Category");BX.Rest.Markeplace.Category={init:function(t){this.signedParameters=t.signedParameters||{};this.filterId=t.filterId;this.leftMenuItems=BX.findChildren(BX("mp-left-menu"),{attribute:{"bx-role":"mp-left-menu-item"}},true);if(BX("mp-top-menu")){var e=BX.findChildren(BX("mp-top-menu"),{tagName:"A"},true),i;for(i=0;i<=e.length;i++){e[i].href=BX.util.add_url_param(e[i].href,{IFRAME:"Y"})}}this.initEvents();BX.Rest.Markeplace.Category.Page=this},initEvents:function(){BX.addCustomEvent("BX.Main.Filter:apply",this.onApplyFilter.bind(this));BX.addCustomEvent("BX.Main.Filter:clickMPMenu",this.clickMPMenu.bind(this))},clickMPMenu:function(t){var e=BX.Main.filterManager.getById(this.filterId);if(!(e instanceof BX.Main.Filter)){return}var i=t.getAttribute("bx-mp-left-menu-item");var s=e.getApi();s.setFields({CATEGORY:i});e.__marketplaceFilter={filterMode:t.getAttribute("bx-filter-mode"),filterValue:t.getAttribute("bx-filter-value")};s.apply()},onApplyFilter:function(t,e,i,s,a){if(t!==this.filterId){return}if(this.leftMenuItems&&this.leftMenuItems.length>0){var r,n=i.getFilterFieldsValues()["CATEGORY"],l;for(l=0;l<this.leftMenuItems.length;l++){r=this.leftMenuItems[l];if(r.getAttribute("bx-mp-left-menu-item")!=n)BX.removeClass(r.parentNode,"ui-sidepanel-menu-active");else if(!BX.hasClass(r.parentNode,"ui-sidepanel-menu-active"))BX.addClass(r.parentNode,"ui-sidepanel-menu-active")}}a.autoResolve=false;this.reloadPage(i.__marketplaceFilter,s);delete i.__marketplaceFilter},reloadPage:function(t,e){var i=new BX.Loader({target:BX("mp-category-block"),offset:{top:"150px"}});i.show();BX.ajax.runComponentAction("bitrix:rest.marketplace.category","getPage",{mode:"class",data:t,signedParameters:this.signedParameters}).then(function(t){var s=BX.processHTML(t.data,false);BX("mp-category-block").innerHTML=s.HTML;setTimeout(BX.ajax.processScripts,500,s.SCRIPT);i.hide();if(e){e.fulfill()}},function(){i.hide();if(e){e.reject()}})}};BX.Rest.Markeplace.Category.Items={init:function(t){this.pageCount=Number(t.pageCount);this.currentPageNumber=Number(t.currentPageNumber);this.filter=t.filter||{};if(BX.type.isDomNode(BX("mp-more-button"))){BX.bind(BX("mp-more-button"),"click",function(){this.loadPage()}.bind(this))}},loadPage:function(){if(this.pageCount<=this.currentPageNumber){return}BX.addClass(BX("mp-more-button"),"ui-btn-clock");BX.ajax.runComponentAction("bitrix:rest.marketplace.category","getNextPage",{mode:"class",data:this.filter,navigation:{page:++this.currentPageNumber},signedParameters:BX.Rest.Markeplace.Category.Page.signedParameters}).then(function(t){for(var e in t.data){if(t.data.hasOwnProperty(e)){window.gridTile.appendItem(t.data[e])}}BX.removeClass(BX("mp-more-button"),"ui-btn-clock");if(this.pageCount===this.currentPageNumber){BX.remove(BX("mp-more-button"))}}.bind(this))}};BX.namespace("BX.Rest.Marketplace.TileGrid");BX.Rest.Marketplace.TileGrid.Item=function(t){BX.TileGrid.Item.apply(this,arguments);this.title=t.NAME;this.developer=t.PARTNER_NAME;this.shortDesc=t.SHORT_DESC;this.secondaryDesc=t.SECONDARY_DESC;this.image=t.ICON;this.onclick=t.ONCLICK;this.feedback=t.FEEDBACK==="Y";this.layout={container:null,secondaryDesc:null,image:null,labels:null,title:null,clipTitle:null,company:null,controls:null,buttonAction:null,price:null,feedback:null};this.currency=t.currency;this.period=t.period;this.payment=t.PRICE;this.rate=t.rate;this.action=BX.message("MARKETPLACE_SHOW_APP");this.installed=t.INSTALLED==="Y";this.url=t.URL;this.promo=t.PROMO==="Y";this.labels=t.LABELS;this.recommended=t.recommended;this.top=t.top;this.infoHelperCode=false;if("INFO_HELPER_CODE"in t){this.infoHelperCode=t["INFO_HELPER_CODE"]}};BX.Rest.Marketplace.TileGrid.Item.prototype={__proto__:BX.TileGrid.Item.prototype,constructor:BX.TileGrid.Item,getContent:function(){if(this.layout.container)return this.layout.container;if(this.feedback){this.getFeedbackContent()}else{this.getApplicationContent()}return this.layout.container},getApplicationContent:function(){this.layout.container=BX.create("div",{props:{className:"mp-item"},children:[this.getLabels(),this.getImage(),BX.create("div",{props:{className:"mp-item-content"},children:[this.getTitle(),this.getDesc(),this.getControls()]}),this.getStatus()]})},getFeedbackContent:function(){this.layout.container=BX.create("div",{props:{className:"mp-item mp-fb-item"},children:[BX.create("div",{props:{className:"mp-item-fb-content"},children:[this.getTitle(),this.getDesc(),this.getSecondaryDesc()]}),BX.create("div",{props:{className:"mp-item-aside"},children:[this.getImage(),this.getControls()]})]})},getStatus:function(){if(this.layout.status)return this.layout.status;this.layout.status=BX.create("div",{props:{className:"mp-item-status"},children:[this.getStatusPromo(),this.getStatusInstalled(),this.getStatusTop()]});return this.layout.status},getStatusInstalled:function(){if(!this.installed)return;return BX.create("div",{props:{className:"mp-item-status-item mp-item-status-item-installed"},text:BX.message("MARKETPLACE_INSTALLED").toUpperCase()})},getStatusPromo:function(){if(!this.promo)return;return BX.create("div",{props:{className:"mp-item-status-item mp-item-status-item-sale"},text:BX.message("MARKETPLACE_SALE").toUpperCase()})},getStatusRecommended:function(){if(!this.recommended)return;return BX.create("div",{props:{className:"mp-item-status-item mp-item-status-item-recommended"},text:"Recommended"})},getStatusTop:function(){if(!this.top)return;return BX.create("div",{props:{className:"mp-item-status-item mp-item-status-item-top"}})},getImage:function(){if(this.layout.image)return this.layout.image;this.layout.image=BX.create("div",{props:{className:"mp-item-image"},style:{backgroundImage:this.image?'url("'+this.image+'")':null}});if(!this.layout.image.hasAttribute("style"))this.layout.image.style.backgroundSize="auto";return this.layout.image},getLabels:function(){if(this.layout.labels!==null)return this.layout.labels;this.layout.labels="";if(BX.type.isArray(this.labels)){var t,e,i=[],s;for(e=0;e<Math.min(this.labels.length,5);e++){t=this.labels[e];t["COLOR"]=BX.type.isNotEmptyString(t["COLOR"])?t["COLOR"]:"";i.push(BX.create("div",{props:{className:"mp-badge-ribbon-box"+(t["COLOR"]!==""&&t["COLOR"].substring(0,1)!=="#"?" mp-badge-ribbon-box-"+t["COLOR"]:"")},children:[BX.create("span",{props:{className:"mp-badge-ribbon-item"},style:t["COLOR"].substring(0,1)==="#"?{backgroundColor:t["COLOR"]}:{},children:[BX.create("textNode",{text:t["TEXT"]}),BX.create("span",{props:{className:"mp-badge-ribbon-item-after"},style:t["COLOR"].substring(0,1)==="#"?{borderColor:[t["COLOR"],"transparent",t["COLOR"],t["COLOR"]].join(" ")}:{}})]})]}))}if(i.length>0){this.layout.labels=BX.create("div",{props:{className:"mp-badge-ribbon-wrap"},children:i})}}return this.layout.labels},getClickEvent:function(){if(!!this.onclick&&this.onclick!==""){return new Function("",this.onclick)}else{return BX.delegate(function(){if(this.infoHelperCode!==false){top.BX.UI.InfoHelper.show(this.infoHelperCode)}else{BX.SidePanel.Instance.open(this.url)}},this)}},getTitle:function(){if(this.layout.title){return this.layout.title}this.layout.title=BX.create("div",{props:{className:"mp-item-title"},children:[this.layout.clipTitle=BX.create("span",{text:this.title})],events:{click:this.getClickEvent()}});return this.layout.title},getDesc:function(){if(this.layout.desc)return this.layout.desc;this.layout.desc=BX.create("div",{props:{className:"mp-item-developer"+(this.hasSecondDesc()?"":" mp-item-developer-full")},text:this.shortDesc?this.shortDesc:this.developer});return this.layout.desc},hasSecondDesc:function(){return BX.type.isString(this.secondaryDesc)&&this.secondaryDesc!==""},getSecondaryDesc:function(){if(this.layout.secondaryDesc)return this.layout.secondaryDesc;if(this.hasSecondDesc()){this.layout.secondaryDesc=BX.create("div",{props:{className:"mp-item-desc-box"},children:[BX.create("div",{props:{className:"mp-item-desc"},text:this.secondaryDesc}),BX.create("div",{props:{className:"mp-item-desc-icon"}})]})}return this.layout.secondaryDesc},getControls:function(){if(this.layout.controls)return this.layout.controls;var t=null;if(this.currency)t=this.currency+"/"+this.period;this.layout.controls=BX.create("div",{props:{className:"mp-item-controls"},children:[this.layout.buttonAction=BX.create("div",{props:{className:"ui-btn ui-btn-xs ui-btn-secondary ui-btn-round"},text:this.action,events:{click:this.getClickEvent()}}),this.layout.price=BX.create("div",{props:{className:"mp-item-controls-rate"},children:[BX.create("span",{text:this.payment}),BX.create("span",{props:{className:"mp-item-controls-rate-currency"},html:t})]})]});return this.layout.controls},afterRender:function(){this.clipTitle();this.clipDesc()},clipDesc:function(){BX.cleanNode(this.layout.desc);this.layout.descriptionWrapper=BX.create("span",{text:this.shortDesc?this.shortDesc:this.developer});this.layout.desc.appendChild(this.layout.descriptionWrapper);var t=this.layout.desc.offsetHeight;var e=this.shortDesc?this.shortDesc:this.developer;var i=0;while(t<=this.layout.descriptionWrapper.offsetHeight&&e.length>i){i=i+2;this.layout.descriptionWrapper.innerText=e.slice(0,-i)+"..."}},clipTitle:function(){for(var t=this.layout.title.offsetHeight,e=0;t<this.layout.clipTitle.offsetHeight;e++){e++;this.layout.clipTitle.innerHTML=this.title.slice(0,-e)+"..."}}};
/* End */
;; /* /bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.min.js?17287331815071*/
; /* /bitrix/components/bitrix/rest.configuration.action/templates/.default/script.min.js?17287331821175*/
; /* /bitrix/components/bitrix/rest.marketplace.category/templates/banner/script.min.js?17287331822905*/
; /* /bitrix/components/bitrix/rest.marketplace.category/templates/list/script.min.js?17287331829446*/

//# sourceMappingURL=page_f809c98845f37fea72764304422a5e41.map.js