; /* /bitrix/js/tasks/kanban/actions.min.js?17287331741566*/
; /* /bitrix/js/tasks/kanban/grid.min.js?172873317428234*/
; /* /bitrix/js/tasks/kanban/item.min.js?172873317422718*/
; /* /bitrix/js/tasks/kanban/column.min.js?17287331748290*/

; /* Start:"a:4:{s:4:"full";s:53:"/bitrix/js/tasks/kanban/actions.min.js?17287331741566";s:6:"source";s:34:"/bitrix/js/tasks/kanban/actions.js";s:3:"min";s:38:"/bitrix/js/tasks/kanban/actions.min.js";s:3:"map";s:38:"/bitrix/js/tasks/kanban/actions.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Tasks.Kanban");BX.Tasks.Kanban.Actions={notifySimpleAction:function(e,t){e="TASKS_KANBAN_PANEL_"+e;if(typeof BX.message[e]!=="undefined"){var i=BX.message[e];if(BX.type.isPlainObject(t)){for(var n in t){i=i.replace("#"+n+"#",t[n])}}BX.UI.Notification.Center.notify({content:i})}},simpleAction:function(e,t,i){const n=t.action;t.groupAction="Y";t.taskId=this.getMapKeys(e.getSelectedItems());e.ajax(n,t).then((n=>{const o=n.data;const a=n.errors.pop();if(o&&!a){if(!i){e.onApplyFilter()}e.stopActionPanel();this.notifySimpleAction(t.action.toUpperCase(),t)}else if(a){BX.Kanban.Utils.showErrorDialog(a.message,true)}}),(e=>{BX.Kanban.Utils.showErrorDialog("Error: "+e.errors[0].message,true)}))},getMapKeys:function(e){var t=[];e.forEach((function(e,i){t.push(i)}));return t},deadline:function(e,t){BX.calendar({node:t,bTime:true,bCompatibility:false,callback:function(t){var i=BX.date.convertBitrixFormat(BX.message("FORMAT_DATETIME"));this.simpleAction(e,{action:"deadlineTask",deadline:BX.date.format(i,t)})}.bind(this)})},member:function(e,t,i,n){if(typeof n==="undefined"){n="user"}var o=new BX.Tasks.Integration.Socialnetwork.NetworkSelector({scope:t,id:i,mode:n,query:false,useSearch:true,useAdd:false,parent:this,popupOffsetTop:5,popupOffsetLeft:40});o.bindEvent("item-selected",function(t){var a={action:i};if(n==="group"){a["groupId"]=t["id"]}else if(n==="user"){a["userId"]=t["id"]}a["entityName"]=t["nameFormatted"];this.simpleAction(e,a);o.close()}.bind(this));o.open()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:51:"/bitrix/js/tasks/kanban/grid.min.js?172873317428234";s:6:"source";s:31:"/bitrix/js/tasks/kanban/grid.js";s:3:"min";s:35:"/bitrix/js/tasks/kanban/grid.min.js";s:3:"map";s:35:"/bitrix/js/tasks/kanban/grid.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Tasks.Kanban");BX.Tasks.Kanban.Grid=function(t){this.ownerId=Number(t.ownerId);this.groupId=Number(t.groupId);this.groupingMode=Boolean(t.isGroupingMode);this.isSprintView=t.isSprintView==="Y";this.networkEnabled=t.networkEnabled||false;this.gridHeader=Boolean(t.gridHeader);this.parentTaskId=parseInt(t.parentTaskId,10);this.parentTaskName=t.parentTaskName;this.parentTaskCompleted=Boolean(t.parentTaskCompleted);this.neighborGrids=[];this.delayedQueueForChildGrid={};this.isBindEvents=false;BX.Kanban.Grid.apply(this,arguments);BX.addCustomEvent(this,"Kanban.Grid:onItemMoved",BX.delegate(this.onItemMoved,this));BX.addCustomEvent(this,"Kanban.Grid:onItemAddedAsync",BX.delegate(this.onItemAddedAsync,this));BX.addCustomEvent(this,"Kanban.Grid:onColumnMoved",BX.delegate(this.onColumnMoved,this));BX.addCustomEvent(this,"Kanban.Grid:onColumnUpdated",BX.delegate(this.onColumnUpdated,this));BX.addCustomEvent(this,"Kanban.Grid:onColumnLoadAsync",BX.delegate(this.onColumnLoadAsync,this));BX.addCustomEvent(this,"Kanban.Grid:onColumnRemovedAsync",BX.delegate(this.onColumnRemovedAsync,this));BX.addCustomEvent(this,"Kanban.Grid:onColumnAddedAsync",BX.delegate(this.onColumnAddedAsync,this));BX.addCustomEvent(this,"Kanban.Grid:onRender",BX.delegate(this.onRender,this));BX.addCustomEvent(this,"Kanban.Grid:onRender",BX.delegate(this.onGridRender,this));BX.addCustomEvent("BX.Main.Filter:apply",BX.delegate(this.onApplyFilter,this));BX.addCustomEvent("onTaskTimerChange",BX.delegate(this.onTaskTimerChange,this));BX.addCustomEvent("onTaskSortChanged",BX.delegate(this.onTaskSortChanged,this));BX.addCustomEvent(this,"Kanban.Grid:multiSelectModeOn",BX.delegate(this.startActionPanel,this));BX.addCustomEvent(this,"Kanban.Grid:multiSelectModeOff",BX.delegate(this.stopActionPanel,this));BX.addCustomEvent(this,"Kanban.Grid:selectItem",BX.delegate(this.setTotalSelectedItems,this));BX.addCustomEvent(this,"Kanban.Grid:unSelectItem",BX.delegate(this.setTotalSelectedItems,this));BX.addCustomEvent(this,"Kanban.Grid:onItemDragStart",BX.delegate(this.setKanbanDragMode,this));BX.addCustomEvent(this,"Kanban.Grid:onItemDragStop",BX.delegate(this.unSetKanbanDragMode,this));BX.addCustomEvent(this,"Kanban.Grid:onItemDragStart",BX.delegate(this.setKanbanRealtimeMode,this));BX.addCustomEvent(this,"Kanban.Grid:onItemDragStop",BX.delegate(this.unSetKanbanRealtimeMode,this));if(this.isScrumGrid()){BX.bind(this.getGridContainer(),"scroll",BX.delegate(this.onGridScroll,this))}this.bindEvents();const e=this.isScrumGrid()?this.getData().params.IS_COMPLETED_SPRINT==="Y":false;if(!e){this.subscribeToPull()}};BX.Tasks.Kanban.Grid.prototype={__proto__:BX.Kanban.Grid.prototype,constructor:BX.Tasks.Kanban.Grid,accessNotifyDialog:null,ajax:function(t,e){const n=this.getData();e.params=n.params;if(n.kanbanType==="TL"){e.timeline="Y"}else{e.personal=e.params.PERSONAL}if(e.groupAction==="Y"){e.groupMode="Y"}return BX.ajax.runComponentAction("bitrix:tasks.kanban",t,{mode:"class",data:e})},bindEvents:function(){if(!this.isBindEvents){BX.Event.EventEmitter.subscribe("tasks-kanban-settings-fields-view",function(){this.showFieldsSelectPopup()}.bind(this));this.isBindEvents=true}},subscribeToPull(){new BX.Pull.QueueManager({moduleId:"tasks",userId:this.ownerId,additionalData:{},events:{onBeforePull:t=>{if(this.isScrumGridHeader()){t.preventDefault()}const{pullData:{command:e,params:n}}=t.data;const a={comment_read_all:this.onPullCommentReadAll,tag_changed:this.onPullTagChanged};if(a[e]){a[e].apply(this,[n])}},onPull:t=>{const{pullData:{command:e,params:n},promises:a}=t.data;const s=this.resolveIdByEventParams(e,n);if(s>0){a.push(Promise.resolve({data:{id:s,action:e,actionParams:n}}))}}},callbacks:{onBeforeQueueExecute:t=>Promise.resolve(),onQueueExecute:t=>new Promise(((e,n)=>{this.getPullTasksData(this.getPullTaskIds(t)).then((a=>{this.executePullQueue(this.getPullItems(t,a)).then((()=>{e()})).catch((t=>{n(t)}))})).catch((t=>{n(t)}))})),onReload:()=>{}}})},resolveIdByEventParams(t,e){const n=["comment_add","stage_change","task_add","task_update","task_view","task_remove"];if(n.includes(t)){const n=this.recognizeTaskId(e);if(n>0){return n}throw new Error(`taskId is not resolved for command: ${t}`)}return 0},getPullTaskIds(t){const e=[];t.forEach((t=>{e.push(t.id)}));return e},getPullTasksData(t){return new Promise(((e,n)=>{BX.ajax.runAction("tasks.task.list",{data:{filter:{ID:t},params:{RETURN_ACCESS:"Y",SIFT_THROUGH_FILTER:{sprintKanban:this.isScrumGrid()?"Y":"N",isCompletedSprint:this.isScrumGrid()?requestParams.IS_COMPLETED_SPRINT:"N",userId:this.ownerId,groupId:this.groupId}},start:-1}}).then((a=>{const s=[];if(a.data.tasks.length>0){a.data.tasks.forEach((t=>{s.push(parseInt(t.id,10))}))}this.ajax("refreshListTasks",{taskIds:s,isScrum:this.isScrumGrid()?"Y":"N",parentId:this.getParentTaskId()}).then((n=>{const a=n.data;const s=new Map;if(BX.type.isArray(a)){a.forEach((t=>{s.set(parseInt(t.id,10),t)}))}t.forEach((t=>{if(!s.has(t)){s.set(t,null)}}));e(s)}),(t=>{n(t)}))})).catch((t=>{n(t)}))}))},executePullQueue(t){const e={comment_add:this.onPullCommentAdd,stage_change:this.onPullStageChange,task_add:this.onPullTaskAdd,task_update:this.onPullTaskUpdate,task_view:this.onPullTaskView,task_remove:this.onPullTaskRemove};return new Promise(((n,a)=>{t.forEach((t=>{const{data:{action:n,actionParams:a,id:s},taskData:i}=t;if(e[n]){e[n].apply(this,[a,s,i])}}));n()}))},getPullItems(t,e){const n=[];t.forEach((t=>{n.push({...t,...{taskData:e.get(t.data.id)}})}));return n},showFieldsSelectPopup:function(){var t=this.getData();const e=new BX.UI.CheckboxList({columnCount:3,lang:{title:t.customSectionsFields.title},sections:t.customSectionsFields.sections,categories:t.customSectionsFields.categories,options:t.customSectionsFields.options,events:{onApply:t=>{this.ajax("saveUserSelectedFields",{fields:t.data.fields}).then((t=>{this.onApplyFilter()}))}}});e.show()},isRealtimeMode:function(){return this.data.newTaskOrder==="actual"},getGroupId:function(){return this.groupId},accessNotify:function(){if(typeof BX.Intranet!=="undefined"&&typeof BX.Intranet.NotifyDialog!=="undefined"){if(this.accessNotifyDialog===null){this.accessNotifyDialog=new BX.Intranet.NotifyDialog({listUserData:this.getData().admins,notificationHandlerUrl:BX.Uri.addParam(this.getAjaxHandlerPath(),{action:"notifyAdmin"}),popupTexts:{sendButton:BX.message("TASKS_KANBAN_NOTIFY_BUTTON"),title:BX.message("TASKS_KANBAN_NOTIFY_TITLE"),header:BX.message("TASKS_KANBAN_NOTIFY_HEADER"),description:BX.message("TASKS_KANBAN_NOTIFY_TEXT")}})}this.accessNotifyDialog.show()}},renderLayout:function(){BX.Kanban.Grid.prototype.renderLayout.apply(this,arguments);if(this.isScrumGridHeader()){this.observeScrumGridHeader()}},onItemDragStart:function(t){this.setDragMode(BX.Kanban.DragMode.ITEM);var e=this.getData();var n=t.getData();if(e.kanbanType==="TL"){BX.Kanban.Grid.prototype.onItemDragStart.apply(this,arguments);this.getColumns().forEach((function(e){if(!e.canAddItems()){e.disableDropping()}else if(!n.allow_change_deadline&&e.getId()!==t.getColumn().getId()){e.disableDropping()}}));var a=this.getItems();for(var s in a){if(a[s].getColumn().getId()!==t.getColumn().getId()){if(!n.allow_change_deadline||!a[s].getColumn().canAddItems()){a[s].disableDropping()}}}if(!n.allow_change_deadline){t.getDragElement().appendChild(this.createAlertBlock(BX.message("TASKS_KANBAN_ME_DISABLE_DEADLINE_PART2")))}return}if(!e.rights.canSortItem){return}BX.Kanban.Grid.prototype.onItemDragStart.apply(this,arguments)},createAlertBlock:function(t){return BX.create("div",{props:{className:"tasks-kanban-item-alert"},text:t})},addItemOrder:function(t){var e=this.getData();var n=null;var a=[];if(!t.columnId&&t.columns){for(var s=0,i=t.columns.length;s<i;s++){n=this.getColumn(t.columns[s]);if(n){t.columnId=n.getId()}}}if(!t.columnId){n=this.getColumns()[0];t.columnId=n.getId()}if(t.columnId&&!n){n=this.getColumn(t.columnId);if(!n){n=this.getColumns()[0];t.columnId=n.getId()}}if(n){a=n.getItems()}if(e.newTaskOrder==="desc"||this.isRealtimeMode()){if(this.isRealtimeMode()&&a.length>0){if(typeof t.data["date_activity_ts"]!=="undefined"){var o=t.data["date_activity_ts"];if(o>0){for(var s=0,i=a.length;s<i;s++){if(t.id!==a[s].getId()&&a[s].data["date_activity_ts"]<o){t.targetId=a[s].getId();break}}}}}else if(a.length>0){t.targetId=a[0].getId();if(t.targetId===t.id&&a[1]){t.targetId=a[1].getId()}}if(this.isRealtimeMode()&&this.getItem(t.id)&&n&&!n.getDraftItem()){this.updateItem(t.id,t,true);if(t.targetId){this.moveItem(t.id,t.columnId,t.targetId)}}else{this.addItem(t)}}else if(n&&a.length>=n.total){this.addItem(t)}},updateItemState(t,e){if(e){this.addItemOrder(e)}else{if(this.hasItem(t)){this.removeItem(t)}}},updateItem:function(t,e,n){if(n!==true&&BX.Bitrix24&&BX.Bitrix24.Slider&&BX.Bitrix24.Slider.destroy&&this.getItem(t)){var a=this.getItem(t).getTaskUrl(t);BX.Bitrix24.Slider.destroy(a)}BX.Kanban.Grid.prototype.updateItem.apply(this,arguments)},removeItem:function(t){var e=BX.Kanban.Grid.prototype.removeItem.apply(this,arguments);BX.onCustomEvent(this,"Kanban.Grid:onItemRemoved",{itemId:t});return e},onItemAddedAsync:function(t){t.push(BX.delegate(this.addTask,this))},onColumnLoadAsync:function(t){t.push(BX.delegate(this.getColumnItems,this))},onColumnRemovedAsync:function(t){t.push(BX.delegate(this.removeStage,this))},onColumnAddedAsync:function(t){t.push(BX.delegate(this.addStage,this))},onRender:function(t){var e=t.getData();if(t.firstRenderComplete||e["kanbanType"]!=="TL"){return}if(e["setClientDate"]===true){var n=new BX.Promise;this.fadeOut();this.ajax("setClientDate",{clientDate:e["clientDate"],clientTime:e["clientTime"]}).then((t=>{this.removeItems();this.loadData(t.data);n.fulfill();this.fadeIn()}))}},getColumnItems:function(t){const e=new BX.Promise;if(this.isChildScrumGrid()){e.fulfill([]);return e}this.ajax("getColumnItems",{pageId:t.getPagination().getPage()+1,columnId:t.getId()}).then((t=>{const n=t.data;const a=t.errors.pop();if(n&&(BX.type.isArray(n)||BX.type.isArray(n.items))&&!a){e.fulfill(BX.type.isArray(n)?n:n.items)}else if(n){BX.Kanban.Utils.showErrorDialog(a.message,true);e.reject(a)}}),(t=>{const n=t.errors.pop().message;BX.Kanban.Utils.showErrorDialog("Error: "+n,true);e.reject("Error: "+n)}));return e},removeStage:function(t){const e=new BX.Promise;this.ajax("modifyColumn",{fields:{id:t.getId(),delete:1}}).then((t=>{const n=t.data;const a=t.errors.pop();if(!a){this.actionPanel=null;e.fulfill(n)}else{e.reject(a)}}),(t=>{const n=t.errors.pop().message;BX.Kanban.Utils.showErrorDialog("Error: "+n,true);e.reject("Error: "+n)}));return e},addStage:function(t){var e=new BX.Promise;var n=this.getPreviousColumnSibling(t);var a=n?n.getId():0;this.ajax("modifyColumn",{fields:{columnName:t.getName(),columnColor:t.getColor(),afterColumnId:a}}).then((t=>{const n=t.data;const a=t.errors.pop();if(!a){this.actionPanel=null;e.fulfill(n)}else{BX.Kanban.Utils.showErrorDialog(a.message,true);e.reject(a)}}),(t=>{const n=t.errors.pop().message;BX.Kanban.Utils.showErrorDialog("Error: "+n,true);e.reject("Error: "+n)}));return e},addItem:function(t){if(this.isScrumGrid()){var e=this.getItemType(t.type);var n=new e(t);if(!(n instanceof BX.Kanban.Item)){throw new Error("Item type must be an instance of BX.Kanban.Item")}if(this.isChildScrumGrid()){if(n instanceof BX.Tasks.Kanban.Item&&n.isCompleted()===false){BX.onCustomEvent(this,"Kanban.Grid:onAddItemInProgress")}return BX.Kanban.Grid.prototype.addItem.apply(this,arguments)}t=t||{};var a=this.getColumn(t.columnId),s;if(!a){return null}if(t.hasOwnProperty("isSubTask")&&t.isSubTask){s=false;this.getNeighborGrids().forEach(function(e){if(!e.isScrumGridHeader()){if(e.isChildTask(t["parentId"])){e.addItem(t);delete this.delayedQueueForChildGrid[t["id"]];s=true}}}.bind(this));if(!s){this.delayedQueueForChildGrid[t["id"]]=t}}else if(t.hasOwnProperty("isParentTask")&&t.isParentTask){if(t.hasOwnProperty("isVisibilitySubtasks")&&t.isVisibilitySubtasks==="N"){return BX.Kanban.Grid.prototype.addItem.apply(this,arguments)}s=false;this.getNeighborGrids().forEach(function(e){if(!e.isScrumGridHeader()){if(e.isParentTask(t["id"])){s=true}}}.bind(this));if(!s){var i=[];this.getColumns().forEach(function(t){i.push({id:t.getId(),name:t.getName(),color:t.getColor(),total:t.getTotal()})}.bind(this));BX.onCustomEvent(this,"Kanban.Grid:onAddParentTask",{id:t.id,name:t.data.name,completed:t.data.completed?"Y":"N",storyPoints:t.data.storyPoints,columnId:t.columnId,columns:i,items:[]})}}else{return BX.Kanban.Grid.prototype.addItem.apply(this,arguments)}}else{return BX.Kanban.Grid.prototype.addItem.apply(this,arguments)}},addItemsFromQueue:function(){Object.values(this.delayedQueueForChildGrid).forEach(function(t){this.addItem(t)}.bind(this))},addTask:function(t){const e=new BX.Promise;const n=t.getColumn().getNextItemSibling(t);const a=this.getData();this.ajax("addTask",{taskName:t.getData().title,columnId:t.getColumn().getId(),parentTaskId:this.parentTaskId,beforeItemId:a.newTaskOrder==="desc"&&n?n.getId():0}).then((t=>{const n=t.data;const a=t.errors.pop();if(n&&!a){this.analytics("task_create","quick_button","success");e.fulfill(n)}else if(a){BX.Kanban.Utils.showErrorDialog(a.message,true);this.analytics("task_create","quick_button","error");e.reject(a.message)}}),(t=>{const n=t.errors.pop().message;BX.Kanban.Utils.showErrorDialog("Error: "+n,true);this.analytics("task_create","quick_button","error");e.reject("Error: "+n)}));return e},onItemMoved:function(t,e,n){const a=t.getId();let s=0;const i=n?n.getId():0;const o=e?e.getId():0;const r=this.getData();if(i===0){s=e.getPreviousItemSibling(t);if(s){s=s.getId()}}this.ajax("moveTask",{itemId:a,columnId:o,beforeItemId:i,afterItemId:s}).then((e=>{const n=e.data;const s=e.errors.pop();if(n&&!s){this.updateItem(a,n);if(r.kanbanType==="TL"){const e=n.data.deadline.rawValue??t.getDeadline();BX.UI.Notification.Center.notify({content:e?BX.message("MAIN_KANBAN_NOTIFY_CHANGE_DEADLINE").replace("#date#",e):BX.message("MAIN_KANBAN_NOTIFY_REMOVE_DEADLINE")})}if(typeof n.data!=="undefined"&&n.data.hiddenByFilter===true){this.removeItem(t)}if(this.isChildScrumGrid()){top.BX.loadExt("tasks.scrum.task-status").then((()=>{if(!BX.type.isUndefined(top.BX.Tasks.Scrum)&&!BX.type.isUndefined(top.BX.Tasks.Scrum.TaskStatus)){this.taskStatus=new top.BX.Tasks.Scrum.TaskStatus({groupId:this.groupId,parentTaskId:this.parentTaskId,taskId:a,action:this.getFinishColumn().getId()===o?"complete":"renew"});this.taskStatus.update().then((t=>{const e=top.BX.Tasks.Scrum.TaskStatus.actions;switch(t){case e.complete:case e.renew:case e.proceed:this.updateParentTaskStatus(t);break;case e.skip:break}}))}}))}}else if(s){BX.Kanban.Utils.showErrorDialog(s.message,true)}}),(t=>{BX.Kanban.Utils.showErrorDialog("Error: "+t.errors[0].message,true)}))},updateParentTaskStatus:function(t){if(t==="proceed"){this.ajax("proceedParentTask",{taskId:this.parentTaskId}).then((t=>{const e=t.data;this.addItemToParentGrid(e);const n=this.getItemFromParentGrid(this.parentTaskId);if(n){this.scrollToItem(n)}setTimeout((()=>{BX.onCustomEvent(this,"Kanban.Grid:onProceedParentTask",[this])}),300)}),(t=>{BX.Kanban.Utils.showErrorDialog("Error: "+t.errors[0].message,true)}))}else{const e=t==="complete";const n=e?"completeParentTask":"renewParentTask";this.ajax(n,{taskId:this.parentTaskId,finishColumnId:this.getFinishColumn().getId(),newColumnId:this.getNewColumn().getId()}).then((t=>{const n=t.errors.pop();this.actionPanel=null;if(!n){if(e){this.parentTaskCompleted=true;BX.onCustomEvent(this,"Kanban.Grid:onCompleteParentTask",[this])}else{this.parentTaskCompleted=false;BX.onCustomEvent(this,"Kanban.Grid:onRenewParentTask",[this])}}else{BX.Kanban.Utils.showErrorDialog(n.message,true)}}),(t=>{BX.Kanban.Utils.showErrorDialog("Error: "+t.errors[0].message,true)}))}},getColumns:function(){return BX.Kanban.Grid.prototype.getColumns.call(this)},getFinishColumn:function(){return this.getColumns().find((function(t){return t.isFinishType()}))},getNewColumn:function(){return this.getColumns().find((function(t){return t.isNewType()}))},getColumnCount:function(){return Object.keys(this.getColumns()).length},isParentTaskCompleted:function(){return this.parentTaskCompleted},onColumnMoved:function(t,e){var n=t.getId();var a=this.getPreviousColumnSibling(t);var s=a?a.getId():0;if(this.isScrumGridHeader()){this.moveColumnsInNeighborGrids(t,e)}this.ajax("moveColumn",{columnId:n,afterColumnId:s}).then((t=>{const e=t.errors.pop();if(e){BX.Kanban.Utils.showErrorDialog(e.message,true)}}),(t=>{BX.Kanban.Utils.showErrorDialog("Error: "+t.errors[0].message,true)}))},onColumnUpdated:function(t){var e=t.getId();var n=t.getName();var a=t.getColor();this.ajax("modifyColumn",{fields:{id:e,columnName:n,columnColor:a}}).then((t=>{const e=t.errors.pop();this.actionPanel=null;if(e){BX.Kanban.Utils.showErrorDialog(e.message,true)}}),(t=>{BX.Kanban.Utils.showErrorDialog("Error: "+t.errors[0].message,true)}))},getAjaxHandlerPath:function(){return`/bitrix/services/main/ajax.php?mode=class&c=${encodeURIComponent("bitrix:tasks.kanban")}`},onApplyFilter:function(t,e,n,a,s){if(this.isGroupingMode()){return}this.fadeOut();if(s){s.autoResolve=false}const i={};i.params=this.getData().params;if(this.getData().kanbanType==="TL"){i.timeline="Y"}this.ajax("applyFilter",{}).then((t=>{const e=t.data;const n=this.getData();if(typeof e.customFields!=="undefined"){n.customFields=e.customFields}if(this.differentColumnCount(e)){this.getColumns().forEach((t=>this.removeColumn(t)))}this.removeItems();this.loadData(e);if(a){a.fulfill()}this.fadeIn()}),(t=>{if(a){a.reject()}this.fadeIn()}))},differentColumnCount:function(t){if(BX.Type.isArray(t.columns)){const e=t.columns.length;const n=this.getColumnCount();return e!==n}return false},onTaskTimerChange:function(t){if(t.taskId&&t.action==="refresh_daemon_event"&&t.data&&t.data.TIMER&&t.data.TIMER.TIMER_STARTED_AT){var e=this.getItem(t.taskId);var n=Math.floor(Date.now()/1e3);var a=parseInt(n-t.data.TIMER.TIMER_STARTED_AT);if(e){e.setDataKey("time_logs",e.getData().time_logs_start+a);e.setDataKey("in_progress",true);e.render()}}},onTaskSortChanged:function(t){var e=this.getData();e.newTaskOrder=t.newTaskOrder;this.setData(e)},recognizeTaskId:function(t){var e=0;if(t.TASK_ID){e=parseInt(t.TASK_ID)}else if(t.taskId){e=parseInt(t.taskId)}else if(t["entityXmlId"]){if(t["entityXmlId"].indexOf("TASK_")===0){e=parseInt(t["entityXmlId"].substr(5))}}return e},onPullCommentReadAll(t){Object.values(this.getItems()).forEach((t=>{const e=t.data;const n=e.is_expired&&!e.completed&&!e.completed_supposedly;const a=t.task_counter;const s=a.getValue();if(s>0&&(!n||s>1)){e.counter.value=n?1:0;a.update(e.counter.value);t.render()}}))},onPullTagChanged(t){if(this.isScrumGrid()){BX.Tasks.Scrum.Kanban.onApplyFilter()}else{this.onApplyFilter()}},onPullCommentAdd(t,e,n){this.updateItemState(e,n)},onPullStageChange(t,e,n){this.updateItemState(e,n)},onPullTaskAdd(t,e,n){this.updateItemState(e,n)},onPullTaskUpdate(t,e,n){this.updateItemState(e,n)},onPullTaskView(t,e,n){this.updateItemState(e,n)},onPullTaskRemove(t,e){this.removeItem(e)},refreshTask:function(t){this.ajax("refreshTask",{taskId:t,isScrum:this.isScrumGrid()?"Y":"N",parentId:this.getParentTaskId()}).then((t=>{const e=t.data;if(e&&!BX.type.isArray(e)&&t.errors.length===0){this.addItemOrder(e)}}),(t=>{}))},onGridRender:function(){var t=this.getGridContainer();var e=this.getColumns().reduce((function(t,e){return t+e.getContainer().offsetWidth}),0);var n=e+80<t.offsetWidth;this.getRenderToContainer().classList[n?"add":"remove"]("tasks-kanban-border")},changeDemoView:function(t){var e=this.getColumns();for(var n=0,a=e.length;n<a;n++){this.removeColumn(e[n])}this.ajax("changeDemoView",{viewId:t}).then((t=>{const e=t.data;this.loadData(e)}),(t=>{const e=t.errors[0].message;BX.Kanban.Utils.showErrorDialog("Error: "+e,true)}))},initActionPanel:function(){this.actionPanel=new BX.UI.ActionPanel({renderTo:document.querySelector(".pagetitle-wrap"),removeLeftPosition:true,maxHeight:56,parentPosition:"bottom"});this.actionPanel.draw();var t=this;var e=[];var n=this.getData();if(n.kanbanType!=="TL"&&n.rights.canSortItem){var a=function(e,n){return function(){BX.Tasks.Kanban.Actions.simpleAction(t,{action:"moveTask",columnId:e,columnName:BX.util.htmlspecialchars(n)})}};this.getColumns().forEach((function(t){e.push({text:t.getName(),onclick:a(t.getId(),t.getName())})}));this.actionPanel.appendItem({id:"stage",text:BX.message("TASKS_KANBAN_PANEL_STAGE"),items:e})}this.actionPanel.appendItem({id:"complete",text:BX.message("TASKS_KANBAN_PANEL_COMPLETE"),onclick:function(){BX.UI.Dialogs.MessageBox.confirm(BX.message("TASKS_KANBAN_PANEL_CONFIRM_MESS_COMPLETE"),BX.message("TASKS_KANBAN_PANEL_CONFIRM_TITLE"),(function(e){BX.Tasks.Kanban.Actions.simpleAction(t,{action:"completeTask"});e.close()}))}});this.actionPanel.appendItem({id:"deadline",text:BX.message("TASKS_KANBAN_PANEL_DEADLINE"),onclick:function(){BX.Tasks.Kanban.Actions.deadline(t,this.layout.container);BX.PreventDefault()}});this.actionPanel.appendItem({id:"members",text:BX.message("TASKS_KANBAN_PANEL_MEMBERS"),items:[{text:BX.message("TASKS_KANBAN_PANEL_MEMBERS_RESPONSE"),onclick:function(){BX.Tasks.Kanban.Actions.member(t,this.layout.container,"delegateTask");BX.PreventDefault()}},{text:BX.message("TASKS_KANBAN_PANEL_MEMBERS_CREATED"),onclick:function(){BX.Tasks.Kanban.Actions.member(t,this.layout.container,"changeAuthorTask");BX.PreventDefault()}},{text:BX.message("TASKS_KANBAN_PANEL_MEMBERS_CORESPONSE"),onclick:function(){BX.Tasks.Kanban.Actions.member(t,this.layout.container,"addAccompliceTask");BX.PreventDefault()}},{text:BX.message("TASKS_KANBAN_PANEL_MEMBERS_AUDITOR"),onclick:function(){BX.Tasks.Kanban.Actions.member(t,this.layout.container,"addAuditorTask");BX.PreventDefault()}}]});this.actionPanel.appendItem({id:"group",text:BX.message("TASKS_KANBAN_PANEL_GROUP"),onclick:function(){BX.Tasks.Kanban.Actions.member(t,this.layout.container,"changeGroupTask","group");BX.PreventDefault()}});this.actionPanel.appendItem({id:"favorite",text:BX.message("TASKS_KANBAN_PANEL_FAVORITE"),items:[{text:BX.message("TASKS_KANBAN_PANEL_FAVORITE_ADD"),onclick:function(){BX.Tasks.Kanban.Actions.simpleAction(t,{action:"addFavoriteTask"})}},{text:BX.message("TASKS_KANBAN_PANEL_FAVORITE_REMOVE"),onclick:function(){BX.Tasks.Kanban.Actions.simpleAction(t,{action:"deleteFavoriteTask"})}}]});this.actionPanel.appendItem({id:"delete",text:BX.message("TASKS_KANBAN_PANEL_DELETE"),onclick:function(){BX.UI.Dialogs.MessageBox.confirm(BX.message("TASKS_KANBAN_PANEL_CONFIRM_MESS_DELETE"),BX.message("TASKS_KANBAN_PANEL_CONFIRM_TITLE"),(function(e){BX.Tasks.Kanban.Actions.simpleAction(t,{action:"deleteTask"});e.close()}))}})},startActionPanel:function(){if(!this.actionPanel){this.initActionPanel()}this.actionPanel.showPanel()},stopActionPanel:function(){if(!this.actionPanel){return}this.actionPanel.hidePanel()},setTotalSelectedItems:function(){if(!this.actionPanel){this.initActionPanel()}this.actionPanel.setTotalSelectedItems(this.getSelectedItems().size)},setKanbanDragMode:function(){BX.addClass(document.body,"task-kanban-drag-mode")},unSetKanbanDragMode:function(){BX.removeClass(document.body,"task-kanban-drag-mode")},setKanbanRealtimeMode:function(){if(this.isRealtimeMode()){this.getOuterContainer().classList.add("tasks-kanban-realtime-mode")}},unSetKanbanRealtimeMode:function(){if(this.isRealtimeMode()){this.getOuterContainer().classList.remove("tasks-kanban-realtime-mode")}},getGridContainer:function(){var t=BX.Kanban.Grid.prototype.getGridContainer.call(this);if(this.isScrumGridHeader()){t.style.overflow="hidden"}return t},adjustHeight:function(){if(!this.isGroupingMode()){BX.Kanban.Grid.prototype.adjustHeight.call(this)}},observeScrumGridHeader:function(){if(typeof IntersectionObserver==="undefined"){return}var t=this.getOuterContainer();var e=t.parentElement;var n=e.querySelector(".tasks-scrum-kanban-header-target-observer");if(!n){return}var a=new IntersectionObserver(function(e){if(e[0].isIntersecting===true){if(t.classList.contains("tasks-scrum-kanban-header")){t.classList.remove("tasks-scrum-kanban-header")}n.classList.remove("--with-margin")}else{if(!t.classList.contains("tasks-scrum-kanban-header")){t.classList.add("tasks-scrum-kanban-header")}n.classList.add("--with-margin")}}.bind(this),{threshold:[0]});a.observe(n)},onGridScroll:function(t){this.neighborGrids.forEach((function(e){e.getGridContainer().scrollLeft=t.target.scrollLeft}))},getEmptyStub:function(){if(this.isScrumGrid()){this.layout.emptyStub=document.createElement("div");return this.layout.emptyStub}else{return BX.Kanban.Grid.prototype.getEmptyStub.call(this)}},getLeftEar:function(){if(this.isScrumGridHeader()){this.layout.earLeft=document.createElement("div");return this.layout.earLeft}else{return BX.Kanban.Grid.prototype.getLeftEar.call(this)}},getRightEar:function(){if(this.isScrumGridHeader()){this.layout.earRight=document.createElement("div");return this.layout.earRight}else{return BX.Kanban.Grid.prototype.getRightEar.call(this)}},addNeighborGrid:function(t){if(this!==t){var e=false;this.neighborGrids.forEach((function(n){if(n===t){e=true}}));if(!e){this.neighborGrids.push(t)}}},cleanNeighborGrids:function(){this.neighborGrids=[]},getNeighborGrids:function(){return this.neighborGrids},addItemToParentGrid:function(t){this.neighborGrids.forEach((function(e){if(!e.isScrumGridHeader()&&!e.isChildScrumGrid()){e.addItemOrder(t)}}))},getItemFromParentGrid:function(t){var e=null;this.neighborGrids.forEach((function(n){if(!n.isScrumGridHeader()&&!n.isChildScrumGrid()){e=n.getItem(t)}}));return e},removeColumnsByIdFromNeighborGrids:function(t){this.neighborGrids.forEach((function(e){e.removeColumn(e.getColumn(t))}))},moveColumnsInNeighborGrids:function(t,e){this.neighborGrids.forEach(function(n){var a=n.getColumn(t.getId());var s=n.getColumn(e.getId());if(a&&s){n.moveColumn(a,s)}}.bind(this))},isScrumGridHeader:function(){return this.gridHeader},isScrumGrid:function(){return this.isSprintView},isGroupingMode:function(){return this.groupingMode},isChildScrumGrid:function(){return this.parentTaskId>0},isParentTask:function(t){return parseInt(t,10)===this.parentTaskId},getParentTaskId:function(){return this.parentTaskId},resetPaginationPage:function(){this.getColumns().forEach((function(t){t.getPagination().loadingInProgress=false;t.getPagination().page=1}))},isChildTask:function(t){return parseInt(t,10)===this.parentTaskId},updateTotals:function(){this.getColumns().forEach(function(t){let e=0;this.getNeighborGrids().forEach((function(n){const a=n.getColumn(t.getId());if(a){e+=a.getItemsCount()}}));t.setTotal(e);t.render()}.bind(this))},getColumnsWidth:function(){let t=0;this.getColumns().forEach((function(e){t+=e.getContainer().offsetWidth}));return t+"px"},hasItem:function(t){t=parseInt(t,10);var e=false;Object.values(this.getItems()).forEach((function(n){if(parseInt(n.getId(),10)===t){e=true}}));return e},hasItemInProgress:function(){var t=false;Object.values(this.getItems()).forEach((function(e){if(!e.isCompleted()){t=true}}));return t},scrollToItem:function(t){var e;var n=function(){clearTimeout(e);e=setTimeout((function(){t.animate({duration:1e3,draw:function(e){t.layout.container.style.opacity=e*100+"%"},useAnimation:true}).then(function(){t.layout.container.style.opacity="100%"}.bind(this))}),100);BX.unbind(window,"scroll",n)};BX.bind(window,"scroll",n);t.getContainer().scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},analytics:function(t,e,n=null){const a={tool:"tasks",category:"task_operations",event:t,type:"task",c_section:this.getSectionTypeForAnalytics(),c_element:e,c_sub_section:this.getKanbanTypeForAnalytics()};if(n){a.status=n}if(BX.UI.Analytics){BX.UI.Analytics.sendData(a)}else{BX.Runtime.loadExtension("ui.analytics").then((()=>{BX.UI.Analytics.sendData(a)}))}},getSectionTypeForAnalytics:function(){if(this.isScrumGrid()){return"scrum"}if(this.getGroupId()){return"project"}return"tasks"},getKanbanTypeForAnalytics:function(){const t=this.getData().kanbanType;switch(t){case"TL":return"deadline";case"P":return"planner";default:return"kanban"}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:51:"/bitrix/js/tasks/kanban/item.min.js?172873317422718";s:6:"source";s:31:"/bitrix/js/tasks/kanban/item.js";s:3:"min";s:35:"/bitrix/js/tasks/kanban/item.min.js";s:3:"map";s:35:"/bitrix/js/tasks/kanban/item.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Tasks.Kanban");BX.Tasks.Kanban.Item=function(t){BX.Kanban.Item.apply(this,arguments);this.container=null;this.timer=null;this.isSprintView=t.isSprintView==="Y";this.networkEnabled=t.networkEnabled||false;this.storyPoints=this.data.storyPoints?this.data.storyPoints:"";this.epic=BX.type.isPlainObject(this.data.epic)?this.data.epic:null;this.calendarSettings=t.calendarSettings?t.calendarSettings:{}};BX.Tasks.Kanban.Item.prototype={__proto__:BX.Kanban.Item.prototype,constructor:BX.Tasks.Kanban.Item,dateFormats:{short:{en:"F j",de:"j. F",ru:"j F"},full:{en:"F j, Y",de:"j. F Y",ru:"j F Y"}},setOptions:function(t){if(!BX.type.isPlainObject(t)){return}BX.Kanban.Item.prototype.setOptions.apply(this,arguments);this.storyPoints=t.data.storyPoints?t.data.storyPoints:"";this.epic=BX.type.isPlainObject(t.data.epic)?t.data.epic:null},renderTime:function(t,e){var s=parseInt(t,10);var i=Math.floor(s/3600);var a=Math.floor((s-i*3600)/60);var n=s-i*3600-a*60;e=typeof e==="undefined"?true:e;if(i<10){i="0"+i}if(a<10){a="0"+a}if(n<10){n="0"+n}return i+":"+a+(e?":"+n:"")},clipTitle:function(t){let e=t;const s=e.split(" ");const i="<span>"+s[s.length-1]+"</span>";s.splice(s.length-1);e=s.join(" ")+" "+i;return e},setDataKey:function(t,e){var s=this.getData();s[t]=e},getDataKey:function(t){var e=this.getData();return e[t]},getDeadline:function(){return this.deadlineNotificationDate},setStatus:function(t){const e=this.getData();if(this.task_complete){BX.show(this.task_complete)}BX.show(this.task_status_title);BX.style(this.task_status_title,"display","inline-block");BX.removeClass(this.task_status_title,"tasks-kanban-item-blue");BX.removeClass(this.task_status_title,"tasks-kanban-item-gray");BX.removeClass(this.task_status_title,"tasks-kanban-item-red");BX.removeClass(this.task_status_title,"tasks-kanban-item-white-blue");this.setDataKey("status",t);if(t==="completed"){if(this.task_complete){BX.hide(this.task_complete)}BX.addClass(this.task_status_title,"tasks-kanban-item-gray");this.task_status_title.textContent=BX.message("TASKS_KANBAN_STATUS_COMPLETED")}else{BX.hide(this.task_status_title)}if(this.task_start&&e.in_progress&&!BX.hasClass(this.task_start,"tasks-kanban-task-pause")){BX.addClass(this.task_start,"tasks-kanban-task-pause");this.task_start.setAttribute("title",BX.message("TASKS_KANBAN_TITLE_PAUSE"))}else if(this.task_start&&!e.in_progress){BX.removeClass(this.task_start,"tasks-kanban-task-pause");this.task_start.setAttribute("title",BX.message("TASKS_KANBAN_TITLE_START"))}if(this.task_mute&&e.muted&&!BX.hasClass(this.task_mute,"tasks-kanban-task-muted")){BX.addClass(this.container,"tasks-kanban-task-muted");this.task_mute.setAttribute("title",BX.message("TASKS_KANBAN_TITLE_UNMUTE"));this.task_counter.setColor(BX.UI.Counter.Color.GRAY)}else if(this.task_mute&&!e.muted){var s=e.is_expired&&!e.completed&&!e.completed_supposedly;BX.removeClass(this.container,"tasks-kanban-task-muted");this.task_mute.setAttribute("title",BX.message("TASKS_KANBAN_TITLE_MUTE"));this.task_counter.setColor(s?BX.UI.Counter.Color.DANGER:BX.UI.Counter.Color.SUCCESS)}},muteTask:function(){var t=this.getId();var e=this.getData();var s=e.muted?"unmuteTask":"muteTask";this.getGrid().ajax(s,{taskId:t}).then((t=>{const e=t.data;const s=t.errors.pop();if(e&&!s){this.getGrid().updateItem(this.getId(),e)}else if(s){BX.Kanban.Utils.showErrorDialog(s.message,true)}}),(t=>{const e=t.errors.pop();BX.Kanban.Utils.showErrorDialog("Error: "+e.message,true)}))},startTask:function(){var t=this.getId();var e=this.getData();var s=e.in_progress?"pauseTask":"startTask";if(e.allow_time_tracking&&e.time_tracking){if(s==="startTask"){BX.TasksTimerManager.start(t)}else{BX.TasksTimerManager.stop(t)}}if(!e.allow_time_tracking||!e.time_tracking||s==="pauseTask"){this.getGrid().ajax(s,{taskId:t}).then((t=>{const e=t.data;const s=t.errors.pop();if(e&&!s){this.getGrid().updateItem(this.getId(),e)}else if(s){BX.Kanban.Utils.showErrorDialog(s.message,true)}}),(t=>{const e=t.errors.pop();BX.Kanban.Utils.showErrorDialog("Error: "+e.message,true)}))}},completeTask:function(){var t=this.getDataKey("status");this.setStatus("completed");this.getGrid().ajax("completeTask",{taskId:this.getId(),columnId:this.getColumnId()}).then((e=>{const s=e.data;const i=e.errors.pop();if(s&&!i){this.getGrid().updateItem(this.getId(),s)}else if(i){this.setStatus(t);BX.Kanban.Utils.showErrorDialog(i.message,true)}}),(e=>{const s=e.errors.pop();this.setStatus(t);BX.Kanban.Utils.showErrorDialog("Error: "+s.message,true)}))},deadlineTask:function(){var t=this.getData();var e=BX.date.convertBitrixFormat(BX.message("FORMAT_DATETIME"));var s=BX.date.format(e,t.date_deadline||t.date_day_end);var i=BX.calendar({node:BX.proxy_context,value:s,currentTime:s,bTime:true,bCompatibility:true,bCategoryTimeVisibilityOption:"tasks.bx.calendar.deadline",bTimeVisibility:this.calendarSettings?this.calendarSettings.deadlineTimeVisibility==="Y":false,callback:function(t){this.getGrid().ajax("deadlineTask",{taskId:this.getId(),deadline:BX.date.format(e,t),columnId:this.getColumnId()}).then((t=>{const e=t.data;const s=t.errors.pop();if(e&&!s){this.getGrid().updateItem(e.id,e)}else if(s){BX.Kanban.Utils.showErrorDialog(s.message,true)}}),(t=>{const e=t.errors.pop();BX.Kanban.Utils.showErrorDialog("Error: "+e.message,true)}))}.bind(this),callback_after:function(t){BX.onCustomEvent(this.getGrid(),"Tasks.Kanban.Item:deadlineChanged",{value:t})}.bind(this)});BX.onCustomEvent(this.getGrid(),"Tasks.Kanban.Item:deadlineChangeClick",{calendar:i,itemId:t.id})},changeAuthorTask:function(){this.changeMemberTask("changeAuthorTask")},delegateTask:function(){this.changeMemberTask("delegateTask")},changeMemberTask:function(t){var e=this.getData();var s=this.responsible;var i=e.responsible.id;var a="R";if(t==="changeAuthorTask"){s=this.author;i=e.author.id;a="O"}var n;if(this.isSprintView){n=[{id:"scrum-user",options:{groupId:this.getGrid().getGroupId()},dynamicLoad:true},{id:"department"}]}else{n=[{id:"user",options:{emailUsers:true,networkUsers:this.networkEnabled,extranetUsers:true,inviteGuestLink:true,myEmailUsers:true,analyticsSource:"task"}},{id:"department"}]}BX.loadExt("ui.entity-selector").then(function(){var r=new BX.UI.EntitySelector.Dialog({targetNode:s,enableSearch:true,multiple:false,dropdownMode:this.isSprintView,context:"KANBAN_RESPONSIBLE_SELECTOR_"+t+e.id,preselectedItems:[["user",i]],undeselectedItems:[["user",i]],entities:n,events:{"Item:onSelect":function(e){const s=e.getData().item;const i=this.prepareUserData(s,a);this.getGrid().ajax(t,{taskId:this.getId(),columnId:this.getColumnId(),userId:i.id}).then((t=>{const e=t.data;const s=t.errors.pop();if(e&&!s){this.getGrid().updateItem(e.id,e)}else if(s){BX.Kanban.Utils.showErrorDialog(s.message,true)}}),(t=>{const e=t.errors.pop();BX.Kanban.Utils.showErrorDialog("Error: "+e.message,true)}))}.bind(this)}});r.show()}.bind(this))},prepareUserData:function(t,e){const s=t.getCustomData();const i=t.getEntityType();return{avatar:t.avatar,description:"",entityType:e,id:t.getId(),name:s.get("name"),lastName:s.get("lastName"),email:s.get("email"),nameFormatted:BX.Text.encode(t.getTitle()),networkId:"",type:{crmemail:false,extranet:i==="extranet",email:i==="email",network:i==="network"}}},getTaskUrl:function(t){if(parseInt(this.getGridData().groupId,10)>0){return this.getGridData().pathToGroupTask.replace("#task_id#",t)}return this.getGridData().pathToTask.replace("#task_id#",t)},isCompleted:function(){var t=this.getData();return t.completed},getStoryPoints:function(){return this.storyPoints},switchClass:function(t,e,s){if(s){BX.addClass(t,e)}else{BX.removeClass(t,e)}},switchVisible:function(t,e){if(e){t.style.display=""}else{BX.hide(t)}},onDragDrop:function(t,e,s){if(this.selectable&&this.getGrid().getSelectedItems().size>1){return this.onDragDropMultiple()}this.hideDragTarget();var i=this.getGrid().getItemByElement(t);var a=new BX.Kanban.DragEvent;a.setItem(i);a.setTargetColumn(this.getColumn());a.setTargetItem(this);BX.onCustomEvent(this.getGrid(),"Kanban.Grid:onBeforeItemMoved",[a]);if(!a.isActionAllowed()){return}var n=new BX.Promise;if(this.isSprintView&&this.getColumn().isFinishType()&&!i.getColumn().isFinishType()){top.BX.loadExt("tasks.scrum.dod").then(function(){if(typeof top.BX.Tasks.Scrum==="undefined"||typeof top.BX.Tasks.Scrum.Dod==="undefined"){n.fulfill()}this.scrumDod=new top.BX.Tasks.Scrum.Dod({groupId:this.getData()["groupId"],taskId:i.getId()});this.scrumDod.subscribe("resolve",(function(){n.fulfill()}));this.scrumDod.subscribe("reject",(function(){n.reject()}));this.scrumDod.isNecessary().then(function(t){if(t){this.scrumDod.showList()}else{n.fulfill()}}.bind(this))}.bind(this))}else{n.fulfill()}n.then(function(){var t=this.getGrid().moveItem(i,this.getColumn(),this);if(t){BX.onCustomEvent(this.getGrid(),"Kanban.Grid:onItemMoved",[i,this.getColumn(),this])}}.bind(this))},setFilterTag:function(){var t=BX.proxy_context.textContent.substring(1);var e=this.getGridData();var s=BX.Main.filterManager.getById(e.gridId);s.getApi().extendFilter({TAG:t,TAG_label:t})},setFilterEpic:function(t){var e=this.getGridData();var s=BX.Main.filterManager.getById(e.gridId);s.getApi().extendFilter({EPIC:String(t)})},render:function(){if(!this.container){this.createLayout()}var t=this.getData();var e=this.getColumn().getColor();var s=BX.util.hex2rgb(e);var i="rgba("+s.r+","+s.g+","+s.b+","+".7)";var a=BX.message("LANGUAGE_ID");if(a!=="en"&&a!=="de"){a="ru"}this.container.style.setProperty("--tasks-kanban-item-color",i);if(t.background){BX.style(this.containerImg,"background-image","url('"+t.background+"')");this.containerImg.setAttribute("href",this.getTaskUrl(this.getId()))}this.switchVisible(this.containerImg,t.background);this.link.innerHTML=this.clipTitle(t.name);this.link.setAttribute("href",this.getTaskUrl(this.getId()));this.switchClass(this.link,"tasks-kanban-item-title-hot",t.high);this.switchVisible(this.link,t.name!=="");if(this.getGrid().isScrumGrid()){BX.cleanNode(this.epicLayout);if(this.epic){this.epicLayout.appendChild(this.createEpicLayout())}}if(t.tags&&t.tags.length>0){BX.cleanNode(this.tags);for(var n=0,r=t.tags.length;n<r;n++){this.tag=BX.create("span",{props:{className:"ui-label ui-label-tag-light ui-label-fill ui-label-md ui-label-link"},children:[BX.create("span",{props:{className:"ui-label-inner"},text:"#"+t.tags[n],events:{click:BX.delegate((function(t){this.setFilterTag();t.stopPropagation()}),this)}})]});this.tags.appendChild(this.tag)}}this.switchClass(this.date_deadline_container,"tasks-kanban-item-pointer",t.allow_change_deadline);if(t.allow_change_deadline){BX.bind(this.date_deadline_container,"click",BX.delegate((function(t){this.deadlineTask();t.stopPropagation()}),this))}else{BX.unbind(this.date_deadline_container,"click",BX.delegate((function(t){this.deadlineTask();t.stopPropagation()}),this))}if(!this.isSprintView&&t?.deadline_visibility!=="hidden"){if(t.date_deadline||t.deferred||t.completed_supposedly){this.deadlineNotificationDate=t.deadline.value.replace("&minus;","-");this.date_deadline.setText(this.deadlineNotificationDate);this.date_deadline.setFill(t.deadline.fill);this.date_deadline.setColor(t.deadline.color)}else{this.deadlineNotificationDate="";this.date_deadline.setText(BX.message("TASKS_KANBAN_NO_DATE"));this.date_deadline.setFill(false);this.date_deadline.setColor(BX.UI.Label.LIGHT)}this.date_deadline.setCustomClass("tasks-kanban-item-deadline")}if(t.deferred){this.setStatus("deferred")}else if(t.completed){this.setStatus("completed")}else if(t.completed_supposedly){this.setStatus("completed_supposedly")}else if(t.overdue){this.setStatus("overdue")}else if(t.in_progress){this.setStatus("in_progress")}else if(t.date_start){this.setStatus("pause")}else if(t.new){this.setStatus("new")}else{this.setStatus("")}this.switchVisible(this.task_content,t.count_files>0||t.check_list.complete!==0||t.check_list.work!==0);if(t.counter.value>0){this.task_counter.setColor(t.counter.color);if(Number(this.task_counter.getValue())!==Number(t.counter.value)){this.task_counter.update(t.counter.value)}}this.switchVisible(this.task_counter_container,t.counter.value>0);this.switchVisible(this.check_list,t.check_list.complete!==0||t.check_list.work!==0);this.switchClass(this.check_list,"tasks-kanban-item-super-blue",t.log.checklist>0);this.check_list.setAttribute("title",BX.message("TASKS_KANBAN_TITLE_CHECKLIST").replace("#complete#",t.check_list.complete).replace("#all#",parseInt(t.check_list.complete)+parseInt(t.check_list.work)));this.check_list.textContent=t.log.checklist>0?"+"+t.log.checklist:t.check_list.complete+"/"+(+t.check_list.complete+ +t.check_list.work);this.switchVisible(this.count_files,t.count_files>0);this.switchClass(this.count_files,"tasks-kanban-item-super-blue",t.log.file>0);this.count_files.setAttribute("title",BX.message("TASKS_KANBAN_TITLE_FILES").replace("#count#",t.count_files));this.count_files.textContent=t.log.file>0?"+"+t.log.file:t.count_files;if(!this.isSprintView&&t.author){if(this.author){BX.remove(this.author)}this.author=BX.create("div",{props:{className:"tasks-kanban-item-author",style:"cursor: pointer"}});var o;if(t.author.extranet){o="tasks-kanban-item-author-avatar tasks-kanban-item-author-avatar-extranet"}else if(t.author.crm){o="tasks-kanban-item-author-avatar tasks-kanban-item-author-avatar-crm"}else if(t.author.mail){o="tasks-kanban-item-author-avatar tasks-kanban-item-author-avatar-mail"}else{o="tasks-kanban-item-author-avatar"}var l;!t.author.photo?l=" tasks-kanban-item-author-avatar-empty":l="";this.author.appendChild(BX.create("div",{props:{title:t.author.name,className:o+l},style:{backgroundImage:t.author.photo?"url('"+encodeURI(t.author.photo.src)+"')":"",cursor:t.allow_edit?"pointer":"default"},events:{click:t.allow_edit?BX.delegate((function(t){this.changeAuthorTask();t.stopPropagation()}),this):function(){}}}));this.user_container.appendChild(this.author)}if(t.responsible){if(this.responsible){BX.remove(this.responsible)}var c=this.isSprintView?"tasks-kanban-item-responsible-sprint":"tasks-kanban-item-responsible";this.responsible=BX.create("div",{props:{className:c,style:"cursor: pointer"}});var h;if(t.responsible.extranet){h="tasks-kanban-item-author-avatar tasks-kanban-item-author-avatar-extranet"}else if(t.responsible.crm){h="tasks-kanban-item-author-avatar tasks-kanban-item-author-avatar-crm"}else if(t.responsible.mail){h="tasks-kanban-item-author-avatar tasks-kanban-item-author-avatar-mail"}else{h="tasks-kanban-item-author-avatar"}this.responsible.appendChild(BX.create("div",{props:{title:t.responsible.name,className:h},style:{backgroundImage:t.responsible.photo?"url('"+encodeURI(t.responsible.photo.src)+"')":"",cursor:t.allow_delegate?"pointer":"default"},events:{click:t.allow_delegate?BX.delegate((function(t){this.delegateTask();t.stopPropagation()}),this):function(){}}}));this.user_container.appendChild(this.responsible)}if(this.time_logs){this.switchVisible(this.time_logs,t.time_tracking);if(t.time_tracking){this.time_logs.textContent=parseInt(t.time_estimate)>0?this.renderTime(t.time_logs)+" / "+this.renderTime(t.time_estimate,false):this.renderTime(t.time_logs)}else{this.time_logs.textContent=""}}if(!this.getGrid().isScrumGrid()){this.switchClass(this.container,"tasks-kanban-item-without-control",t.completed||!t.allow_complete&&!t.allow_start);if(this.task_start){this.switchVisible(this.task_start,t.allow_start)}if(this.task_complete){this.switchVisible(this.task_complete,t.allow_complete)}}BX.cleanNode(this.itemFieldsNode);if(t?.item_fields?.length>0){t.item_fields.forEach((t=>{if(t?.value||t?.collection?.length>0){this.itemFieldsNode.appendChild(this.getItemFieldDiv(t))}}))}return this.container},getItemFieldDiv(t){return BX.create("div",{props:{className:"tasks-kanban-item-fields-item"},children:[BX.create("div",{props:{className:"tasks-kanban-item-fields-item-title"},children:[BX.create("div",{props:{className:"tasks-kanban-item-fields-item-title-text"},text:t?.label})]}),BX.create("div",{props:{className:"tasks-kanban-item-fields-item-value"},text:t?.value,html:t?.collection?.length>0?this.getItemFieldLinks(t.collection):""})]})},getItemFieldLinks(t){return t.map((t=>`<a href="${BX.util.htmlspecialchars(t.url)}">${BX.util.htmlspecialchars(t.name)}</a>`))},animate:function(t){var e=t.duration;var s=t.draw;var i=t.timing||function(t){return t};var a=t.useAnimation&&!this.isAnimationInProgress||false;var n=performance.now();return new Promise(function(t,r){if(!a){this.isAnimationInProgress=false;return t()}var o=this;o.isAnimationInProgress=true;requestAnimationFrame(function a(r){var l=(r-n)/e;if(l>1){l=1}var c=i(l);s(c);if(l<1){requestAnimationFrame(a)}if(c===1){o.isAnimationInProgress=false;t()}}.bind(this))}.bind(this))},createLayout:function(){const t=this.getData();this.container=BX.create("div",{props:{className:"tasks-kanban-item"},events:{click:function(){if(typeof BX.Bitrix24!=="undefined"&&typeof BX.Bitrix24.PageSlider!=="undefined"){}}.bind(this)}});this.link=BX.create("a",{props:{className:t.counter.value>0?"tasks-kanban-item-title":"tasks-kanban-item-title tasks-kanban-item-title--with-counter"}});BX.Event.bind(this.link,"click",(()=>{this.getGrid().analytics("task_view","title_click")}));this.container.appendChild(this.link);this.container.appendChild(BX.Tag.render`<div class="tasks-kanban-item-line"></div>`);this.itemFieldsNode=BX.create("div",{props:{className:"tasks-kanban-item-fields"}});this.container.appendChild(this.itemFieldsNode);if(this.getGrid().isScrumGrid()){this.epicLayout=BX.create("span",{props:{className:"tasks-kanban-item-epic-container"}});if(this.epic){this.epicLayout.appendChild(this.createEpicLayout())}this.container.appendChild(this.epicLayout)}this.tags=BX.create("span",{props:{className:"tasks-kanban-item-tags"}});this.container.appendChild(this.tags);this.task_status=BX.create("div",{props:{className:"tasks-kanban-item-task-status"}});this.container.appendChild(this.task_status);this.task_status_title=BX.create("div",{props:{className:"tasks-kanban-item-status"}});this.task_status.appendChild(this.task_status_title);this.containerImg=BX.create("a",{props:{className:"tasks-kanban-item-image"}});this.container.appendChild(this.containerImg);this.task_content=BX.create("div",{props:{className:"tasks-kanban-item-info"}});this.container.appendChild(this.task_content);if(!this.isSprintView&&t.deadline_visibility!=="hidden"){this.date_deadline=new BX.UI.Label({text:t.deadline.value.replace("&minus;","-"),color:t.deadline.color,fill:t.date_deadline?t.deadline.fill:false});this.date_deadline_container=BX.create("div",{props:{className:"tasks-kanban-item-deadline"},children:[this.date_deadline.getContainer()]});this.container.appendChild(this.date_deadline_container)}this.check_list=BX.create("div",{props:{className:"tasks-kanban-item-checklist"}});this.task_content.appendChild(this.check_list);this.count_files=BX.create("div",{props:{className:"tasks-kanban-item-files"}});this.task_content.appendChild(this.count_files);this.actions_container=BX.create("div",{props:{className:"tasks-kanban-actions-container"}});this.container.appendChild(this.actions_container);this.user_container=BX.create("div",{props:{className:"tasks-kanban-item-users"}});this.actions_container.appendChild(this.user_container);if(!this.getGrid().isScrumGrid()){this.time_logs=BX.create("div",{props:{className:"tasks-kanban-item-timelogs"}});this.actions_container.appendChild(this.time_logs);this.track_control=BX.create("div",{props:{className:"tasks-kanban-item-control"}});this.container.appendChild(this.track_control);this.task_mute=BX.create("div",{props:{className:"tasks-kanban-task-mute"},events:{click:function(t){this.muteTask();t.stopPropagation()}.bind(this)}});this.track_control.appendChild(this.task_mute);this.task_start=BX.create("div",{props:{className:"tasks-kanban-task-start"},events:{click:function(t){this.startTask();t.stopPropagation()}.bind(this)}});this.track_control.appendChild(this.task_start);this.task_complete=BX.create("div",{props:{className:"tasks-kanban-task-complete",title:BX.message("TASKS_KANBAN_TITLE_COMPLETE")},events:{click:function(t){this.completeTask();t.stopPropagation()}.bind(this)}});this.track_control.appendChild(this.task_complete)}else{this.storyPointsNode=BX.create("div",{props:{className:"tasks-kanban-item-story-points",title:BX.message("TASKS_KANBAN_ITEM_STORY_POINTS_TITLE")},text:this.getDataKey("storyPoints")});this.container.appendChild(this.storyPointsNode)}this.task_counter=new BX.UI.Counter({value:t.counter.value,color:t.counter.color,animate:true});this.task_counter_container=BX.create("div",{props:{className:"tasks-kanban-task-counter"},children:[this.task_counter.getContainer()]});this.container.appendChild(this.task_counter_container);this.container.appendChild(this.createShadow());this.container.addEventListener("mouseenter",function(){this.addHoverClass(this.container)}.bind(this));this.container.addEventListener("mouseleave",function(){this.removeHoverClass(this.container)}.bind(this),false)},createShadow:function(){return BX.create("div",{props:{className:"tasks-kanban-item-shadow"}})},getContainer:function(){if(this.layout.container!==null){return this.layout.container}this.layout.container=BX.create("div",{attrs:{className:"main-kanban-item","data-id":this.getId(),"data-type":"item"},children:[this.getDragTarget(),this.getBodyContainer()]});this.makeDraggable();this.makeDroppable();if(this.grid.firstRenderComplete&&!this.draftContainer){this.layout.container.classList.add("main-kanban-item-new");const t=()=>{this.layout.container.classList.remove("main-kanban-item-new");this.getBodyContainer().removeEventListener("animationend",t)};this.getBodyContainer().addEventListener("animationend",t)}return this.layout.container},addHoverClass:function(t){this.timer=setTimeout((function(){t.classList.add("tasks-kanban-item-hover")}),150)},removeHoverClass:function(t){clearTimeout(this.timer);t.classList.remove("tasks-kanban-item-hover")},createEpicLayout:function(){const t=this.convertHexToRGBA(this.epic.color,.7);const e=this.convertHexToRGBA(this.epic.color,.3);return BX.create("span",{props:{className:"tasks-kanban-item-epic"},style:{background:e,borderColor:t},text:this.epic.name,events:{click:BX.delegate((function(t){this.setFilterEpic(this.epic.id);t.stopPropagation()}),this)}})},convertHexToRGBA:function(t,e){let s=t.replace("#","");if(s.length===3){s=String(s[0]+s[0]+s[1]+s[1]+s[2]+s[2])}const i=parseInt(s.substring(0,2),16);const a=parseInt(s.substring(2,4),16);const n=parseInt(s.substring(4,6),16);return"rgba("+i+","+a+","+n+","+e+")"}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:52:"/bitrix/js/tasks/kanban/column.min.js?17287331748290";s:6:"source";s:33:"/bitrix/js/tasks/kanban/column.js";s:3:"min";s:37:"/bitrix/js/tasks/kanban/column.min.js";s:3:"map";s:37:"/bitrix/js/tasks/kanban/column.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Tasks.Kanban");BX.Tasks.Kanban.Column=function(t){BX.Kanban.Column.apply(this,arguments);this.sortButton=null;this.type=t.type?t.type:"";this.viewStateName=t.viewStateName||"kanban"};BX.Tasks.Kanban.Column.prototype={__proto__:BX.Kanban.Column.prototype,constructor:BX.Tasks.Kanban.Column,getCustomTitleButtons:function(){if(this.getGridData().showSortButton){this.sortButton=BX.create("div",{props:{className:"tasks-kanban-column-sort"},events:{click:this.handleSortButtonClick.bind(this)}});return this.sortButton}},isRemovable:function(){if(this.getGrid().isScrumGrid()){return!this.isFinishType()&&!this.isNewType()}return BX.Kanban.Column.prototype.isRemovable.call(this)},onDragDrop:function(t,e,i){if(this.getGrid().isMultiSelect()&&this.getGrid().getSelectedItems().size>1){return this.onDragDropMultiple()}this.hideDragTarget();var n=this.getGrid().getItemByElement(t);var s=new BX.Kanban.DragEvent;s.setItem(n);s.setTargetColumn(this);BX.onCustomEvent(this.getGrid(),"Kanban.Grid:onBeforeItemMoved",[s]);if(!s.isActionAllowed()){return}var a=new BX.Promise;if(n.isSprintView&&this.isFinishType()&&!n.getColumn().isFinishType()){top.BX.loadExt("tasks.scrum.dod").then(function(){if(typeof top.BX.Tasks.Scrum==="undefined"||typeof top.BX.Tasks.Scrum.Dod==="undefined"){a.fulfill()}this.scrumDod=new top.BX.Tasks.Scrum.Dod({groupId:n.getData()["groupId"],taskId:n.getId()});this.scrumDod.subscribe("resolve",(function(){a.fulfill()}));this.scrumDod.subscribe("reject",(function(){a.reject()}));this.scrumDod.isNecessary().then(function(t){if(t){this.scrumDod.showList()}else{a.fulfill()}}.bind(this))}.bind(this))}else{a.fulfill()}a.then(function(){var t=this.getGrid().moveItem(n,this);if(t){BX.onCustomEvent(this.getGrid(),"Kanban.Grid:onItemMoved",[n,this,null])}}.bind(this))},isFinishType:function(){return this.getType()==="FINISH"},isNewType:function(){return this.getType()==="NEW"},handleSortButtonClick:function(t){var e=this.getGridData().sortMenuItems;BX.PopupMenu.show("tasks-kanban-column-sort-"+this.getId(),this.sortButton,e,{})},setGrid:function(t){BX.Kanban.Column.prototype.setGrid.call(this,t);BX.addCustomEvent(this.getGrid(),"Kanban.Grid:onItemDragStop",function(){if(this.getGrid().isRealtimeMode()){this.hideDragTarget()}}.bind(this))},handleConfirmButtonClick:function(){var t=this.getConfirmDialog();var e=t.getButton("main-kanban-confirm-remove-button");if(e.getContainer().classList.contains("popup-window-button-wait")){return}e.addClassName("popup-window-button-wait");var i=this.getGrid().getEventPromise("Kanban.Grid:onColumnRemovedAsync",null,function(i){if(this.getGrid().isGroupingMode()){this.getGrid().removeColumnsByIdFromNeighborGrids(this.getId())}this.getGrid().removeColumn(this);e.removeClassName("popup-window-button-wait");t.close()}.bind(this),function(i){t.setContent(i);e.getContainer().style.display="none"}.bind(this));i.fulfill(this)},handleAddColumnButtonClick:function(t){const e=this.getGridData();if(e.rights&&e.rights.canAddColumn){const t=this.getGrid().addColumn({id:"kanban-new-column-"+BX.util.getRandomString(5),type:"BX.Tasks.Kanban.DraftColumn",canSort:false,canAddItem:false,droppable:false,targetId:this.getGrid().getNextColumnSibling(this),animate:"slide-left"});t.switchToEditMode()}else if(typeof BX.Intranet!=="undefined"){this.getGrid().accessNotify()}},switchToEditMode:function(){const t=this.getGridData();if(t.rights&&t.rights.canAddColumn){BX.Kanban.Column.prototype.switchToEditMode.apply(this,arguments)}else if(typeof BX.Intranet!=="undefined"){this.getGrid().accessNotify()}},handleAddItemButtonClick:function(t){const e=this.getGridData();if(e.addItemInSlider===true&&BX.SidePanel.Instance){BX.SidePanel.Instance.open(e.pathToTaskCreate.replace("#task_id#",0))}else{BX.Kanban.Column.prototype.handleAddItemButtonClick.apply(this,arguments)}},getTitleContainer:function(){if(this.layout.title){return this.layout.title}this.layout.title=BX.create("div",{attrs:{className:this.isScrumGridHeader()||!this.isScrumGrid()?"main-kanban-column-title":""}});return this.layout.title},getSubTitle:function(){if(this.isScrumGridHeader()){this.layout.subTitle=document.createElement("div");return this.layout.subTitle}else{return BX.Kanban.Column.prototype.getSubTitle.call(this)}},renderTitle:function(){if(this.isScrumGridHeader()){this.getContainer().classList.add("main-kanban-column-scrum")}if(this.isScrumGridHeader()||!this.isScrumGrid()){return BX.Kanban.Column.prototype.renderTitle.call(this)}else{return document.createElement("div")}},getBody:function(){if(this.isScrumGridHeader()){this.layout.body=document.createElement("div");this.layout.items=this.getItemsContainer();return this.layout.body}else{return BX.Kanban.Column.prototype.getBody.call(this)}},getDefaultTitleLayout:function(){if(this.layout.titleBody){return this.layout.titleBody}var t=this.getCustomTitleButtons();var e=this.getGrid().getData();if(BX.type.isDomNode(t)){t=[t]}else if(!BX.type.isArray(t)){t=[]}this.layout.titleBody=BX.create("div",{attrs:{className:"main-kanban-column-title-wrapper"},children:[this.layout.color=BX.create("div",{attrs:{className:"main-kanban-column-title-bg",style:"background: #"+this.getColor()}}),this.layout.info=BX.create("div",{attrs:{className:"main-kanban-column-title-info"},children:[this.layout.name=BX.create("div",{attrs:{className:"main-kanban-column-title-text"},children:[this.getColumnTitle(),this.getTotalItem()]}),this.isEditable()?this.getEditButton():null].concat(t)}),this.isEditable()?this.getEditForm():null,this.layout.titleArrow=BX.create("span",{attrs:{className:"main-kanban-column-title-right"}})]});if(e.kanbanType==="TL"){this.layout.titleBody.classList.add("task-kanban-column-revert")}return this.layout.titleBody},getType:function(){return this.type},getGrid:function(){return this.grid},getAddColumnButton:function(){if(this.isScrumGrid()&&!this.isScrumGridHeader()){return document.createElement("div")}else{return BX.Kanban.Column.prototype.getAddColumnButton.call(this)}},getItemsContainer:function(){if(this.isScrumGrid()&&this.isScrumGridHeader()){return document.createElement("div")}else{return BX.Kanban.Column.prototype.getItemsContainer.call(this)}},isScrumGrid:function(){return this.getGrid().isScrumGrid()},isScrumGridHeader:function(){return this.getGrid().isScrumGridHeader()},addItem:function(t,e){BX.Kanban.Column.prototype.addItem.call(this,t,e);if(t.isCountable()){this.updateHeaderColumn()}},removeItem:function(t){BX.Kanban.Column.prototype.removeItem.call(this,t);if(t.isCountable()){this.updateHeaderColumn()}},updateHeaderColumn:function(){if(this.isScrumGrid()){this.getGrid().getNeighborGrids().forEach(function(t){if(t.isScrumGridHeader()){t.updateTotals()}}.bind(this))}}};BX.Tasks.Kanban.DraftColumn=function(t){BX.Kanban.DraftColumn.apply(this,arguments)};BX.Tasks.Kanban.DraftColumn.prototype={__proto__:BX.Kanban.DraftColumn.prototype,constructor:BX.Tasks.Kanban.DraftColumn,isScrumGridHeader:function(){return this.getGrid().isScrumGridHeader()},applyEditMode:function(){if(this.asyncEventStarted){return}var t=BX.util.trim(this.getTitleTextBox().value);if(!t.length){t=this.getGrid().getMessage("COLUMN_TITLE_PLACEHOLDER")}this.setName(t);this.getContainer().classList.add("main-kanban-column-disabled");this.getTitleTextBox().disabled=true;this.asyncEventStarted=true;var e=this.getGrid().getEventPromise("Kanban.Grid:onColumnAddedAsync",null,function(t){if(!BX.Kanban.Utils.isValidId(t.targetId)){var e=this.getGrid().getNextColumnSibling(this);if(e){t.targetId=e.getId()}}if(this.getGrid().isGroupingMode()){this.getGrid().getNeighborGrids().forEach((function(e){e.addColumn(t)}))}this.getGrid().removeColumn(this);this.getGrid().addColumn(t)}.bind(this),function(t){this.getGrid().removeColumn(this)}.bind(this));e.fulfill(this)},getSubTitle:function(){if(this.isScrumGridHeader()){this.layout.subTitle=document.createElement("div");return this.layout.subTitle}else{return BX.Kanban.Column.prototype.getSubTitle.call(this)}},getBody:function(){if(this.isScrumGridHeader()){this.layout.body=document.createElement("div");this.layout.items=this.getItemsContainer();return this.layout.body}else{return BX.Kanban.Column.prototype.getBody.call(this)}}}})();
/* End */
;
//# sourceMappingURL=kernel_tasks_kanban.map.js