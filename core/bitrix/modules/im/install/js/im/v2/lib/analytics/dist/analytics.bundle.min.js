this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,a,i){"use strict";const o=Object.freeze({private:"chatType_private",multiuser:"chatType_multiuser"});const s=Object.freeze({openMessenger:"open_messenger",openChat:"open_chat",createNewChat:"create_new_chat",audioUse:"audio_use",openTab:"open_tab",popupOpen:"popup_open",openPrices:"open_prices",openSettings:"open_settings",clickCreateNew:"click_create_new",openExisting:"open_existing",view:"view",click:"click",clickEdit:"click_edit",submitEdit:"submit_edit"});const n=Object.freeze({ai:"ai",checkin:"checkin",im:"im",infoHelper:"InfoHelper"});const c=Object.freeze({chatOperations:"chat_operations",shift:"shift",messenger:"messenger",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limit:"limit",limitBanner:"limit_banner",toolOff:"tool_off"});const r=Object.freeze({ai:"ai",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limitOfficeChatingHistory:"limit_office_chating_history"});const l=Object.freeze({copilotTab:"copilot_tab",chat:"chat",chatStart:"chat_start",chatHistory:"chat_history",sidebar:"sidebar",chatWindow:"chat_window",messageLink:"message_link"});const d=Object.freeze({success:"success",errorTurnedOff:"error_turnedoff"});const p=Object.freeze({contextMenu:"context_menu"});const h="custom";function b(e){var t;return(t=i.ChatType[e.type])!=null?t:h}var g=babelHelpers.classPrivateFieldLooseKey("onHistoryLimitBannerClick");var y=babelHelpers.classPrivateFieldLooseKey("getSidebarPanelNameForAnalytics");class u{constructor(){Object.defineProperty(this,y,{value:v});Object.defineProperty(this,g,{value:m})}onDialogHistoryLimitExceeded({dialogId:e,noMessages:i}){const o=i?l.chatStart:l.chatHistory;const d=a.Core.getStore().getters["chats/get"](e);const p=b(d);const h={tool:n.im,category:c.limitBanner,event:s.view,type:r.limitOfficeChatingHistory,c_section:o,p1:`chatType_${p}`};t.sendData(h)}onSidebarHistoryLimitExceeded({dialogId:e,panel:i}){const o=a.Core.getStore().getters["chats/get"](e);const d=b(o);const p={tool:n.im,category:c.limitBanner,event:s.view,type:r.limitOfficeChatingHistory,c_section:l.sidebar,c_element:babelHelpers.classPrivateFieldLooseBase(this,y)[y](i),p1:`chatType_${d}`};t.sendData(p)}onDialogHistoryLimitBannerClick({dialogId:e}){const t=l.chatWindow;babelHelpers.classPrivateFieldLooseBase(this,g)[g]({dialogId:e,section:t})}onSidebarHistoryLimitBannerClick({dialogId:e,panel:t}){const a=l.sidebar;const i=babelHelpers.classPrivateFieldLooseBase(this,y)[y](t);babelHelpers.classPrivateFieldLooseBase(this,g)[g]({dialogId:e,section:a,element:i})}onGoToContextHistoryLimitClick({dialogId:e}){const t=l.messageLink;babelHelpers.classPrivateFieldLooseBase(this,g)[g]({dialogId:e,section:t})}}function m({dialogId:e,section:i,element:o}){const l=a.Core.getStore().getters["chats/get"](e);const d=b(l);const p={tool:n.im,category:c.limitBanner,event:s.click,type:r.limitOfficeChatingHistory,c_section:i,p1:`chatType_${d}`};if(o){p.c_element=o}t.sendData(p)}function v(e){switch(e){case i.SidebarDetailBlock.main:return"main";case i.SidebarDetailBlock.file:case i.SidebarDetailBlock.fileUnsorted:case i.SidebarDetailBlock.audio:case i.SidebarDetailBlock.brief:case i.SidebarDetailBlock.document:case i.SidebarDetailBlock.media:case i.SidebarDetailBlock.other:return"docs";case i.SidebarDetailBlock.messageSearch:return"message_search";case i.SidebarDetailBlock.favorite:return"favs";case i.SidebarDetailBlock.link:return"links";case i.SidebarDetailBlock.task:return"task";case i.SidebarDetailBlock.meeting:return"event";default:return"unknown"}}function f(e){switch(e){case i.ChatType.channel:case i.ChatType.openChannel:case i.ChatType.comment:case i.ChatType.generalChannel:return c.channel;case i.ChatType.copilot:return c.copilot;case i.ChatType.videoconf:return c.videoconf;default:return c.chat}}var C=babelHelpers.classPrivateFieldLooseKey("excludedChats");var _=babelHelpers.classPrivateFieldLooseKey("currentTab");var B=babelHelpers.classPrivateFieldLooseKey("historyLimit");var L=babelHelpers.classPrivateFieldLooseKey("instance");class H{constructor(){Object.defineProperty(this,C,{writable:true,value:new Set});Object.defineProperty(this,_,{writable:true,value:i.Layout.chat.name});Object.defineProperty(this,B,{writable:true,value:new u})}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,L)[L]){babelHelpers.classPrivateFieldLooseBase(this,L)[L]=new this}return babelHelpers.classPrivateFieldLooseBase(this,L)[L]}onOpenMessenger(){t.sendData({event:s.openMessenger,tool:n.im,category:c.messenger})}onCreateCopilotChat({chatId:e,dialogId:a}){babelHelpers.classPrivateFieldLooseBase(this,C)[C].add(a);t.sendData({event:s.createNewChat,tool:n.ai,category:c.chatOperations,c_section:l.copilotTab,type:r.ai,p3:o.private,p5:`chatId_${e}`})}onOpenCopilotChat(e){const i=a.Core.getStore().getters["chats/get"](e);const d=i.userCounter<=2?o.private:o.multiuser;t.sendData({event:s.openChat,tool:n.ai,category:c.chatOperations,c_section:l.copilotTab,type:r.ai,p3:d,p5:`chatId_${i.chatId}`})}onOpenCopilotTab({isAvailable:e=true}={}){const a={event:s.openTab,tool:n.ai,category:c.chatOperations,c_section:l.copilotTab,status:e?d.success:d.errorTurnedOff};t.sendData(a)}onOpenTab(e){const a=[i.Layout.chat.name,i.Layout.copilot.name,i.Layout.channel.name,i.Layout.notification.name,i.Layout.settings.name,i.Layout.openlines.name];if(!a.includes(e)){return}if(babelHelpers.classPrivateFieldLooseBase(this,_)[_]===e){return}babelHelpers.classPrivateFieldLooseBase(this,_)[_]=e;t.sendData({event:s.openTab,tool:n.im,category:c.messenger,type:e})}onUseCopilotAudioInput(){t.sendData({event:s.audioUse,tool:n.ai,category:c.chatOperations,c_section:l.copilotTab})}onOpenCheckInPopup(){t.sendData({event:s.popupOpen,tool:n.checkin,category:c.shift,c_section:l.chat})}onOpenPriceTable(e){t.sendData({tool:n.infoHelper,category:c.limit,event:s.openPrices,type:e,c_section:l.chat})}onOpenToolsSettings(e){t.sendData({tool:n.infoHelper,category:c.toolOff,event:s.openSettings,type:e,c_section:l.chat})}onStartCreateNewChat(e){const i=a.Core.getStore().getters["application/getLayout"].name;t.sendData({tool:n.im,category:f(e),event:s.clickCreateNew,type:e,c_section:`${i}_tab`})}onCreateChat(e){babelHelpers.classPrivateFieldLooseBase(this,C)[C].add(e)}onOpenChat(e){if(babelHelpers.classPrivateFieldLooseBase(this,C)[C].has(e.dialogId)){babelHelpers.classPrivateFieldLooseBase(this,C)[C].delete(e.dialogId);return}const o=b(e);if(o===i.ChatType.copilot){this.onOpenCopilotChat(e.dialogId)}const c=a.Core.getStore().getters["application/getLayout"].name;const r=e.role===i.UserRole.guest?"N":"Y";const l={tool:n.im,category:f(o),event:s.openExisting,type:o,c_section:`${c}_tab`,p3:`isMember_${r}`,p5:`chatId_${e.chatId}`};if(o===i.ChatType.comment){const t=a.Core.getStore().getters["chats/getByChatId"](e.parentChatId);l.p1=`chatType_${t.type}`;l.p4=`parentChatId_${e.parentChatId}`}t.sendData(l)}onOpenChatEditForm(e){const i=a.Core.getStore().getters["chats/get"](e);t.sendData({tool:n.im,category:f(i.type),event:s.clickEdit,c_section:l.sidebar,c_sub_section:p.contextMenu,p1:`chatType_${i.type}`,p5:`chatId_${i.chatId}`})}onSubmitChatEditForm(e){babelHelpers.classPrivateFieldLooseBase(this,C)[C].add(e);const i=a.Core.getStore().getters["chats/get"](e);t.sendData({tool:n.im,category:f(i.type),event:s.submitEdit,p1:`chatType_${i.type}`,p5:`chatId_${i.chatId}`})}onCancelChatEditForm(e){babelHelpers.classPrivateFieldLooseBase(this,C)[C].add(e)}onDialogHistoryLimitExceeded({dialogId:e,noMessages:t}){babelHelpers.classPrivateFieldLooseBase(this,B)[B].onDialogHistoryLimitExceeded({dialogId:e,noMessages:t})}onDialogHistoryLimitBannerClick({dialogId:e}){babelHelpers.classPrivateFieldLooseBase(this,B)[B].onDialogHistoryLimitBannerClick({dialogId:e})}onSidebarHistoryLimitExceeded({dialogId:e,panel:t}){babelHelpers.classPrivateFieldLooseBase(this,B)[B].onSidebarHistoryLimitExceeded({dialogId:e,panel:t})}onSidebarHistoryLimitBannerClick({dialogId:e,panel:t}){babelHelpers.classPrivateFieldLooseBase(this,B)[B].onSidebarHistoryLimitBannerClick({dialogId:e,panel:t})}onGoToContextHistoryLimitClick({dialogId:e}){babelHelpers.classPrivateFieldLooseBase(this,B)[B].onGoToContextHistoryLimitClick({dialogId:e})}}Object.defineProperty(H,L,{writable:true,value:void 0});e.Analytics=H})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.UI.Analytics,BX.Messenger.v2.Application,BX.Messenger.v2.Const);
//# sourceMappingURL=analytics.bundle.map.js