{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","ui_bbcode_astProcessor","main_core","ui_bbcode_encoder","ui_linkify","ui_bbcode_model","getByIndex","array","index","Type","isArray","TypeError","isInteger","preparedIndex","length","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","isAllowedTag","isChildAllowed","parent","child","TAG_REGEX","TAG_REGEX_GS","isSpecialChar","symbol","includes","isList","String","toLowerCase","isListItem","parserScheme","BBCodeParser","constructor","options","allowedLinkify","scheme","setScheme","DefaultBBCodeScheme","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","encoder","BBCodeEncoder","setEncoder","isBoolean","linkify","setIsAllowedLinkify","getScheme","handler","onUnknownHandler","getOnUnknownHandler","getEncoder","value","Boolean","isAllowedLinkify","canBeLinkified","node","getName","notAllowedNodeNames","inNotAllowedNode","some","AstProcessor","findParentNodeByName","static","getType","BBCodeNode","ELEMENT_NODE","nodeName","newNode","createElement","replace","setChildren","getChildren","openingTag","getOpeningTag","closingTag","getClosingTag","createText","isStringFilled","parseText","text","reduce","acc","push","lastItem","isNil","map","fragment","createNewLine","createTab","content","decodeText","bbcode","startIndex","nextContent","slice","matchResult","match","RegExp","source","test","parseAttributes","sourceAttributes","result","attributes","startsWith","decodeAttribute","trimQuotes","trim","split","filter","item","key","parse","createRoot","firstTagIndex","findNextTagIndex","textBeforeFirstTag","appendChild","stack","wasOpened","current","level","fullTag","slash","attrs","isOpeningTag","lowerCaseTagName","isPotentiallyVoid","tagScheme","isAllowedVoidTag","isVoid","Object","fromEntries","nextTagIndex","openedTagIndex","indexOf","splice","getFinalLineBreaksIndexes","skip","reduceRight","flattenAst","forEach","finalLinebreaksIndexes","toString","tokens","Linkify","tokenize","nodes","token","t","toHref","children","BBCode"],"sources":["parser.bundle.js"],"mappings":"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"}