{"version":3,"file":"html-formatter.bundle.map.js","names":["this","BX","UI","BBCode","exports","ui_smiley","ui_codeParser","ui_bbcode_model","ui_videoService","main_core","ui_bbcode_formatter","createEmptyParagraphs","scheme","count","result","i","push","createElement","name","shouldWrapInParagraph","node","getType","BBCodeNode","ELEMENT_NODE","hasGroup","wrapTextNodes","nodes","currentParagraph","lineBreaks","isNewLine","appendChild","createNewLine","length","normalizeTextNodes","getScheme","children","getChildren","setChildren","RootNodeFormatter","NodeFormatter","constructor","options","super","convert","document","createDocumentFragment","before","findParent","startingNode","findFn","curr","ROOT_NODE","getParent","_smileyParser","babelHelpers","classPrivateFieldLooseKey","TextNodeFormatter","text","toString","parent","getName","createTextNode","splits","classPrivateFieldLooseBase","parse","fragment","currentIndex","split","start","chunk","slice","typing","end","smiley","SmileyManager","get","createImg","tail","Object","defineProperty","writable","value","SmileyParser","getAll","img","src","encodeURI","getImage","className","alt","getTyping","getWidth","getHeight","width","height","TabNodeFormatter","LinebreakNodeFormatter","trimLineBreaks","trimmedNodes","firstNode","lastNode","isLineBreakNode","isParagraphNode","isEmpty","splice","normalizeLineBreaks","at","test","getTextContent","ParagraphNodeFormatter","Dom","create","tag","attrs","BoldNodeFormatter","getAttributes","UnderlineNodeFormatter","ItalicNodeFormatter","StrikethroughNodeFormatter","SpanNodeFormatter","TableNodeFormatter","classname","TableHeadCellNodeFormatter","TableDataCellNodeFormatter","TableRowNodeFormatter","ListNodeFormatter","tagName","getValue","ListItemNodeFormatter","QuoteNodeFormatter","_codeParser","CodeNodeFormatter","content","dataset","decorator","getCodeTokenNodes","CodeParser","tokens","forEach","token","partials","partialsLength","part","span","type","textContent","LinkNodeFormatter","validate","nodeValue","fetchNodeValue","startsWithJavascriptScheme","formatter","isShortLinkEnabled","isIncludeImg","some","nodeContentLength","getPlainTextLength","shortLink","getLinkSettings","maxLength","sourceHref","nodeRoot","createRoot","left","right","offset","lastFragmentLength","sourceRightFragmentLength","newLink","clone","setValue","createText","lastFragment","Type","isStringFilled","getContent","nodeAttributes","defaultTarget","attributes","href","target","static","toPlainText","regexp","SpoilerNodeFormatter","trim","title","Loc","getMessage","after","element","summary","UserNodeFormatter","_mentionSettings$urlT","mentionSettings","getMentionSettings","urlTemplate","user","userUrl","replaceAll","DepartmentNodeFormatter","department","departmentUrl","ProjectNodeFormatter","project","projectUrl","createImageNode","loading","style","aspectRatio","events","error","event","cssText","validateImageUrl","url","ImageNodeFormatter","Number","getAttribute","isNumber","Math","round","createVideoNode","video","controls","preload","playsinline","ATTRIBUTE_WHITESPACES","SAFE_URL","sanitizeUrl","normalizedUrl","validateVideoUrl","VideoNodeFormatter","replace","uri","Uri","trusted","VideoService","createByHost","getHost","frameborder","allowfullscreen","FileNodeFormatter","fileMode","getFileMode","data","serverFileId","info","files","find","file","isImage","Text","toInteger","serverPreviewWidth","serverPreviewHeight","serverPreviewUrl","isVideo","downloadUrl","fileId","fileInfo","JSON","stringify","NodeFormatters","freeze","globalSettings","Extension","getSettings","_linkSettings","_mentionSettings","_fileMode","_isVoidElement","HtmlFormatter","Formatter","_isVoidElement2","setLinkSettings","linkSettings","setMentionSettings","mention","includes","defaultFormatters","values","map","FormatterClass","setNodeFormatters","formatters","isPlainObject","enabled","isInteger","settings","isElement","source","nodeType","Node","DOCUMENT_FRAGMENT_NODE","isUndefined","getDefaultUnknownNodeCallback","isVoid","createFragment","getOpeningTag","getClosingTag","toLowerCase","Smiley"],"sources":["html-formatter.bundle.js"],"mappings":"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"}